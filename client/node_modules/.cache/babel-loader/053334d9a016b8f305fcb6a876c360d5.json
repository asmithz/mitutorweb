{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { BaseView } from '../../components/BaseView';\nimport { MS_PER_DAY, firstDayInWeek, firstDayOfMonth, getDate, addDays, lastDayOfMonth, ZonedDate } from '@progress/kendo-date-math';\nimport { classNames } from '@progress/kendo-react-common';\nimport { VerticalResourceIterator } from '../common/VerticalResourceIterator';\nimport { HorizontalResourceIterator } from '../common/HorizontalResourceIterator';\nimport { mapItemsToSlots, mapSlotsToItems, toUTCDateTime, orderSort } from '../../utils';\nimport { monthViewTitle, messages } from '../../messages';\nimport { SchedulerEditSlot } from '../../slots/SchedulerEditSlot';\nimport { useInternationalization } from '@progress/kendo-react-intl';\nimport { DAYS_IN_WEEK_COUNT } from '../../constants';\nimport { toRanges } from '../../services/rangeService';\nimport { toSlots } from '../../services/slotsService';\nimport { toOccurrences } from '../../services/occurrenceService';\nimport { toItems } from '../../services/itemsService';\nimport { ShowMoreItemsButton } from '../../components/ShowMoreItemsButton';\nimport { SchedulerEditItem } from '../../items/SchedulerEditItem';\nimport { useSchedulerPropsContext, useSchedulerDataContext, useSchedulerDateContext, useSchedulerViewsContext, useSchedulerGroupsContext, useSchedulerOrientationContext, useSchedulerDateRangeContext, useSchedulerFieldsContext, useSchedulerActiveViewContext } from '../../context/SchedulerContext';\nimport { SchedulerResourceIteratorContext } from '../../context/SchedulerResourceIteratorContext';\nimport { DateHeaderCell } from '../../components/DateHeaderCell';\nvar DAY_FORMAT = {\n  skeleton: 'dd'\n};\n/**\n * Represents the KendoReact [MonthView]({% slug month_view_scheduler %}) Component.\n */\n\nexport var MonthView = function (props) {\n  var _a = useSchedulerPropsContext(),\n      group = _a.group,\n      timezone = _a.timezone,\n      propResources = _a.resources;\n\n  var EditItem = props.editItem || SchedulerEditItem;\n  var EditSlot = props.editSlot || SchedulerEditSlot;\n  var data = useSchedulerDataContext()[0];\n\n  var _b = useSchedulerDateContext(),\n      setDate = _b[1];\n\n  var _c = useSchedulerActiveViewContext(),\n      setView = _c[1];\n\n  var views = useSchedulerViewsContext();\n  var groups = useSchedulerGroupsContext();\n  var orientation = useSchedulerOrientationContext();\n  var dateRange = useSchedulerDateRangeContext();\n  var intl = useInternationalization();\n  var fields = useSchedulerFieldsContext();\n  var itemsPerSlot = props.itemsPerSlot || defaultProps.itemsPerSlot;\n  var ranges = React.useMemo(function () {\n    return toRanges(dateRange, {\n      step: MS_PER_DAY * DAYS_IN_WEEK_COUNT,\n      timezone: timezone\n    });\n  }, [dateRange.start.getTime(), dateRange.end.getTime(), timezone]);\n  var slots = React.useMemo(function () {\n    return toSlots(dateRange, {\n      step: MS_PER_DAY\n    }, {\n      groups: groups,\n      ranges: ranges\n    });\n  }, [dateRange.start.getTime(), dateRange.end.getTime(), groups, ranges]);\n  var occurrences = React.useMemo(function () {\n    return toOccurrences(data, {\n      dateRange: dateRange,\n      fields: fields,\n      timezone: timezone\n    });\n  }, [data, dateRange.start.getTime(), dateRange.end.getTime(), fields, timezone]);\n  var items = React.useMemo(function () {\n    return toItems(occurrences, {\n      timezone: timezone\n    }, {\n      groups: groups,\n      ranges: ranges\n    });\n  }, [occurrences, timezone, groups, ranges]);\n  var handleShowMoreItemsClick = React.useCallback(function (event) {\n    var newView = views.find(function (vw) {\n      return vw.props.name === 'day';\n    });\n\n    if (!setView || !newView || !newView.props.name || !event.target.slot) {\n      return;\n    }\n\n    setView(newView.props.name, event);\n    setDate(event.target.slot.start, event);\n  }, [setView, views]);\n  React.useMemo(function () {\n    return mapItemsToSlots(items, slots, true);\n  }, [items, slots]);\n  React.useMemo(function () {\n    return mapSlotsToItems(items, slots, true);\n  }, [items, slots]);\n  var head = React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n    var groupIndex = _a.groupIndex;\n    return React.createElement(\"div\", {\n      className: \"k-scheduler-row\",\n      key: groupIndex\n    }, slots.filter(function (slot) {\n      return slot.group.index === groupIndex && slot.range.index === 0;\n    }).map(function (slot, slotIndex) {\n      return React.createElement(DateHeaderCell, {\n        as: props.dateHeaderCell,\n        key: slotIndex,\n        \"data-dayslot-index\": slotIndex,\n        date: ZonedDate.fromLocalDate(new Date(slot.zonedEnd.getTime() - (slot.zonedEnd.getTime() - slot.zonedStart.getTime()) / 2), timezone),\n        start: slot.start,\n        end: slot.end,\n        format: {\n          skeleton: 'EEEE'\n        }\n      });\n    }));\n  });\n  var body = React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n    var groupIndex = _a.groupIndex;\n    return ranges.map(function (_, rangeIndex) {\n      return React.createElement(\"div\", {\n        className: \"k-scheduler-row\",\n        key: rangeIndex\n      }, slots.filter(function (slot) {\n        return slot.group.index === groupIndex && slot.range.index === rangeIndex;\n      }).map(function (slot, slotIndex, filtered) {\n        return React.createElement(EditSlot, __assign({\n          slot: props.slot,\n          viewSlot: props.viewSlot,\n          key: slotIndex,\n          form: props.form\n        }, slot, {\n          expandable: {\n            offsetTop: 30,\n            offsetBottom: itemsPerSlot < slot.items.length ? 15 : 0\n          },\n          onDataAction: props.onDataAction,\n          col: orientation === 'horizontal' ? filtered.length * (groupIndex || 0) + slotIndex : slotIndex,\n          row: orientation === 'horizontal' ? rangeIndex : ranges.length * (groupIndex || 0) + rangeIndex,\n          editable: props.editable\n        }), React.createElement(\"span\", {\n          className: \"k-link k-nav-day\"\n        }, intl.formatDate(new Date(slot.end.getTime() - (slot.end.getTime() - slot.start.getTime()) / 2), DAY_FORMAT)), itemsPerSlot < slot.items.length && React.createElement(ShowMoreItemsButton, {\n          slot: slot,\n          onClick: handleShowMoreItemsClick\n        }));\n      }));\n    });\n  });\n  return React.createElement(BaseView, {\n    props: props,\n    slots: slots,\n    ranges: ranges,\n    className: classNames('k-scheduler-monthview', props.className)\n  }, React.createElement(\"div\", {\n    className: \"k-scheduler-head\"\n  }, orientation === 'horizontal' ? React.createElement(HorizontalResourceIterator, {\n    nested: true,\n    resources: propResources,\n    group: group\n  }, head) : React.createElement(VerticalResourceIterator, {\n    resources: propResources,\n    group: group\n  }, head)), React.createElement(\"div\", {\n    className: \"k-scheduler-body\"\n  }, orientation === 'horizontal' ? React.createElement(HorizontalResourceIterator, {\n    resources: propResources,\n    group: group\n  }, body) : React.createElement(VerticalResourceIterator, {\n    nested: true,\n    resources: propResources,\n    group: group\n  }, body), items.filter(function (item) {\n    return item.order === null || item.order < itemsPerSlot;\n  }).sort(orderSort).map(function (item) {\n    return React.createElement(EditItem, __assign({\n      item: props.item,\n      viewItem: props.viewItem,\n      form: props.form,\n      key: item.isRecurring ? item.uid + \":\" + item.group.index + \":\" + item.range.index + \":\" + item.originalStart : item.uid + \":\" + item.group.index + \":\" + item.range.index\n    }, item, {\n      onDataAction: props.onDataAction,\n      style: {\n        transform: 'translateY(30px)'\n      },\n      vertical: false,\n      editable: props.editable,\n      ignoreIsAllDay: true\n    }));\n  })));\n};\n\nvar monthViewDateRange = function (_a) {\n  var intl = _a.intl,\n      date = _a.date,\n      timezone = _a.timezone; // The DateRange start from the first day of the week containing the first day of the month.\n  // I know it sounds strange, but take a look and a wall-calendar!\n\n  var firstDay = firstDayInWeek(firstDayOfMonth(getDate(date)), intl.firstDay());\n  var lastDay = addDays(firstDayInWeek(lastDayOfMonth(getDate(date)), intl.firstDay()), DAYS_IN_WEEK_COUNT);\n  var zonedStart = ZonedDate.fromUTCDate(toUTCDateTime(firstDay), timezone);\n  var zonedEnd = ZonedDate.fromUTCDate(toUTCDateTime(lastDay), timezone);\n  var start = new Date(zonedStart.getTime());\n  var end = new Date(zonedEnd.getTime());\n  return {\n    start: start,\n    end: end,\n    zonedStart: zonedStart,\n    zonedEnd: zonedEnd\n  };\n};\n\nvar defaultProps = {\n  name: 'month',\n  dateRange: monthViewDateRange,\n  slotDuration: 24 * 60,\n  slotDivision: 1,\n  itemsPerSlot: 2,\n  numberOfDays: 31,\n  title: function (localization) {\n    return localization.toLanguageString(monthViewTitle, messages[monthViewTitle]);\n  },\n  selectedDateFormat: '{0:Y}',\n  selectedShortDateFormat: '{0:Y}'\n};\nvar propTypes = {\n  itemsPerSlot: PropTypes.number\n};\nMonthView.defaultProps = defaultProps;\nMonthView.propTypes = propTypes;\nMonthView.displayName = 'KendoReactSchedulerMonthView';","map":{"version":3,"sources":["/home/asmith/taller/proyecto1/proyecto-taller/client/node_modules/@progress/kendo-react-scheduler/dist/es/views/month/MonthView.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","PropTypes","BaseView","MS_PER_DAY","firstDayInWeek","firstDayOfMonth","getDate","addDays","lastDayOfMonth","ZonedDate","classNames","VerticalResourceIterator","HorizontalResourceIterator","mapItemsToSlots","mapSlotsToItems","toUTCDateTime","orderSort","monthViewTitle","messages","SchedulerEditSlot","useInternationalization","DAYS_IN_WEEK_COUNT","toRanges","toSlots","toOccurrences","toItems","ShowMoreItemsButton","SchedulerEditItem","useSchedulerPropsContext","useSchedulerDataContext","useSchedulerDateContext","useSchedulerViewsContext","useSchedulerGroupsContext","useSchedulerOrientationContext","useSchedulerDateRangeContext","useSchedulerFieldsContext","useSchedulerActiveViewContext","SchedulerResourceIteratorContext","DateHeaderCell","DAY_FORMAT","skeleton","MonthView","props","_a","group","timezone","propResources","resources","EditItem","editItem","EditSlot","editSlot","data","_b","setDate","_c","setView","views","groups","orientation","dateRange","intl","fields","itemsPerSlot","defaultProps","ranges","useMemo","step","start","getTime","end","slots","occurrences","items","handleShowMoreItemsClick","useCallback","event","newView","find","vw","name","target","slot","head","createElement","Consumer","groupIndex","className","key","filter","index","range","map","slotIndex","as","dateHeaderCell","date","fromLocalDate","Date","zonedEnd","zonedStart","format","body","_","rangeIndex","filtered","viewSlot","form","expandable","offsetTop","offsetBottom","onDataAction","col","row","editable","formatDate","onClick","nested","item","order","sort","viewItem","isRecurring","uid","originalStart","style","transform","vertical","ignoreIsAllDay","monthViewDateRange","firstDay","lastDay","fromUTCDate","slotDuration","slotDivision","numberOfDays","title","localization","toLanguageString","selectedDateFormat","selectedShortDateFormat","propTypes","number","displayName"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { BaseView } from '../../components/BaseView';\nimport { MS_PER_DAY, firstDayInWeek, firstDayOfMonth, getDate, addDays, lastDayOfMonth, ZonedDate } from '@progress/kendo-date-math';\nimport { classNames } from '@progress/kendo-react-common';\nimport { VerticalResourceIterator } from '../common/VerticalResourceIterator';\nimport { HorizontalResourceIterator } from '../common/HorizontalResourceIterator';\nimport { mapItemsToSlots, mapSlotsToItems, toUTCDateTime, orderSort } from '../../utils';\nimport { monthViewTitle, messages } from '../../messages';\nimport { SchedulerEditSlot } from '../../slots/SchedulerEditSlot';\nimport { useInternationalization } from '@progress/kendo-react-intl';\nimport { DAYS_IN_WEEK_COUNT } from '../../constants';\nimport { toRanges } from '../../services/rangeService';\nimport { toSlots } from '../../services/slotsService';\nimport { toOccurrences } from '../../services/occurrenceService';\nimport { toItems } from '../../services/itemsService';\nimport { ShowMoreItemsButton } from '../../components/ShowMoreItemsButton';\nimport { SchedulerEditItem } from '../../items/SchedulerEditItem';\nimport { useSchedulerPropsContext, useSchedulerDataContext, useSchedulerDateContext, useSchedulerViewsContext, useSchedulerGroupsContext, useSchedulerOrientationContext, useSchedulerDateRangeContext, useSchedulerFieldsContext, useSchedulerActiveViewContext } from '../../context/SchedulerContext';\nimport { SchedulerResourceIteratorContext } from '../../context/SchedulerResourceIteratorContext';\nimport { DateHeaderCell } from '../../components/DateHeaderCell';\nvar DAY_FORMAT = { skeleton: 'dd' };\n/**\n * Represents the KendoReact [MonthView]({% slug month_view_scheduler %}) Component.\n */\nexport var MonthView = function (props) {\n    var _a = useSchedulerPropsContext(), group = _a.group, timezone = _a.timezone, propResources = _a.resources;\n    var EditItem = props.editItem || SchedulerEditItem;\n    var EditSlot = props.editSlot || SchedulerEditSlot;\n    var data = useSchedulerDataContext()[0];\n    var _b = useSchedulerDateContext(), setDate = _b[1];\n    var _c = useSchedulerActiveViewContext(), setView = _c[1];\n    var views = useSchedulerViewsContext();\n    var groups = useSchedulerGroupsContext();\n    var orientation = useSchedulerOrientationContext();\n    var dateRange = useSchedulerDateRangeContext();\n    var intl = useInternationalization();\n    var fields = useSchedulerFieldsContext();\n    var itemsPerSlot = props.itemsPerSlot || defaultProps.itemsPerSlot;\n    var ranges = React.useMemo(function () { return toRanges(dateRange, { step: (MS_PER_DAY * DAYS_IN_WEEK_COUNT), timezone: timezone }); }, [dateRange.start.getTime(), dateRange.end.getTime(), timezone]);\n    var slots = React.useMemo(function () { return toSlots(dateRange, { step: MS_PER_DAY }, { groups: groups, ranges: ranges }); }, [\n        dateRange.start.getTime(),\n        dateRange.end.getTime(),\n        groups,\n        ranges\n    ]);\n    var occurrences = React.useMemo(function () { return toOccurrences(data, { dateRange: dateRange, fields: fields, timezone: timezone }); }, [data, dateRange.start.getTime(), dateRange.end.getTime(), fields, timezone]);\n    var items = React.useMemo(function () { return toItems(occurrences, { timezone: timezone }, { groups: groups, ranges: ranges }); }, [occurrences, timezone, groups, ranges]);\n    var handleShowMoreItemsClick = React.useCallback(function (event) {\n        var newView = views.find(function (vw) { return vw.props.name === 'day'; });\n        if (!setView || !newView || !newView.props.name || !event.target.slot) {\n            return;\n        }\n        setView(newView.props.name, event);\n        setDate(event.target.slot.start, event);\n    }, [\n        setView,\n        views\n    ]);\n    React.useMemo(function () { return mapItemsToSlots(items, slots, true); }, [items, slots]);\n    React.useMemo(function () { return mapSlotsToItems(items, slots, true); }, [items, slots]);\n    var head = (React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n        var groupIndex = _a.groupIndex;\n        return (React.createElement(\"div\", { className: \"k-scheduler-row\", key: groupIndex }, slots\n            .filter(function (slot) { return slot.group.index === groupIndex && slot.range.index === 0; })\n            .map(function (slot, slotIndex) { return (React.createElement(DateHeaderCell, { as: props.dateHeaderCell, key: slotIndex, \"data-dayslot-index\": slotIndex, date: ZonedDate.fromLocalDate(new Date(slot.zonedEnd.getTime() - ((slot.zonedEnd.getTime() - slot.zonedStart.getTime()) / 2)), timezone), start: slot.start, end: slot.end, format: { skeleton: 'EEEE' } })); })));\n    }));\n    var body = (React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n        var groupIndex = _a.groupIndex;\n        return (ranges.map(function (_, rangeIndex) { return (React.createElement(\"div\", { className: \"k-scheduler-row\", key: rangeIndex }, slots\n            .filter(function (slot) { return slot.group.index === groupIndex && slot.range.index === rangeIndex; })\n            .map(function (slot, slotIndex, filtered) { return (React.createElement(EditSlot, __assign({ slot: props.slot, viewSlot: props.viewSlot, key: slotIndex, form: props.form }, slot, { expandable: { offsetTop: 30, offsetBottom: (itemsPerSlot < slot.items.length) ? 15 : 0 }, onDataAction: props.onDataAction, col: orientation === 'horizontal'\n                ? ((filtered.length * (groupIndex || 0)) + slotIndex)\n                : slotIndex, row: orientation === 'horizontal'\n                ? rangeIndex\n                : ((ranges.length * (groupIndex || 0)) + rangeIndex), editable: props.editable }),\n            React.createElement(\"span\", { className: \"k-link k-nav-day\" }, intl.formatDate(new Date(slot.end.getTime() - ((slot.end.getTime() - slot.start.getTime()) / 2)), DAY_FORMAT)),\n            (itemsPerSlot < slot.items.length) && (React.createElement(ShowMoreItemsButton, { slot: slot, onClick: handleShowMoreItemsClick })))); }))); }));\n    }));\n    return (React.createElement(BaseView, { props: props, slots: slots, ranges: ranges, className: classNames('k-scheduler-monthview', props.className) },\n        React.createElement(\"div\", { className: \"k-scheduler-head\" }, orientation === 'horizontal'\n            ? React.createElement(HorizontalResourceIterator, { nested: true, resources: propResources, group: group }, head)\n            : React.createElement(VerticalResourceIterator, { resources: propResources, group: group }, head)),\n        React.createElement(\"div\", { className: \"k-scheduler-body\" },\n            orientation === 'horizontal'\n                ? React.createElement(HorizontalResourceIterator, { resources: propResources, group: group }, body)\n                : React.createElement(VerticalResourceIterator, { nested: true, resources: propResources, group: group }, body),\n            items\n                .filter(function (item) { return item.order === null || item.order < itemsPerSlot; })\n                .sort(orderSort)\n                .map(function (item) { return (React.createElement(EditItem, __assign({ item: props.item, viewItem: props.viewItem, form: props.form, key: item.isRecurring\n                    ? item.uid + \":\" + item.group.index + \":\" + item.range.index + \":\" + item.originalStart\n                    : item.uid + \":\" + item.group.index + \":\" + item.range.index }, item, { onDataAction: props.onDataAction, style: { transform: 'translateY(30px)' }, vertical: false, editable: props.editable, ignoreIsAllDay: true }))); }))));\n};\nvar monthViewDateRange = function (_a) {\n    var intl = _a.intl, date = _a.date, timezone = _a.timezone;\n    // The DateRange start from the first day of the week containing the first day of the month.\n    // I know it sounds strange, but take a look and a wall-calendar!\n    var firstDay = firstDayInWeek(firstDayOfMonth(getDate(date)), intl.firstDay());\n    var lastDay = addDays(firstDayInWeek(lastDayOfMonth(getDate(date)), intl.firstDay()), DAYS_IN_WEEK_COUNT);\n    var zonedStart = ZonedDate.fromUTCDate(toUTCDateTime(firstDay), timezone);\n    var zonedEnd = ZonedDate.fromUTCDate(toUTCDateTime(lastDay), timezone);\n    var start = new Date(zonedStart.getTime());\n    var end = new Date(zonedEnd.getTime());\n    return {\n        start: start,\n        end: end,\n        zonedStart: zonedStart,\n        zonedEnd: zonedEnd\n    };\n};\nvar defaultProps = {\n    name: 'month',\n    dateRange: monthViewDateRange,\n    slotDuration: 24 * 60,\n    slotDivision: 1,\n    itemsPerSlot: 2,\n    numberOfDays: 31,\n    title: function (localization) { return localization.toLanguageString(monthViewTitle, messages[monthViewTitle]); },\n    selectedDateFormat: '{0:Y}',\n    selectedShortDateFormat: '{0:Y}'\n};\nvar propTypes = {\n    itemsPerSlot: PropTypes.number\n};\nMonthView.defaultProps = defaultProps;\nMonthView.propTypes = propTypes;\nMonthView.displayName = 'KendoReactSchedulerMonthView';\n"]},"metadata":{},"sourceType":"module"}