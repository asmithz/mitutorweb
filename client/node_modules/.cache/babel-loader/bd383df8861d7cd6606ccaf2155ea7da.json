{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport VirtualScroll from './VirtualScroll';\nimport { Navigation } from './Navigation';\nimport { scrollToItem, areSame } from './utils';\nimport { guid } from '@progress/kendo-react-common';\n/**\n * @hidden\n */\n\nvar DropDownBase =\n/** @class */\nfunction () {\n  function DropDownBase(component) {\n    var _this = this;\n\n    this.vs = new VirtualScroll();\n    this.navigation = new Navigation();\n\n    this.handleItemClick = function (index, event) {\n      var state = _this.initState();\n\n      state.syntheticEvent = event;\n\n      _this.component.handleItemSelect(index, state);\n\n      _this.togglePopup(state);\n\n      _this.applyState(state);\n    };\n\n    this.handleFocus = function (event) {\n      if (!_this.component.state.focused) {\n        var state = _this.initState();\n\n        state.data.focused = true;\n        state.events.push({\n          type: 'onFocus'\n        });\n        state.syntheticEvent = event;\n\n        _this.applyState(state);\n      }\n    };\n\n    this.filterChanged = function (text, state) {\n      var _a = _this.component.props,\n          textField = _a.textField,\n          filterable = _a.filterable;\n\n      if (filterable) {\n        state.events.push({\n          type: 'onFilterChange',\n          filter: {\n            field: textField,\n            operator: 'contains',\n            ignoreCase: true,\n            value: text\n          }\n        });\n      }\n    };\n\n    this.togglePopup = function (state) {\n      var props = _this.component.props;\n      var opened = props.opened !== undefined ? props.opened : _this.component.state.opened;\n\n      if (props.opened === undefined) {\n        state.data.opened = !opened;\n      }\n\n      if (opened) {\n        state.events.push({\n          type: 'onClose'\n        });\n      } else {\n        state.events.push({\n          type: 'onOpen'\n        });\n\n        _this.calculatePopupWidth();\n      }\n    };\n\n    this.pageChange = function (page, syntheticEvent) {\n      var state = _this.initState();\n\n      state.syntheticEvent = syntheticEvent;\n\n      _this.triggerOnPageChange(state, page.skip, page.take);\n\n      _this.applyState(state);\n    };\n\n    this.scrollToVirtualItem = function (virtual, selectedItemIndex) {\n      var vs = _this.vs;\n      vs.enabled = false;\n\n      if (virtual.skip === 0) {\n        vs.reset();\n      } else if (virtual.skip + virtual.pageSize === virtual.total) {\n        vs.scrollToEnd();\n      } else {\n        var scrollTop = vs.translate;\n\n        if (scrollTop === 0) {\n          vs.calcScrollElementHeight();\n          scrollTop = vs.itemHeight * virtual.skip;\n          vs.translateTo(scrollTop - vs.itemHeight);\n        }\n\n        if (vs.container) {\n          vs.container.scrollTop = scrollTop;\n        }\n\n        _this.scrollToItem(selectedItemIndex, true);\n      }\n\n      window.setTimeout(function () {\n        return vs.enabled = true;\n      }, 10);\n    }; // Common rendering\n\n\n    this.renderScrollWrapper = function (children, onScroll) {\n      var popupSettings = _this.getPopupSettings();\n\n      var vs = _this.vs;\n      return vs.enabled ? React.createElement(\"div\", {\n        onScroll: function (e) {\n          vs.scrollHandler(e);\n\n          if (onScroll) {\n            onScroll.call(undefined, e);\n          }\n        },\n        ref: vs.scrollerRef,\n        style: {\n          height: popupSettings.height,\n          overflowY: 'scroll'\n        }\n      }, children) : children;\n    };\n\n    this.renderScrollElement = function () {\n      var vs = _this.vs;\n      return vs.enabled && React.createElement(\"div\", {\n        ref: function (element) {\n          return vs.scrollElement = element;\n        },\n        key: 'scrollElementKey'\n      });\n    };\n\n    this.listBoxId = guid();\n    this.guid = guid();\n    this.component = component;\n    this.vs.PageChange = this.pageChange;\n  }\n\n  DropDownBase.prototype.didMount = function () {\n    var props = this.component.props;\n    var popupSettings = props.popupSettings || {};\n    var style = props.style || {};\n    var popupWidth = popupSettings.width;\n    var shouldUpdate = props.opened === true;\n\n    if (popupWidth === undefined) {\n      this.calculatePopupWidth();\n    }\n\n    if (props.dir === undefined && style.direction === undefined) {\n      this.calculateDir();\n      shouldUpdate = true;\n    }\n\n    if (shouldUpdate) {\n      this.component.forceUpdate();\n    }\n  };\n\n  DropDownBase.prototype.calculateDir = function () {\n    var element = this.component.element;\n\n    if (element && element.ownerDocument && element.ownerDocument.defaultView) {\n      this.dirCalculated = element.ownerDocument.defaultView.getComputedStyle(element).direction || undefined;\n    }\n  };\n\n  DropDownBase.prototype.calculatePopupWidth = function () {\n    if (this.wrapper) {\n      this.popupWidth = this.wrapper.offsetWidth + 'px';\n    }\n  };\n\n  DropDownBase.prototype.scrollToItem = function (itemIndex, vsEnabled) {\n    var list = this.list || this.vs.list;\n\n    if (list && itemIndex >= 0) {\n      var vs = this.vs;\n      var scrollElement = vs.container || list.parentNode;\n      var virtualScroll = vsEnabled !== undefined ? vsEnabled : vs.enabled;\n      scrollToItem(scrollElement, list, itemIndex, vs.translate, virtualScroll);\n    }\n  };\n\n  DropDownBase.prototype.initState = function () {\n    var state = {\n      data: {},\n      events: [],\n      syntheticEvent: undefined\n    };\n    return state;\n  };\n\n  DropDownBase.prototype.applyState = function (state) {\n    var _this = this;\n\n    if (Object.keys(state.data).length > 0) {\n      this.component.setState(state.data);\n    }\n\n    var eventArgs = {\n      syntheticEvent: state.syntheticEvent,\n      nativeEvent: state.syntheticEvent ? state.syntheticEvent.nativeEvent : undefined,\n      target: this.component,\n      value: this.component.value\n    };\n    state.events.forEach(function (eventData) {\n      var type = eventData.type;\n      delete eventData.type;\n      var handler = type && _this.component.props[type];\n\n      if (handler) {\n        handler.call(undefined, __assign({}, eventArgs, eventData));\n      }\n    });\n  };\n\n  DropDownBase.prototype.triggerOnPageChange = function (state, skip, take) {\n    var virtual = this.component.props.virtual;\n\n    if (virtual) {\n      var newSkip = Math.min(Math.max(0, skip), Math.max(0, virtual.total - take));\n\n      if (newSkip !== virtual.skip) {\n        state.events.push({\n          type: 'onPageChange',\n          page: {\n            skip: newSkip,\n            take: take\n          }\n        });\n      }\n    }\n  };\n\n  DropDownBase.prototype.triggerPageChangeCornerItems = function (item, state) {\n    var props = this.component.props;\n    var _a = props.data,\n        data = _a === void 0 ? [] : _a,\n        dataItemKey = props.dataItemKey,\n        virtual = props.virtual;\n    var opened = props.opened !== undefined ? props.opened : this.component.state.opened;\n\n    if (item && virtual && this.vs.enabled) {\n      if (virtual.skip > 0 && areSame(item, data[0], dataItemKey)) {\n        this.triggerOnPageChange(state, virtual.skip - 1, virtual.pageSize);\n      } else if (!opened && virtual.skip + virtual.pageSize < virtual.total && areSame(item, data[data.length - 1], dataItemKey)) {\n        this.triggerOnPageChange(state, virtual.skip + 1, virtual.pageSize);\n      }\n    }\n  };\n\n  DropDownBase.prototype.getPopupSettings = function () {\n    return Object.assign({}, DropDownBase.defaultProps.popupSettings, this.component.props.popupSettings);\n  };\n\n  DropDownBase.basicPropTypes = {\n    opened: PropTypes.bool,\n    disabled: PropTypes.bool,\n    dir: PropTypes.string,\n    tabIndex: PropTypes.number,\n    accessKey: PropTypes.string,\n    data: PropTypes.array,\n    textField: PropTypes.string,\n    className: PropTypes.string,\n    label: PropTypes.string,\n    loading: PropTypes.bool,\n    popupSettings: PropTypes.shape({\n      animate: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n        openDuration: PropTypes.number,\n        closeDuration: PropTypes.number\n      })]),\n      popupClass: PropTypes.string,\n      className: PropTypes.string,\n      appendTo: PropTypes.any,\n      width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n      height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    }),\n    onOpen: PropTypes.func,\n    onClose: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onChange: PropTypes.func,\n    itemRender: PropTypes.func,\n    listNoDataRender: PropTypes.func,\n    focusedItemIndex: PropTypes.func,\n    header: PropTypes.node,\n    footer: PropTypes.node\n  };\n  DropDownBase.propTypes = __assign({}, DropDownBase.basicPropTypes, {\n    value: PropTypes.any,\n    defaultValue: PropTypes.any,\n    filterable: PropTypes.bool,\n    filter: PropTypes.string,\n    virtual: PropTypes.shape({\n      pageSize: PropTypes.number.isRequired,\n      skip: PropTypes.number.isRequired,\n      total: PropTypes.number.isRequired\n    }),\n    onFilterChange: PropTypes.func,\n    onPageChange: PropTypes.func\n  });\n  DropDownBase.defaultProps = {\n    popupSettings: {\n      height: '200px'\n    },\n    required: false,\n    validityStyles: true\n  };\n  return DropDownBase;\n}();\n\nexport default DropDownBase;","map":{"version":3,"sources":["/home/asmith/taller/proyecto1/proyecto-taller/client/node_modules/@progress/kendo-react-dropdowns/dist/es/common/DropDownBase.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","PropTypes","VirtualScroll","Navigation","scrollToItem","areSame","guid","DropDownBase","component","_this","vs","navigation","handleItemClick","index","event","state","initState","syntheticEvent","handleItemSelect","togglePopup","applyState","handleFocus","focused","data","events","push","type","filterChanged","text","_a","props","textField","filterable","filter","field","operator","ignoreCase","value","opened","undefined","calculatePopupWidth","pageChange","page","triggerOnPageChange","skip","take","scrollToVirtualItem","virtual","selectedItemIndex","enabled","reset","pageSize","total","scrollToEnd","scrollTop","translate","calcScrollElementHeight","itemHeight","translateTo","container","window","setTimeout","renderScrollWrapper","children","onScroll","popupSettings","getPopupSettings","createElement","e","scrollHandler","ref","scrollerRef","style","height","overflowY","renderScrollElement","element","scrollElement","key","listBoxId","PageChange","didMount","popupWidth","width","shouldUpdate","dir","direction","calculateDir","forceUpdate","ownerDocument","defaultView","dirCalculated","getComputedStyle","wrapper","offsetWidth","itemIndex","vsEnabled","list","parentNode","virtualScroll","keys","setState","eventArgs","nativeEvent","target","forEach","eventData","handler","newSkip","Math","min","max","triggerPageChangeCornerItems","item","dataItemKey","defaultProps","basicPropTypes","bool","disabled","string","tabIndex","number","accessKey","array","className","label","loading","shape","animate","oneOfType","openDuration","closeDuration","popupClass","appendTo","any","onOpen","func","onClose","onFocus","onBlur","onChange","itemRender","listNoDataRender","focusedItemIndex","header","node","footer","propTypes","defaultValue","isRequired","onFilterChange","onPageChange","required","validityStyles"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport VirtualScroll from './VirtualScroll';\nimport { Navigation } from './Navigation';\nimport { scrollToItem, areSame } from './utils';\nimport { guid } from '@progress/kendo-react-common';\n/**\n * @hidden\n */\nvar DropDownBase = /** @class */ (function () {\n    function DropDownBase(component) {\n        var _this = this;\n        this.vs = new VirtualScroll();\n        this.navigation = new Navigation();\n        this.handleItemClick = function (index, event) {\n            var state = _this.initState();\n            state.syntheticEvent = event;\n            _this.component.handleItemSelect(index, state);\n            _this.togglePopup(state);\n            _this.applyState(state);\n        };\n        this.handleFocus = function (event) {\n            if (!_this.component.state.focused) {\n                var state = _this.initState();\n                state.data.focused = true;\n                state.events.push({ type: 'onFocus' });\n                state.syntheticEvent = event;\n                _this.applyState(state);\n            }\n        };\n        this.filterChanged = function (text, state) {\n            var _a = _this.component.props, textField = _a.textField, filterable = _a.filterable;\n            if (filterable) {\n                state.events.push({\n                    type: 'onFilterChange',\n                    filter: {\n                        field: textField,\n                        operator: 'contains',\n                        ignoreCase: true,\n                        value: text\n                    }\n                });\n            }\n        };\n        this.togglePopup = function (state) {\n            var props = _this.component.props;\n            var opened = props.opened !== undefined ? props.opened : _this.component.state.opened;\n            if (props.opened === undefined) {\n                state.data.opened = !opened;\n            }\n            if (opened) {\n                state.events.push({ type: 'onClose' });\n            }\n            else {\n                state.events.push({ type: 'onOpen' });\n                _this.calculatePopupWidth();\n            }\n        };\n        this.pageChange = function (page, syntheticEvent) {\n            var state = _this.initState();\n            state.syntheticEvent = syntheticEvent;\n            _this.triggerOnPageChange(state, page.skip, page.take);\n            _this.applyState(state);\n        };\n        this.scrollToVirtualItem = function (virtual, selectedItemIndex) {\n            var vs = _this.vs;\n            vs.enabled = false;\n            if (virtual.skip === 0) {\n                vs.reset();\n            }\n            else if (virtual.skip + virtual.pageSize === virtual.total) {\n                vs.scrollToEnd();\n            }\n            else {\n                var scrollTop = vs.translate;\n                if (scrollTop === 0) {\n                    vs.calcScrollElementHeight();\n                    scrollTop = (vs.itemHeight * virtual.skip);\n                    vs.translateTo(scrollTop - vs.itemHeight);\n                }\n                if (vs.container) {\n                    vs.container.scrollTop = scrollTop;\n                }\n                _this.scrollToItem(selectedItemIndex, true);\n            }\n            window.setTimeout(function () { return vs.enabled = true; }, 10);\n        };\n        // Common rendering\n        this.renderScrollWrapper = function (children, onScroll) {\n            var popupSettings = _this.getPopupSettings();\n            var vs = _this.vs;\n            return vs.enabled ? (React.createElement(\"div\", { onScroll: function (e) {\n                    vs.scrollHandler(e);\n                    if (onScroll) {\n                        onScroll.call(undefined, e);\n                    }\n                }, ref: vs.scrollerRef, style: {\n                    height: popupSettings.height,\n                    overflowY: 'scroll'\n                } }, children)) :\n                (children);\n        };\n        this.renderScrollElement = function () {\n            var vs = _this.vs;\n            return vs.enabled && (React.createElement(\"div\", { ref: function (element) { return vs.scrollElement = element; }, key: 'scrollElementKey' }));\n        };\n        this.listBoxId = guid();\n        this.guid = guid();\n        this.component = component;\n        this.vs.PageChange = this.pageChange;\n    }\n    DropDownBase.prototype.didMount = function () {\n        var props = this.component.props;\n        var popupSettings = props.popupSettings || {};\n        var style = props.style || {};\n        var popupWidth = popupSettings.width;\n        var shouldUpdate = props.opened === true;\n        if (popupWidth === undefined) {\n            this.calculatePopupWidth();\n        }\n        if (props.dir === undefined && style.direction === undefined) {\n            this.calculateDir();\n            shouldUpdate = true;\n        }\n        if (shouldUpdate) {\n            this.component.forceUpdate();\n        }\n    };\n    DropDownBase.prototype.calculateDir = function () {\n        var element = this.component.element;\n        if (element && element.ownerDocument && element.ownerDocument.defaultView) {\n            this.dirCalculated = element.ownerDocument.defaultView.getComputedStyle(element).direction || undefined;\n        }\n    };\n    DropDownBase.prototype.calculatePopupWidth = function () {\n        if (this.wrapper) {\n            this.popupWidth = this.wrapper.offsetWidth + 'px';\n        }\n    };\n    DropDownBase.prototype.scrollToItem = function (itemIndex, vsEnabled) {\n        var list = this.list || this.vs.list;\n        if (list && itemIndex >= 0) {\n            var vs = this.vs;\n            var scrollElement = (vs.container || list.parentNode);\n            var virtualScroll = vsEnabled !== undefined ? vsEnabled : vs.enabled;\n            scrollToItem(scrollElement, list, itemIndex, vs.translate, virtualScroll);\n        }\n    };\n    DropDownBase.prototype.initState = function () {\n        var state = {\n            data: {},\n            events: [],\n            syntheticEvent: undefined\n        };\n        return state;\n    };\n    DropDownBase.prototype.applyState = function (state) {\n        var _this = this;\n        if (Object.keys(state.data).length > 0) {\n            this.component.setState(state.data);\n        }\n        var eventArgs = {\n            syntheticEvent: state.syntheticEvent,\n            nativeEvent: state.syntheticEvent ? state.syntheticEvent.nativeEvent : undefined,\n            target: this.component,\n            value: this.component.value\n        };\n        state.events.forEach(function (eventData) {\n            var type = eventData.type;\n            delete eventData.type;\n            var handler = type && _this.component.props[type];\n            if (handler) {\n                handler.call(undefined, __assign({}, eventArgs, eventData));\n            }\n        });\n    };\n    DropDownBase.prototype.triggerOnPageChange = function (state, skip, take) {\n        var virtual = this.component.props.virtual;\n        if (virtual) {\n            var newSkip = Math.min(Math.max(0, skip), Math.max(0, virtual.total - take));\n            if (newSkip !== virtual.skip) {\n                state.events.push({\n                    type: 'onPageChange',\n                    page: { skip: newSkip, take: take }\n                });\n            }\n        }\n    };\n    DropDownBase.prototype.triggerPageChangeCornerItems = function (item, state) {\n        var props = this.component.props;\n        var _a = props.data, data = _a === void 0 ? [] : _a, dataItemKey = props.dataItemKey, virtual = props.virtual;\n        var opened = props.opened !== undefined ? props.opened : this.component.state.opened;\n        if (item && virtual && this.vs.enabled) {\n            if (virtual.skip > 0 && areSame(item, data[0], dataItemKey)) {\n                this.triggerOnPageChange(state, virtual.skip - 1, virtual.pageSize);\n            }\n            else if (!opened && virtual.skip + virtual.pageSize < virtual.total &&\n                areSame(item, data[data.length - 1], dataItemKey)) {\n                this.triggerOnPageChange(state, virtual.skip + 1, virtual.pageSize);\n            }\n        }\n    };\n    DropDownBase.prototype.getPopupSettings = function () {\n        return Object\n            .assign({}, DropDownBase.defaultProps.popupSettings, this.component.props.popupSettings);\n    };\n    DropDownBase.basicPropTypes = {\n        opened: PropTypes.bool,\n        disabled: PropTypes.bool,\n        dir: PropTypes.string,\n        tabIndex: PropTypes.number,\n        accessKey: PropTypes.string,\n        data: PropTypes.array,\n        textField: PropTypes.string,\n        className: PropTypes.string,\n        label: PropTypes.string,\n        loading: PropTypes.bool,\n        popupSettings: PropTypes.shape({\n            animate: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n                    openDuration: PropTypes.number,\n                    closeDuration: PropTypes.number\n                })]),\n            popupClass: PropTypes.string,\n            className: PropTypes.string,\n            appendTo: PropTypes.any,\n            width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n            height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n        }),\n        onOpen: PropTypes.func,\n        onClose: PropTypes.func,\n        onFocus: PropTypes.func,\n        onBlur: PropTypes.func,\n        onChange: PropTypes.func,\n        itemRender: PropTypes.func,\n        listNoDataRender: PropTypes.func,\n        focusedItemIndex: PropTypes.func,\n        header: PropTypes.node,\n        footer: PropTypes.node\n    };\n    DropDownBase.propTypes = __assign({}, DropDownBase.basicPropTypes, { value: PropTypes.any, defaultValue: PropTypes.any, filterable: PropTypes.bool, filter: PropTypes.string, virtual: PropTypes.shape({\n            pageSize: PropTypes.number.isRequired,\n            skip: PropTypes.number.isRequired,\n            total: PropTypes.number.isRequired\n        }), onFilterChange: PropTypes.func, onPageChange: PropTypes.func });\n    DropDownBase.defaultProps = {\n        popupSettings: {\n            height: '200px'\n        },\n        required: false,\n        validityStyles: true\n    };\n    return DropDownBase;\n}());\nexport default DropDownBase;\n"]},"metadata":{},"sourceType":"module"}