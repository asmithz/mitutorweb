{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { BaseView } from '../../components/BaseView';\nimport { VerticalResourceIterator } from '../common/VerticalResourceIterator';\nimport { messages, dateTitle, timeTitle, eventTitle, noEvents, agendaViewTitle, allDay } from '../../messages';\nimport { useCellSync } from '../../hooks';\nimport { DAYS_IN_WEEK_COUNT } from '../../constants';\nimport { MS_PER_DAY, getDate, addDays, firstDayInWeek, ZonedDate } from '@progress/kendo-date-math';\nimport { classNames } from '@progress/kendo-react-common';\nimport { useLocalization, useInternationalization } from '@progress/kendo-react-intl';\nimport { toRanges } from '../../services/rangeService';\nimport { toOccurrences } from '../../services/occurrenceService';\nimport { toItems } from '../../services/itemsService';\nimport { toUTCDateTime, mapItemsToSlots, mapSlotsToItems } from '../../utils';\nimport { toSlots } from '../../services';\nimport { SchedulerEditTask } from '../../tasks/SchedulerEditTask';\nimport { SchedulerEditSlot } from '../../slots/SchedulerEditSlot';\nimport { useSchedulerPropsContext, useSchedulerDataContext, useSchedulerGroupsContext, useSchedulerFieldsContext, useSchedulerDateRangeContext } from '../../context/SchedulerContext';\nimport { SchedulerResourceIteratorContext } from '../../context/SchedulerResourceIteratorContext';\n/**\n * Represents the KendoReact [AgendaView]({% slug agenda_view_scheduler %}) Component.\n */\n\nexport var AgendaView = function (props) {\n  var _a = useSchedulerPropsContext(),\n      group = _a.group,\n      timezone = _a.timezone,\n      propResources = _a.resources;\n\n  var EditTask = props.editTask || SchedulerEditTask;\n  var EditSlot = props.editSlot || SchedulerEditSlot;\n  var element = React.useRef(null);\n  var intl = useInternationalization();\n  var localization = useLocalization();\n  var data = useSchedulerDataContext()[0];\n  var groups = useSchedulerGroupsContext();\n  var fields = useSchedulerFieldsContext();\n  var dateRange = useSchedulerDateRangeContext();\n  var ranges = React.useMemo(function () {\n    return toRanges(dateRange, {\n      step: MS_PER_DAY,\n      timezone: timezone\n    });\n  }, [dateRange.start.getTime(), dateRange.end.getTime(), timezone]);\n  var slots = React.useMemo(function () {\n    return toSlots(dateRange, {\n      step: MS_PER_DAY\n    }, {\n      groups: groups,\n      ranges: ranges\n    });\n  }, [dateRange.start.getTime(), dateRange.end.getTime(), timezone, groups, ranges]);\n  var occurrences = React.useMemo(function () {\n    return toOccurrences(data, {\n      dateRange: dateRange,\n      fields: fields,\n      timezone: timezone\n    });\n  }, [data, dateRange.start.getTime(), dateRange.end.getTime(), fields, timezone]);\n  var items = React.useMemo(function () {\n    return toItems(occurrences, {\n      timezone: timezone\n    }, {\n      groups: groups,\n      ranges: ranges\n    });\n  }, [occurrences, timezone, groups, ranges]);\n  var className = React.useMemo(function () {\n    return classNames('k-scheduler-agendaview', props.className);\n  }, [props.className]);\n  useCellSync({\n    element: element,\n    selector: '.k-scheduler-datecolumn',\n    explicitDepth: false\n  });\n  useCellSync({\n    element: element,\n    selector: '.k-scheduler-timecolumn',\n    explicitDepth: false\n  });\n  React.useMemo(function () {\n    return mapItemsToSlots(items, slots, true);\n  }, [items, slots]);\n  React.useMemo(function () {\n    return mapSlotsToItems(items, slots, true);\n  }, [items, slots]);\n  return React.createElement(BaseView, {\n    ref: element,\n    id: props.id,\n    style: props.style,\n    className: className,\n    props: props,\n    slots: items,\n    ranges: ranges\n  }, React.createElement(\"div\", {\n    className: \"k-scheduler-head\"\n  }, React.createElement(VerticalResourceIterator, {\n    resources: propResources,\n    group: group\n  }, React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n    var groupIndex = _a.groupIndex;\n    return React.createElement(\"div\", {\n      className: \"k-scheduler-row\",\n      key: groupIndex\n    }, React.createElement(\"div\", {\n      className: \"k-scheduler-cell k-heading-cell k-group-cell k-scheduler-datecolumn\"\n    }, localization.toLanguageString(dateTitle, messages[dateTitle])), React.createElement(\"div\", {\n      className: \"k-scheduler-cell k-heading-cell k-group-cell k-scheduler-timecolumn\"\n    }, localization.toLanguageString(timeTitle, messages[timeTitle])), React.createElement(\"div\", {\n      className: \"k-scheduler-cell k-heading-cell k-scheduler-eventcolumn\"\n    }, localization.toLanguageString(eventTitle, messages[eventTitle])));\n  }))), React.createElement(\"div\", {\n    className: \"k-scheduler-body\"\n  }, React.createElement(VerticalResourceIterator, {\n    resources: propResources,\n    group: group,\n    nested: true\n  }, React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n    var groupIndex = _a.groupIndex;\n    return slots.filter(function (slot) {\n      return slot.group.index === (groupIndex || 0);\n    }).map(function (slot, slotIndex, filtered) {\n      return React.createElement(\"div\", {\n        className: \"k-scheduler-row  k-scheduler-content\",\n        key: groupIndex + \":\" + slotIndex\n      }, React.createElement(EditSlot, __assign({}, slot, {\n        editable: props.editable,\n        row: filtered.length * (groupIndex || 0) + slotIndex,\n        col: 0,\n        slot: props.slot,\n        viewSlot: props.viewSlot,\n        className: \"k-scheduler-datecolumn k-group-cell\"\n      }), React.createElement(\"div\", null, React.createElement(\"strong\", {\n        className: \"k-scheduler-agendaday\"\n      }, intl.formatDate(slot.zonedStart, 'dd')), React.createElement(\"em\", {\n        className: \"k-scheduler-agendaweek\"\n      }, intl.formatDate(slot.zonedStart, 'EEEE')), React.createElement(\"span\", {\n        className: \"k-scheduler-agendadate\"\n      }, intl.formatDate(slot.zonedStart, 'y')))), React.createElement(\"div\", {\n        className: \"k-scheduler-cell k-group-content\"\n      }, slot.items.length ? slot.items.map(function (item, itemIndex) {\n        return React.createElement(\"div\", {\n          className: \"k-scheduler-row\",\n          key: itemIndex\n        }, React.createElement(\"div\", {\n          className: \"k-scheduler-cell k-scheduler-timecolumn\"\n        }, React.createElement(\"div\", null, item.tail && React.createElement(\"span\", {\n          className: \"k-icon k-i-arrow-60-left\"\n        }), item.isAllDay ? localization.toLanguageString(allDay, messages[allDay]) : getTimeFormat(intl, item), item.head && React.createElement(\"span\", {\n          className: \"k-icon k-i-arrow-60-right\"\n        }))), React.createElement(\"div\", {\n          className: \"k-scheduler-cell\"\n        }, React.createElement(EditTask, __assign({\n          key: slotIndex + \":\" + itemIndex\n        }, item, {\n          onDataAction: props.onDataAction,\n          task: props.task,\n          viewTask: props.viewTask,\n          editable: props.editable\n        }))));\n      }) : React.createElement(\"div\", {\n        className: \"k-scheduler-cell k-heading-cell k-group-cell\"\n      }, localization.toLanguageString(noEvents, messages[noEvents]))));\n    });\n  }))));\n};\n\nvar getTimeFormat = function (intl, props) {\n  var format = '{0:t}-{1:t}';\n\n  if (props.head) {\n    format = '{0:t}';\n  } else if (props.tail) {\n    format = '{1:t}';\n  }\n\n  return intl.format(format, props.zonedStart, props.zonedEnd);\n};\n\nvar GET_START_DATE = function (date) {\n  return getDate(date);\n};\n\nvar GET_END_DATE = function (start, numberOfDays) {\n  return getDate(addDays(start, numberOfDays || 1));\n};\n\nvar agendaViewDateRange = function (_a) {\n  var intl = _a.intl,\n      date = _a.date,\n      _b = _a.numberOfDays,\n      numberOfDays = _b === void 0 ? 1 : _b,\n      timezone = _a.timezone;\n  var normalized = ZonedDate.fromLocalDate(date, timezone);\n  var firstDate = numberOfDays === DAYS_IN_WEEK_COUNT ? GET_START_DATE(firstDayInWeek(normalized, intl.firstDay())) : GET_START_DATE(normalized);\n  var lastDate = GET_END_DATE(firstDate, numberOfDays);\n  var zonedStart = ZonedDate.fromUTCDate(toUTCDateTime(firstDate), timezone);\n  var zonedEnd = ZonedDate.fromUTCDate(toUTCDateTime(lastDate), timezone);\n  var start = new Date(zonedStart.getTime());\n  var end = new Date(zonedEnd.getTime());\n  return {\n    start: start,\n    end: end,\n    zonedStart: zonedStart,\n    zonedEnd: zonedEnd\n  };\n};\n\nvar defaultProps = {\n  name: 'agenda',\n  title: function (localization) {\n    return localization.toLanguageString(agendaViewTitle, messages[agendaViewTitle]);\n  },\n  dateRange: agendaViewDateRange,\n  selectedDateFormat: '{0:D} - {1:D}',\n  selectedShortDateFormat: '{0:d} - {1:d}',\n  slotDuration: 60 * 24,\n  slotDivision: 1,\n  step: DAYS_IN_WEEK_COUNT,\n  numberOfDays: DAYS_IN_WEEK_COUNT\n};\nvar propTypes = {\n  title: PropTypes.any\n};\nAgendaView.propTypes = propTypes;\nAgendaView.defaultProps = defaultProps;","map":{"version":3,"sources":["/home/asmith/taller/proyecto1/proyecto-taller/client/node_modules/@progress/kendo-react-scheduler/dist/es/views/agenda/AgendaView.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","PropTypes","BaseView","VerticalResourceIterator","messages","dateTitle","timeTitle","eventTitle","noEvents","agendaViewTitle","allDay","useCellSync","DAYS_IN_WEEK_COUNT","MS_PER_DAY","getDate","addDays","firstDayInWeek","ZonedDate","classNames","useLocalization","useInternationalization","toRanges","toOccurrences","toItems","toUTCDateTime","mapItemsToSlots","mapSlotsToItems","toSlots","SchedulerEditTask","SchedulerEditSlot","useSchedulerPropsContext","useSchedulerDataContext","useSchedulerGroupsContext","useSchedulerFieldsContext","useSchedulerDateRangeContext","SchedulerResourceIteratorContext","AgendaView","props","_a","group","timezone","propResources","resources","EditTask","editTask","EditSlot","editSlot","element","useRef","intl","localization","data","groups","fields","dateRange","ranges","useMemo","step","start","getTime","end","slots","occurrences","items","className","selector","explicitDepth","createElement","ref","id","style","Consumer","groupIndex","key","toLanguageString","nested","filter","slot","index","map","slotIndex","filtered","editable","row","col","viewSlot","formatDate","zonedStart","item","itemIndex","tail","isAllDay","getTimeFormat","head","onDataAction","task","viewTask","format","zonedEnd","GET_START_DATE","date","GET_END_DATE","numberOfDays","agendaViewDateRange","_b","normalized","fromLocalDate","firstDate","firstDay","lastDate","fromUTCDate","Date","defaultProps","name","title","selectedDateFormat","selectedShortDateFormat","slotDuration","slotDivision","propTypes","any"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { BaseView } from '../../components/BaseView';\nimport { VerticalResourceIterator } from '../common/VerticalResourceIterator';\nimport { messages, dateTitle, timeTitle, eventTitle, noEvents, agendaViewTitle, allDay } from '../../messages';\nimport { useCellSync } from '../../hooks';\nimport { DAYS_IN_WEEK_COUNT } from '../../constants';\nimport { MS_PER_DAY, getDate, addDays, firstDayInWeek, ZonedDate } from '@progress/kendo-date-math';\nimport { classNames } from '@progress/kendo-react-common';\nimport { useLocalization, useInternationalization } from '@progress/kendo-react-intl';\nimport { toRanges } from '../../services/rangeService';\nimport { toOccurrences } from '../../services/occurrenceService';\nimport { toItems } from '../../services/itemsService';\nimport { toUTCDateTime, mapItemsToSlots, mapSlotsToItems } from '../../utils';\nimport { toSlots } from '../../services';\nimport { SchedulerEditTask } from '../../tasks/SchedulerEditTask';\nimport { SchedulerEditSlot } from '../../slots/SchedulerEditSlot';\nimport { useSchedulerPropsContext, useSchedulerDataContext, useSchedulerGroupsContext, useSchedulerFieldsContext, useSchedulerDateRangeContext } from '../../context/SchedulerContext';\nimport { SchedulerResourceIteratorContext } from '../../context/SchedulerResourceIteratorContext';\n/**\n * Represents the KendoReact [AgendaView]({% slug agenda_view_scheduler %}) Component.\n */\nexport var AgendaView = function (props) {\n    var _a = useSchedulerPropsContext(), group = _a.group, timezone = _a.timezone, propResources = _a.resources;\n    var EditTask = props.editTask || SchedulerEditTask;\n    var EditSlot = props.editSlot || SchedulerEditSlot;\n    var element = React.useRef(null);\n    var intl = useInternationalization();\n    var localization = useLocalization();\n    var data = useSchedulerDataContext()[0];\n    var groups = useSchedulerGroupsContext();\n    var fields = useSchedulerFieldsContext();\n    var dateRange = useSchedulerDateRangeContext();\n    var ranges = React.useMemo(function () { return toRanges(dateRange, { step: MS_PER_DAY, timezone: timezone }); }, [\n        dateRange.start.getTime(),\n        dateRange.end.getTime(),\n        timezone\n    ]);\n    var slots = React.useMemo(function () { return toSlots(dateRange, { step: MS_PER_DAY }, { groups: groups, ranges: ranges }); }, [\n        dateRange.start.getTime(),\n        dateRange.end.getTime(),\n        timezone,\n        groups,\n        ranges\n    ]);\n    var occurrences = React.useMemo(function () { return toOccurrences(data, { dateRange: dateRange, fields: fields, timezone: timezone }); }, [data, dateRange.start.getTime(), dateRange.end.getTime(), fields, timezone]);\n    var items = React.useMemo(function () { return toItems(occurrences, { timezone: timezone }, { groups: groups, ranges: ranges }); }, [occurrences, timezone, groups, ranges]);\n    var className = React.useMemo(function () { return classNames('k-scheduler-agendaview', props.className); }, [props.className]);\n    useCellSync({ element: element, selector: '.k-scheduler-datecolumn', explicitDepth: false });\n    useCellSync({ element: element, selector: '.k-scheduler-timecolumn', explicitDepth: false });\n    React.useMemo(function () { return mapItemsToSlots(items, slots, true); }, [items, slots]);\n    React.useMemo(function () { return mapSlotsToItems(items, slots, true); }, [items, slots]);\n    return (React.createElement(BaseView, { ref: element, id: props.id, style: props.style, className: className, props: props, slots: items, ranges: ranges },\n        React.createElement(\"div\", { className: \"k-scheduler-head\" },\n            React.createElement(VerticalResourceIterator, { resources: propResources, group: group },\n                React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n                    var groupIndex = _a.groupIndex;\n                    return (React.createElement(\"div\", { className: \"k-scheduler-row\", key: groupIndex },\n                        React.createElement(\"div\", { className: \"k-scheduler-cell k-heading-cell k-group-cell k-scheduler-datecolumn\" }, localization.toLanguageString(dateTitle, messages[dateTitle])),\n                        React.createElement(\"div\", { className: \"k-scheduler-cell k-heading-cell k-group-cell k-scheduler-timecolumn\" }, localization.toLanguageString(timeTitle, messages[timeTitle])),\n                        React.createElement(\"div\", { className: \"k-scheduler-cell k-heading-cell k-scheduler-eventcolumn\" }, localization.toLanguageString(eventTitle, messages[eventTitle]))));\n                }))),\n        React.createElement(\"div\", { className: \"k-scheduler-body\" },\n            React.createElement(VerticalResourceIterator, { resources: propResources, group: group, nested: true },\n                React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n                    var groupIndex = _a.groupIndex;\n                    return slots\n                        .filter(function (slot) { return slot.group.index === (groupIndex || 0); })\n                        .map(function (slot, slotIndex, filtered) {\n                        return (React.createElement(\"div\", { className: \"k-scheduler-row  k-scheduler-content\", key: groupIndex + \":\" + slotIndex },\n                            React.createElement(EditSlot, __assign({}, slot, { editable: props.editable, row: (filtered.length * (groupIndex || 0) + slotIndex), col: 0, slot: props.slot, viewSlot: props.viewSlot, className: \"k-scheduler-datecolumn k-group-cell\" }),\n                                React.createElement(\"div\", null,\n                                    React.createElement(\"strong\", { className: \"k-scheduler-agendaday\" }, intl.formatDate(slot.zonedStart, 'dd')),\n                                    React.createElement(\"em\", { className: \"k-scheduler-agendaweek\" }, intl.formatDate(slot.zonedStart, 'EEEE')),\n                                    React.createElement(\"span\", { className: \"k-scheduler-agendadate\" }, intl.formatDate(slot.zonedStart, 'y')))),\n                            React.createElement(\"div\", { className: \"k-scheduler-cell k-group-content\" }, slot.items.length\n                                ? slot.items.map(function (item, itemIndex) { return (React.createElement(\"div\", { className: \"k-scheduler-row\", key: itemIndex },\n                                    React.createElement(\"div\", { className: \"k-scheduler-cell k-scheduler-timecolumn\" },\n                                        React.createElement(\"div\", null,\n                                            item.tail && React.createElement(\"span\", { className: \"k-icon k-i-arrow-60-left\" }),\n                                            item.isAllDay\n                                                ? localization.toLanguageString(allDay, messages[allDay])\n                                                : getTimeFormat(intl, item),\n                                            item.head && React.createElement(\"span\", { className: \"k-icon k-i-arrow-60-right\" }))),\n                                    React.createElement(\"div\", { className: \"k-scheduler-cell\" },\n                                        React.createElement(EditTask, __assign({ key: slotIndex + \":\" + itemIndex }, item, { onDataAction: props.onDataAction, task: props.task, viewTask: props.viewTask, editable: props.editable }))))); })\n                                : React.createElement(\"div\", { className: \"k-scheduler-cell k-heading-cell k-group-cell\" }, localization.toLanguageString(noEvents, messages[noEvents])))));\n                    });\n                })))));\n};\nvar getTimeFormat = function (intl, props) {\n    var format = '{0:t}-{1:t}';\n    if (props.head) {\n        format = '{0:t}';\n    }\n    else if (props.tail) {\n        format = '{1:t}';\n    }\n    return intl.format(format, props.zonedStart, props.zonedEnd);\n};\nvar GET_START_DATE = function (date) { return getDate(date); };\nvar GET_END_DATE = function (start, numberOfDays) { return getDate(addDays(start, numberOfDays || 1)); };\nvar agendaViewDateRange = function (_a) {\n    var intl = _a.intl, date = _a.date, _b = _a.numberOfDays, numberOfDays = _b === void 0 ? 1 : _b, timezone = _a.timezone;\n    var normalized = ZonedDate.fromLocalDate(date, timezone);\n    var firstDate = numberOfDays === DAYS_IN_WEEK_COUNT\n        ? GET_START_DATE(firstDayInWeek(normalized, intl.firstDay()))\n        : GET_START_DATE(normalized);\n    var lastDate = GET_END_DATE(firstDate, numberOfDays);\n    var zonedStart = ZonedDate.fromUTCDate(toUTCDateTime(firstDate), timezone);\n    var zonedEnd = ZonedDate.fromUTCDate(toUTCDateTime(lastDate), timezone);\n    var start = new Date(zonedStart.getTime());\n    var end = new Date(zonedEnd.getTime());\n    return {\n        start: start,\n        end: end,\n        zonedStart: zonedStart,\n        zonedEnd: zonedEnd\n    };\n};\nvar defaultProps = {\n    name: 'agenda',\n    title: function (localization) { return localization.toLanguageString(agendaViewTitle, messages[agendaViewTitle]); },\n    dateRange: agendaViewDateRange,\n    selectedDateFormat: '{0:D} - {1:D}',\n    selectedShortDateFormat: '{0:d} - {1:d}',\n    slotDuration: 60 * 24,\n    slotDivision: 1,\n    step: DAYS_IN_WEEK_COUNT,\n    numberOfDays: DAYS_IN_WEEK_COUNT\n};\nvar propTypes = {\n    title: PropTypes.any\n};\nAgendaView.propTypes = propTypes;\nAgendaView.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"module"}