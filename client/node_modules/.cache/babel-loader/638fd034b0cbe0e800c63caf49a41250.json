{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport DropDownBase from '../common/DropDownBase';\nimport { guid, classNames, Keys, createPropsContext, withPropsContext } from '@progress/kendo-react-common';\nimport { FloatingLabel } from '@progress/kendo-react-labels';\nimport { areSame, itemIndexStartsWith, getItemIndexByText, getItemValue, isPresent, suggestValue } from '../common/utils';\nimport SearchBar from '../common/SearchBar';\nimport ListContainer from '../common/ListContainer';\nimport List from '../common/List';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from '../package-metadata';\nvar VALIDATION_MESSAGE = 'Please enter a valid value!';\n/** @hidden */\n\nvar ComboBoxWithoutContext =\n/** @class */\nfunction (_super) {\n  __extends(ComboBoxWithoutContext, _super);\n\n  function ComboBoxWithoutContext(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.state = {};\n    _this.base = new DropDownBase(_this);\n    _this._inputId = guid();\n    _this._suggested = '';\n    _this.itemHeight = 0;\n    /**\n     * @hidden\n     */\n\n    _this.focus = function () {\n      if (_this._input) {\n        _this._input.focus();\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.handleItemSelect = function (index, state) {\n      var _a = _this.props,\n          _b = _a.data,\n          data = _b === void 0 ? [] : _b,\n          virtual = _a.virtual,\n          dataItemKey = _a.dataItemKey;\n      var skip = virtual ? virtual.skip : 0;\n      var item = data[index - skip];\n      var newSelected = !areSame(item, _this.value, dataItemKey);\n\n      _this.triggerOnChange(item, state);\n\n      if (_this.state.text !== undefined) {\n        state.data.text = undefined;\n      }\n\n      if (newSelected) {\n        _this.base.triggerPageChangeCornerItems(item, state);\n      }\n    };\n\n    _this.toggleBtnClick = function (event) {\n      var state = _this.base.initState();\n\n      state.syntheticEvent = event;\n\n      _this.base.togglePopup(state);\n\n      _this.applyState(state);\n    };\n\n    _this.onScroll = function (event) {\n      var _a = _this.props,\n          _b = _a.data,\n          data = _b === void 0 ? [] : _b,\n          groupField = _a.groupField;\n\n      if (!groupField || !data.length) {\n        return;\n      }\n\n      var _c = _this.base,\n          vs = _c.vs,\n          list = _c.list;\n      var itemHeight = _this.itemHeight = _this.itemHeight || (vs.enabled ? vs.itemHeight : list ? list.children[0].offsetHeight : 0);\n      var target = event.target;\n      var scrollTop = target.scrollTop - vs.skip * itemHeight;\n      var group = data[0][groupField];\n\n      for (var i = 1; i < data.length; i++) {\n        if (itemHeight * i > scrollTop) {\n          break;\n        }\n\n        if (data[i] && data[i][groupField]) {\n          group = data[i][groupField];\n        }\n      }\n\n      if (group !== _this.state.group) {\n        _this.setState({\n          group: group\n        });\n      }\n    };\n\n    _this.handleItemClick = function (index, event) {\n      _this.base.handleItemClick(index, event);\n\n      _this._valueDuringOnChange = undefined;\n    };\n\n    _this.handleBlur = function (event) {\n      if (_this.state.focused) {\n        var state = _this.base.initState();\n\n        state.data.focused = false;\n        state.events.push({\n          type: 'onBlur'\n        });\n        state.syntheticEvent = event;\n\n        _this.applyValueOnRejectSuggestions(event.currentTarget.value, state);\n      }\n    };\n\n    _this.onInputKeyDown = function (event) {\n      var keyCode = event.keyCode;\n      var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n\n      var state = _this.base.initState();\n\n      state.syntheticEvent = event;\n\n      if (!event.altKey && (keyCode === Keys.up || keyCode === Keys.down)) {\n        event.preventDefault();\n\n        _this.onNavigate(state, keyCode);\n\n        _this.applyState(state);\n\n        return;\n      }\n\n      var togglePopup = function () {\n        event.preventDefault();\n\n        _this.base.togglePopup(state);\n\n        _this.applyState(state);\n      };\n\n      if (opened) {\n        if (event.altKey && keyCode === Keys.up) {\n          togglePopup();\n        } else if (keyCode === Keys.enter) {\n          event.preventDefault();\n\n          _this.applyValueOnEnter(event.currentTarget.value, state);\n        } else if (keyCode === Keys.esc) {\n          _this.applyValueOnRejectSuggestions(event.currentTarget.value, state);\n        }\n      } else if (event.altKey && keyCode === Keys.down) {\n        togglePopup();\n      }\n    };\n\n    _this.inputOnChange = function (event) {\n      var state = _this.base.initState();\n\n      state.syntheticEvent = event;\n      var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n      var input = event.currentTarget;\n      var value = input.value;\n\n      if (_this.props.suggest) {\n        var selectionAtEnd = input.selectionEnd === value.length;\n        var prevText = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n\n        if (!isPresent(prevText)) {\n          prevText = getItemValue(_this.value, _this.props.textField) || '';\n        }\n\n        var deletedSuggestion = prevText && prevText === value;\n        var deleting = prevText && prevText.length > value.length;\n\n        if (deletedSuggestion || deleting || !selectionAtEnd) {\n          _this._suggested = '';\n        } else {\n          _this.suggestValue(value);\n        }\n      }\n\n      if (_this.props.filter === undefined) {\n        state.data.text = value;\n      }\n\n      if (_this.state.focusedItem !== undefined) {\n        state.data.focusedItem = undefined;\n      }\n\n      if (!opened) {\n        _this.base.togglePopup(state);\n      }\n\n      _this.base.filterChanged(value, state);\n\n      _this.applyState(state);\n    };\n\n    _this.clearButtonClick = function (event) {\n      var state = _this.base.initState();\n\n      state.syntheticEvent = event;\n      event.stopPropagation();\n      _this._suggested = '';\n\n      _this.base.filterChanged('', state);\n\n      if (_this.props.filter === undefined && _this.state.text !== undefined) {\n        state.data.text = undefined;\n      }\n\n      _this.triggerOnChange(null, state);\n\n      var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n\n      if (opened) {\n        _this.base.togglePopup(state);\n      }\n\n      _this.applyState(state);\n    };\n\n    _this.setValidity = function () {\n      if (_this._input && _this._input.setCustomValidity) {\n        _this._input.setCustomValidity(_this.validity.valid ? '' : _this.props.validationMessage || VALIDATION_MESSAGE);\n      }\n    };\n\n    validatePackage(packageMetadata);\n    return _this;\n  }\n\n  Object.defineProperty(ComboBoxWithoutContext.prototype, \"element\", {\n    /**\n     * @hidden\n     */\n    get: function () {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ComboBoxWithoutContext.prototype, \"value\", {\n    /**\n     * The value of the ComboBox.\n     */\n    get: function () {\n      if (this._valueDuringOnChange !== undefined) {\n        return this._valueDuringOnChange;\n      } else if (this.props.value !== undefined) {\n        return this.props.value;\n      } else if (this.state.value !== undefined) {\n        return this.state.value;\n      } else if (this.props.defaultValue !== undefined) {\n        return this.props.defaultValue;\n      }\n\n      return undefined;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ComboBoxWithoutContext.prototype, \"index\", {\n    /**\n     * The index of the selected item.\n     */\n    get: function () {\n      var _a = this.props,\n          _b = _a.data,\n          data = _b === void 0 ? [] : _b,\n          dataItemKey = _a.dataItemKey;\n      var value = this.value; // TO DO: deprecate it!\n\n      return data.findIndex(function (i) {\n        return areSame(i, value, dataItemKey);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ComboBoxWithoutContext.prototype, \"name\", {\n    /**\n     * Gets the `name` property of the ComboBox.\n     */\n    get: function () {\n      return this.props.name;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ComboBoxWithoutContext.prototype, \"validity\", {\n    /**\n     * Represents the validity state into which the component is set.\n     */\n    get: function () {\n      // remove the undefined check when this is fixed:\n      // https://github.com/telerik/kendo-react-private/issues/252\n      var customError = this.props.validationMessage !== undefined;\n      var isValid = !this.required || this.value !== null && this.value !== '' && this.value !== undefined;\n      var valid = this.props.valid !== undefined ? this.props.valid : isValid;\n      return {\n        customError: customError,\n        valid: valid,\n        valueMissing: this.value === null\n      };\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ComboBoxWithoutContext.prototype, \"validityStyles\", {\n    get: function () {\n      return this.props.validityStyles !== undefined ? this.props.validityStyles : ComboBoxWithoutContext.defaultProps.validityStyles;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ComboBoxWithoutContext.prototype, \"required\", {\n    /**\n     * @hidden\n     */\n    get: function () {\n      return this.props.required !== undefined ? this.props.required : ComboBoxWithoutContext.defaultProps.required;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  ComboBoxWithoutContext.prototype.componentDidUpdate = function (prevProps, prevState) {\n    var _a = this.props,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b,\n        dataItemKey = _a.dataItemKey,\n        virtual = _a.virtual;\n    var prevTotal = prevProps.virtual ? prevProps.virtual.total : 0;\n    var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n    var prevOpened = prevProps.opened !== undefined ? prevProps.opened : prevState.opened;\n    var opening = !prevOpened && opened;\n    var selectedItem = this.value;\n    this._valueOnDidUpdate = selectedItem;\n\n    if (virtual && virtual.total !== prevTotal) {\n      this.base.vs.calcScrollElementHeight();\n      this.base.vs.reset();\n    } else {\n      var prevSelectedItem = prevProps.value !== undefined ? prevProps.value : prevState.value;\n      var selectedItemIndex = data.findIndex(function (i) {\n        return areSame(i, selectedItem, dataItemKey);\n      });\n      var selectedItemChanged = !areSame(prevSelectedItem, selectedItem, dataItemKey);\n\n      if (opening && virtual) {\n        this.base.scrollToVirtualItem(virtual, selectedItemIndex);\n      } else if (opening && !virtual) {\n        this.base.scrollToItem(selectedItemIndex);\n      } else if (opened && prevOpened && selectedItem && selectedItemChanged) {\n        this.base.scrollToItem(selectedItemIndex);\n      }\n    }\n\n    if (opening && this._input) {\n      this._input.focus();\n    }\n\n    this.setValidity();\n  };\n  /**\n   * @hidden\n   */\n\n\n  ComboBoxWithoutContext.prototype.componentDidMount = function () {\n    this.base.didMount();\n    this.setValidity();\n  };\n  /**\n   * @hidden\n   */\n\n\n  ComboBoxWithoutContext.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        dir = _a.dir,\n        disabled = _a.disabled,\n        _b = _a.clearButton,\n        clearButton = _b === void 0 ? ComboBoxWithoutContext.defaultProps.clearButton : _b,\n        label = _a.label,\n        textField = _a.textField,\n        className = _a.className,\n        style = _a.style,\n        loading = _a.loading,\n        iconClassName = _a.iconClassName,\n        virtual = _a.virtual;\n    var focused = this.state.focused;\n    var isValid = !this.validityStyles || this.validity.valid;\n    var text = this.props.filter !== undefined ? this.props.filter : this.state.text;\n    var selectedItemText = getItemValue(this.value, textField);\n    var inputText = isPresent(text) ? text : selectedItemText;\n    var renderClearButton = clearButton && (!!inputText || isPresent(this.value));\n    var base = this.base;\n    var vs = base.vs;\n    var id = this.props.id || this._inputId;\n    vs.enabled = virtual !== undefined;\n\n    if (virtual !== undefined) {\n      vs.skip = virtual.skip;\n      vs.total = virtual.total;\n      vs.pageSize = virtual.pageSize;\n    }\n\n    var combobox = React.createElement(\"span\", {\n      className: classNames('k-widget k-combobox', {\n        'k-combobox-clearable': clearButton,\n        'k-state-invalid': !isValid\n      }, className),\n      ref: function (element) {\n        return _this._element = element;\n      },\n      style: !label ? style : __assign({}, style, {\n        width: undefined\n      }),\n      dir: dir\n    }, React.createElement(\"span\", {\n      ref: function (wrapper) {\n        return base.wrapper = wrapper;\n      },\n      className: classNames('k-dropdown-wrap', {\n        'k-state-disabled': disabled,\n        'k-state-focused': focused && !disabled\n      })\n    }, this.renderSearchBar(renderClearButton, inputText || '', id), React.createElement(\"span\", {\n      className: \"k-select\",\n      onClick: this.toggleBtnClick,\n      onMouseDown: function (e) {\n        return e.preventDefault();\n      }\n    }, React.createElement(\"span\", {\n      className: classNames('k-icon', iconClassName, {\n        'k-i-arrow-s': !loading && !iconClassName,\n        'k-i-loading': loading && !iconClassName\n      })\n    }))), this.renderListContainer());\n    return label ? React.createElement(FloatingLabel, {\n      label: label,\n      editorId: id,\n      editorValue: inputText,\n      editorValid: isValid,\n      editorDisabled: disabled,\n      style: {\n        width: style ? style.width : undefined\n      },\n      children: combobox\n    }) : combobox;\n  };\n  /**\n   * @hidden\n   */\n\n\n  ComboBoxWithoutContext.prototype.onNavigate = function (state, keyCode) {\n    var _a = this.props,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b,\n        _c = _a.virtual,\n        virtual = _c === void 0 ? {\n      skip: 0\n    } : _c;\n    var text = this.props.filter ? this.props.filter : this.state.text;\n    var focusedIndex = this.getFocusedIndex();\n    var vs = this.base.vs;\n    var value = this.value;\n    this._suggested = '';\n\n    if (focusedIndex !== -1 && !isPresent(value)) {\n      this.handleItemSelect(focusedIndex, state);\n    } else if (text === '') {\n      this.handleItemSelect(0, state);\n    } else {\n      var currentIndex = virtual.skip + focusedIndex;\n      var newIndex = this.base.navigation.navigate({\n        keyCode: keyCode,\n        current: currentIndex,\n        max: (vs.enabled ? vs.total : data.length) - 1,\n        min: 0\n      });\n\n      if (newIndex !== undefined) {\n        this.handleItemSelect(newIndex, state);\n      }\n    }\n  };\n\n  ComboBoxWithoutContext.prototype.applyValueOnEnter = function (value, state) {\n    var _a;\n\n    var _b = this.props,\n        _c = _b.data,\n        data = _c === void 0 ? [] : _c,\n        textField = _b.textField,\n        allowCustom = _b.allowCustom;\n    var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n    var currentValueText = getItemValue(this.value, textField);\n    var valueIndex = currentValueText === value ? this.index : getItemIndexByText(data, value, textField);\n    var itemSelected = valueIndex !== -1;\n    var newSelected = undefined;\n    this._suggested = '';\n\n    if (itemSelected) {\n      // typed text match item from list\n      newSelected = data[valueIndex];\n    } else {\n      if (allowCustom) {\n        // any custom text not in list\n        newSelected = textField !== undefined ? (_a = {}, _a[textField] = value, _a) : value;\n      } else {\n        return this.selectFocusedItem(value, state);\n      }\n    }\n\n    this.triggerOnChange(newSelected, state);\n\n    if (opened) {\n      this.base.togglePopup(state);\n    }\n\n    if (this.props.filter === undefined && this.state.text !== undefined) {\n      state.data.text = undefined;\n    }\n\n    this.applyState(state);\n  };\n\n  ComboBoxWithoutContext.prototype.applyValueOnRejectSuggestions = function (text, state) {\n    var _a;\n\n    var _b = this.props,\n        _c = _b.data,\n        data = _c === void 0 ? [] : _c,\n        textField = _b.textField,\n        allowCustom = _b.allowCustom;\n    var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n    var valueItemText = getItemValue(this.value, textField);\n    this._suggested = '';\n\n    if (text === valueItemText || text === '' && !isPresent(valueItemText)) {\n      if (opened) {\n        this.base.togglePopup(state);\n      }\n\n      return this.applyState(state);\n    }\n\n    var valueIndex = getItemIndexByText(data, text, textField, true);\n    var itemSelected = valueIndex !== -1;\n    var newSelected = null;\n\n    if (itemSelected) {\n      newSelected = data[valueIndex];\n    } else if (allowCustom) {\n      newSelected = text ? textField ? (_a = {}, _a[textField] = text, _a) : text : null;\n    }\n\n    this.triggerOnChange(newSelected, state);\n\n    if (this.state.text !== undefined) {\n      state.data.text = undefined;\n      this.base.filterChanged('', state);\n    }\n\n    if (opened) {\n      this.base.togglePopup(state);\n    }\n\n    this.applyState(state);\n  };\n\n  ComboBoxWithoutContext.prototype.selectFocusedItem = function (text, state) {\n    var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n    var _a = this.props,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b,\n        textField = _a.textField,\n        _c = _a.virtual,\n        virtual = _c === void 0 ? {\n      skip: 0\n    } : _c,\n        _d = _a.focusedItemIndex,\n        focusedItemIndex = _d === void 0 ? itemIndexStartsWith : _d;\n    var skip = virtual.skip;\n    var focusedIndex = text === '' && skip === 0 ? 0 : focusedItemIndex(data, text, textField);\n\n    if (focusedIndex !== -1) {\n      this.handleItemSelect(focusedIndex + skip, state);\n    } else {\n      this.triggerOnChange(null, state);\n\n      if (this.state.text !== undefined) {\n        state.data.text = undefined;\n      }\n    }\n\n    if (opened) {\n      this.base.togglePopup(state);\n    }\n\n    return this.applyState(state);\n  };\n\n  ComboBoxWithoutContext.prototype.renderListContainer = function () {\n    var base = this.base;\n    var _a = this.props,\n        dir = _a.dir,\n        header = _a.header,\n        footer = _a.footer,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b,\n        groupField = _a.groupField;\n    var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n    var popupSettings = base.getPopupSettings();\n    var popupWidth = popupSettings.width !== undefined ? popupSettings.width : base.popupWidth;\n    var group = this.state.group;\n\n    if (group === undefined && groupField !== undefined) {\n      group = getItemValue(data[0], groupField);\n    }\n\n    return React.createElement(ListContainer, {\n      width: popupWidth,\n      popupSettings: {\n        animate: popupSettings.animate,\n        anchor: this.element,\n        show: opened,\n        popupClass: popupSettings.popupClass,\n        className: classNames('k-list-container k-reset', popupSettings.className),\n        appendTo: popupSettings.appendTo\n      },\n      dir: dir !== undefined ? dir : this.base.dirCalculated,\n      itemsCount: [data.length]\n    }, header, group && React.createElement(\"div\", {\n      className: \"k-group-header\"\n    }, group), base.renderScrollWrapper([this.renderList(), base.renderScrollElement()], this.onScroll), footer);\n  };\n\n  ComboBoxWithoutContext.prototype.renderList = function () {\n    var _this = this;\n\n    var base = this.base;\n    var _a = this.props,\n        textField = _a.textField,\n        dataItemKey = _a.dataItemKey,\n        listNoDataRender = _a.listNoDataRender,\n        itemRender = _a.itemRender,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b,\n        _c = _a.virtual,\n        virtual = _c === void 0 ? {\n      skip: 0\n    } : _c;\n    var popupSettings = base.getPopupSettings();\n    var vs = base.vs;\n    var skip = virtual.skip;\n    var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n    var translate = \"translateY(\" + vs.translate + \"px)\";\n    var focusedIndex = opened ? this.getFocusedIndex() : undefined;\n    var text = this.props.filter !== undefined ? this.props.filter : this.state.text;\n    var selectedItemText = getItemValue(this.value, textField);\n    var value = isPresent(text) && text !== selectedItemText ? null : this.value;\n    var ListComponent = this.props.list || List;\n    return React.createElement(ListComponent, {\n      id: base.listBoxId,\n      show: opened,\n      data: data,\n      focusedIndex: focusedIndex,\n      value: value,\n      textField: textField,\n      valueField: dataItemKey,\n      groupField: this.props.groupField,\n      optionsGuid: base.guid,\n      listRef: function (list) {\n        vs.list = _this.base.list = list;\n        _this.itemHeight = 0;\n      },\n      wrapperStyle: !vs.enabled ? {\n        maxHeight: popupSettings.height\n      } : {\n        float: 'left',\n        width: '100%'\n      },\n      wrapperCssClass: !vs.enabled ? 'k-list-scroller' : undefined,\n      listStyle: vs.enabled ? {\n        transform: translate\n      } : undefined,\n      key: \"listkey\",\n      skip: skip,\n      onClick: this.handleItemClick,\n      itemRender: itemRender,\n      noDataRender: listNoDataRender,\n      onMouseDown: function (e) {\n        return e.preventDefault();\n      },\n      onScroll: this.onScroll\n    });\n  };\n\n  ComboBoxWithoutContext.prototype.renderSearchBar = function (clearButton, text, id) {\n    var _this = this;\n\n    var _a = this.props,\n        placeholder = _a.placeholder,\n        tabIndex = _a.tabIndex,\n        disabled = _a.disabled,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b,\n        dataItemKey = _a.dataItemKey,\n        _c = _a.virtual,\n        virtual = _c === void 0 ? {\n      skip: 0\n    } : _c;\n    var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n    var value = this.value;\n    var selectedIndex = Math.max(0, data.findIndex(function (i) {\n      return areSame(i, value, dataItemKey);\n    }));\n\n    if (this._suggested && !areSame(this._valueOnDidUpdate, value, dataItemKey)) {\n      this._suggested = '';\n    }\n\n    return React.createElement(SearchBar, {\n      id: id,\n      placeholder: placeholder,\n      tabIndex: tabIndex || undefined,\n      accessKey: this.props.accessKey,\n      value: text + this._suggested,\n      suggestedText: this._suggested,\n      ref: function (el) {\n        return _this._input = el && el.input;\n      },\n      onKeyDown: this.onInputKeyDown,\n      onChange: this.inputOnChange,\n      onFocus: this.base.handleFocus,\n      onBlur: this.handleBlur,\n      disabled: disabled,\n      expanded: opened,\n      owns: this.base.listBoxId,\n      activedescendant: this.base.guid + '-' + (selectedIndex + virtual.skip),\n      role: \"combobox\",\n      clearButton: clearButton,\n      clearButtonClick: this.clearButtonClick,\n      ariaLabelledBy: this.props.ariaLabelledBy,\n      ariaDescribedBy: this.props.ariaDescribedBy,\n      render: this.props.valueRender\n    });\n  };\n\n  ComboBoxWithoutContext.prototype.triggerOnChange = function (item, state) {\n    var value = this.value;\n\n    if (!isPresent(value) && !isPresent(item) || areSame(value, item, this.props.dataItemKey)) {\n      return;\n    }\n\n    if (this.props.value === undefined) {\n      state.data.value = item;\n    }\n\n    this._valueDuringOnChange = item;\n    state.events.push({\n      type: 'onChange'\n    });\n  };\n\n  ComboBoxWithoutContext.prototype.getFocusedIndex = function () {\n    var value = this.value;\n    var _a = this.props,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b,\n        textField = _a.textField,\n        dataItemKey = _a.dataItemKey,\n        _c = _a.virtual,\n        virtual = _c === void 0 ? {\n      skip: 0\n    } : _c,\n        _d = _a.focusedItemIndex,\n        focusedItemIndex = _d === void 0 ? itemIndexStartsWith : _d;\n    var text = this.props.filter ? this.props.filter : this.state.text;\n\n    if (isPresent(value) && text === undefined) {\n      return data.findIndex(function (i) {\n        return areSame(i, value, dataItemKey);\n      });\n    } else if (text) {\n      return focusedItemIndex(data, text, textField);\n    } else {\n      return virtual.skip === 0 ? 0 : -1;\n    }\n  };\n\n  ComboBoxWithoutContext.prototype.suggestValue = function (value) {\n    var _a = this.props,\n        data = _a.data,\n        textField = _a.textField;\n    this._suggested = suggestValue(value, data, textField);\n  };\n\n  ComboBoxWithoutContext.prototype.applyState = function (state) {\n    this.base.applyState(state);\n    this._valueDuringOnChange = undefined;\n  };\n\n  ComboBoxWithoutContext.displayName = 'ComboBox';\n  /**\n   * @hidden\n   */\n\n  ComboBoxWithoutContext.propTypes = __assign({}, DropDownBase.propTypes, {\n    dataItemKey: PropTypes.string,\n    groupField: PropTypes.string,\n    suggest: PropTypes.bool,\n    placeholder: PropTypes.string,\n    allowCustom: PropTypes.bool,\n    clearButton: PropTypes.bool,\n    iconClassName: PropTypes.string,\n    validationMessage: PropTypes.string,\n    required: PropTypes.bool,\n    id: PropTypes.string,\n    ariaLabelledBy: PropTypes.string,\n    ariaDescribedBy: PropTypes.string,\n    list: PropTypes.any,\n    valueRender: PropTypes.func\n  });\n  /**\n   * @hidden\n   */\n\n  ComboBoxWithoutContext.defaultProps = __assign({}, DropDownBase.defaultProps, {\n    allowCustom: false,\n    clearButton: true,\n    required: false\n  });\n  return ComboBoxWithoutContext;\n}(React.Component);\n\nexport { ComboBoxWithoutContext };\n/**\n * Represents the PropsContext of the `ComboBox` component.\n * Used for global configuration of all `ComboBox` instances.\n *\n * For more information, refer to the [Dropdowns Props Context]({% slug props-context_dropdowns %}) article.\n */\n\nexport var ComboBoxPropsContext = createPropsContext();\n/* eslint-disable @typescript-eslint/no-redeclare -- intentionally naming the component the same as the type */\n\n/**\n * Represents the [KendoReact ComboBox component]({% slug overview_combobox %}).\n *\n * Accepts properties of type [ComboBoxProps]({% slug api_dropdowns_comboboxprops %}).\n * Obtaining the `ref` returns an object of type [ComboBoxHandle]({% slug api_dropdowns_comboboxhandle %}).\n *\n * @example\n * ```jsx\n * class App extends React.Component {\n *    combobox = null;\n *    render() {\n *       return (\n *          <div>\n *              <ComboBox\n *                  data={[ \"Albania\", \"Andorra\", \"Austria\", \"Belarus\" ]}\n *                  ref={component => this.combobox = component}\n *              />\n *              <button onClick={() => alert(this.combobox.value)}>alert value</button>\n *          </div>\n *       );\n *    }\n * }\n * ReactDOM.render(<App />, document.querySelector('my-app'));\n * ```\n */\n\nexport var ComboBox = withPropsContext(ComboBoxPropsContext, ComboBoxWithoutContext);\nComboBox.displayName = 'KendoReactComboBox';","map":{"version":3,"sources":["/home/asmith/taller/proyecto1/proyecto-taller/client/node_modules/@progress/kendo-react-dropdowns/dist/es/ComboBox/ComboBox.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","React","PropTypes","DropDownBase","guid","classNames","Keys","createPropsContext","withPropsContext","FloatingLabel","areSame","itemIndexStartsWith","getItemIndexByText","getItemValue","isPresent","suggestValue","SearchBar","ListContainer","List","validatePackage","packageMetadata","VALIDATION_MESSAGE","ComboBoxWithoutContext","_super","props","_this","state","base","_inputId","_suggested","itemHeight","focus","_input","handleItemSelect","index","_a","_b","data","virtual","dataItemKey","skip","item","newSelected","value","triggerOnChange","text","undefined","triggerPageChangeCornerItems","toggleBtnClick","event","initState","syntheticEvent","togglePopup","applyState","onScroll","groupField","_c","vs","list","enabled","children","offsetHeight","target","scrollTop","group","setState","handleItemClick","_valueDuringOnChange","handleBlur","focused","events","push","type","applyValueOnRejectSuggestions","currentTarget","onInputKeyDown","keyCode","opened","altKey","up","down","preventDefault","onNavigate","enter","applyValueOnEnter","esc","inputOnChange","input","suggest","selectionAtEnd","selectionEnd","prevText","filter","textField","deletedSuggestion","deleting","focusedItem","filterChanged","clearButtonClick","stopPropagation","setValidity","setCustomValidity","validity","valid","validationMessage","defineProperty","get","_element","enumerable","configurable","defaultValue","findIndex","name","customError","isValid","required","valueMissing","validityStyles","defaultProps","componentDidUpdate","prevProps","prevState","prevTotal","total","prevOpened","opening","selectedItem","_valueOnDidUpdate","calcScrollElementHeight","reset","prevSelectedItem","selectedItemIndex","selectedItemChanged","scrollToVirtualItem","scrollToItem","componentDidMount","didMount","render","dir","disabled","clearButton","label","className","style","loading","iconClassName","selectedItemText","inputText","renderClearButton","id","pageSize","combobox","createElement","ref","element","width","wrapper","renderSearchBar","onClick","onMouseDown","e","renderListContainer","editorId","editorValue","editorValid","editorDisabled","focusedIndex","getFocusedIndex","currentIndex","newIndex","navigation","navigate","current","max","min","allowCustom","currentValueText","valueIndex","itemSelected","selectFocusedItem","valueItemText","_d","focusedItemIndex","header","footer","popupSettings","getPopupSettings","popupWidth","animate","anchor","show","popupClass","appendTo","dirCalculated","itemsCount","renderScrollWrapper","renderList","renderScrollElement","listNoDataRender","itemRender","translate","ListComponent","listBoxId","valueField","optionsGuid","listRef","wrapperStyle","maxHeight","height","float","wrapperCssClass","listStyle","transform","key","noDataRender","placeholder","tabIndex","selectedIndex","Math","accessKey","suggestedText","el","onKeyDown","onChange","onFocus","handleFocus","onBlur","expanded","owns","activedescendant","role","ariaLabelledBy","ariaDescribedBy","valueRender","displayName","propTypes","string","bool","any","func","Component","ComboBoxPropsContext","ComboBox"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport DropDownBase from '../common/DropDownBase';\nimport { guid, classNames, Keys, createPropsContext, withPropsContext } from '@progress/kendo-react-common';\nimport { FloatingLabel } from '@progress/kendo-react-labels';\nimport { areSame, itemIndexStartsWith, getItemIndexByText, getItemValue, isPresent, suggestValue } from '../common/utils';\nimport SearchBar from '../common/SearchBar';\nimport ListContainer from '../common/ListContainer';\nimport List from '../common/List';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from '../package-metadata';\nvar VALIDATION_MESSAGE = 'Please enter a valid value!';\n/** @hidden */\nvar ComboBoxWithoutContext = /** @class */ (function (_super) {\n    __extends(ComboBoxWithoutContext, _super);\n    function ComboBoxWithoutContext(props) {\n        var _this = _super.call(this, props) || this;\n        /**\n         * @hidden\n         */\n        _this.state = {};\n        _this.base = new DropDownBase(_this);\n        _this._inputId = guid();\n        _this._suggested = '';\n        _this.itemHeight = 0;\n        /**\n         * @hidden\n         */\n        _this.focus = function () {\n            if (_this._input) {\n                _this._input.focus();\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.handleItemSelect = function (index, state) {\n            var _a = _this.props, _b = _a.data, data = _b === void 0 ? [] : _b, virtual = _a.virtual, dataItemKey = _a.dataItemKey;\n            var skip = virtual ? virtual.skip : 0;\n            var item = data[index - skip];\n            var newSelected = !areSame(item, _this.value, dataItemKey);\n            _this.triggerOnChange(item, state);\n            if (_this.state.text !== undefined) {\n                state.data.text = undefined;\n            }\n            if (newSelected) {\n                _this.base.triggerPageChangeCornerItems(item, state);\n            }\n        };\n        _this.toggleBtnClick = function (event) {\n            var state = _this.base.initState();\n            state.syntheticEvent = event;\n            _this.base.togglePopup(state);\n            _this.applyState(state);\n        };\n        _this.onScroll = function (event) {\n            var _a = _this.props, _b = _a.data, data = _b === void 0 ? [] : _b, groupField = _a.groupField;\n            if (!groupField || !data.length) {\n                return;\n            }\n            var _c = _this.base, vs = _c.vs, list = _c.list;\n            var itemHeight = _this.itemHeight =\n                _this.itemHeight || (vs.enabled ? vs.itemHeight : (list ? list.children[0].offsetHeight : 0));\n            var target = event.target;\n            var scrollTop = target.scrollTop - (vs.skip * itemHeight);\n            var group = data[0][groupField];\n            for (var i = 1; i < data.length; i++) {\n                if (itemHeight * i > scrollTop) {\n                    break;\n                }\n                if (data[i] && data[i][groupField]) {\n                    group = data[i][groupField];\n                }\n            }\n            if (group !== _this.state.group) {\n                _this.setState({\n                    group: group\n                });\n            }\n        };\n        _this.handleItemClick = function (index, event) {\n            _this.base.handleItemClick(index, event);\n            _this._valueDuringOnChange = undefined;\n        };\n        _this.handleBlur = function (event) {\n            if (_this.state.focused) {\n                var state = _this.base.initState();\n                state.data.focused = false;\n                state.events.push({ type: 'onBlur' });\n                state.syntheticEvent = event;\n                _this.applyValueOnRejectSuggestions(event.currentTarget.value, state);\n            }\n        };\n        _this.onInputKeyDown = function (event) {\n            var keyCode = event.keyCode;\n            var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n            var state = _this.base.initState();\n            state.syntheticEvent = event;\n            if (!event.altKey && (keyCode === Keys.up || keyCode === Keys.down)) {\n                event.preventDefault();\n                _this.onNavigate(state, keyCode);\n                _this.applyState(state);\n                return;\n            }\n            var togglePopup = function () {\n                event.preventDefault();\n                _this.base.togglePopup(state);\n                _this.applyState(state);\n            };\n            if (opened) {\n                if (event.altKey && keyCode === Keys.up) {\n                    togglePopup();\n                }\n                else if (keyCode === Keys.enter) {\n                    event.preventDefault();\n                    _this.applyValueOnEnter(event.currentTarget.value, state);\n                }\n                else if (keyCode === Keys.esc) {\n                    _this.applyValueOnRejectSuggestions(event.currentTarget.value, state);\n                }\n            }\n            else if (event.altKey && keyCode === Keys.down) {\n                togglePopup();\n            }\n        };\n        _this.inputOnChange = function (event) {\n            var state = _this.base.initState();\n            state.syntheticEvent = event;\n            var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n            var input = event.currentTarget;\n            var value = input.value;\n            if (_this.props.suggest) {\n                var selectionAtEnd = input.selectionEnd === value.length;\n                var prevText = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n                if (!isPresent(prevText)) {\n                    prevText = getItemValue(_this.value, _this.props.textField) || '';\n                }\n                var deletedSuggestion = prevText && prevText === value;\n                var deleting = prevText && prevText.length > value.length;\n                if (deletedSuggestion || deleting || !selectionAtEnd) {\n                    _this._suggested = '';\n                }\n                else {\n                    _this.suggestValue(value);\n                }\n            }\n            if (_this.props.filter === undefined) {\n                state.data.text = value;\n            }\n            if (_this.state.focusedItem !== undefined) {\n                state.data.focusedItem = undefined;\n            }\n            if (!opened) {\n                _this.base.togglePopup(state);\n            }\n            _this.base.filterChanged(value, state);\n            _this.applyState(state);\n        };\n        _this.clearButtonClick = function (event) {\n            var state = _this.base.initState();\n            state.syntheticEvent = event;\n            event.stopPropagation();\n            _this._suggested = '';\n            _this.base.filterChanged('', state);\n            if (_this.props.filter === undefined && _this.state.text !== undefined) {\n                state.data.text = undefined;\n            }\n            _this.triggerOnChange(null, state);\n            var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n            if (opened) {\n                _this.base.togglePopup(state);\n            }\n            _this.applyState(state);\n        };\n        _this.setValidity = function () {\n            if (_this._input && _this._input.setCustomValidity) {\n                _this._input.setCustomValidity(_this.validity.valid\n                    ? ''\n                    : _this.props.validationMessage || VALIDATION_MESSAGE);\n            }\n        };\n        validatePackage(packageMetadata);\n        return _this;\n    }\n    Object.defineProperty(ComboBoxWithoutContext.prototype, \"element\", {\n        /**\n         * @hidden\n         */\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComboBoxWithoutContext.prototype, \"value\", {\n        /**\n         * The value of the ComboBox.\n         */\n        get: function () {\n            if (this._valueDuringOnChange !== undefined) {\n                return this._valueDuringOnChange;\n            }\n            else if (this.props.value !== undefined) {\n                return this.props.value;\n            }\n            else if (this.state.value !== undefined) {\n                return this.state.value;\n            }\n            else if (this.props.defaultValue !== undefined) {\n                return this.props.defaultValue;\n            }\n            return undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComboBoxWithoutContext.prototype, \"index\", {\n        /**\n         * The index of the selected item.\n         */\n        get: function () {\n            var _a = this.props, _b = _a.data, data = _b === void 0 ? [] : _b, dataItemKey = _a.dataItemKey;\n            var value = this.value;\n            // TO DO: deprecate it!\n            return data.findIndex(function (i) { return areSame(i, value, dataItemKey); });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComboBoxWithoutContext.prototype, \"name\", {\n        /**\n         * Gets the `name` property of the ComboBox.\n         */\n        get: function () {\n            return this.props.name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComboBoxWithoutContext.prototype, \"validity\", {\n        /**\n         * Represents the validity state into which the component is set.\n         */\n        get: function () {\n            // remove the undefined check when this is fixed:\n            // https://github.com/telerik/kendo-react-private/issues/252\n            var customError = this.props.validationMessage !== undefined;\n            var isValid = (!this.required\n                || (this.value !== null && this.value !== '' && this.value !== undefined));\n            var valid = this.props.valid !== undefined ? this.props.valid : isValid;\n            return {\n                customError: customError,\n                valid: valid,\n                valueMissing: this.value === null\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComboBoxWithoutContext.prototype, \"validityStyles\", {\n        get: function () {\n            return this.props.validityStyles !== undefined\n                ? this.props.validityStyles\n                : ComboBoxWithoutContext.defaultProps.validityStyles;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComboBoxWithoutContext.prototype, \"required\", {\n        /**\n         * @hidden\n         */\n        get: function () {\n            return this.props.required !== undefined\n                ? this.props.required\n                : ComboBoxWithoutContext.defaultProps.required;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    ComboBoxWithoutContext.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var _a = this.props, _b = _a.data, data = _b === void 0 ? [] : _b, dataItemKey = _a.dataItemKey, virtual = _a.virtual;\n        var prevTotal = prevProps.virtual ? prevProps.virtual.total : 0;\n        var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n        var prevOpened = prevProps.opened !== undefined ? prevProps.opened : prevState.opened;\n        var opening = !prevOpened && opened;\n        var selectedItem = this.value;\n        this._valueOnDidUpdate = selectedItem;\n        if (virtual && virtual.total !== prevTotal) {\n            this.base.vs.calcScrollElementHeight();\n            this.base.vs.reset();\n        }\n        else {\n            var prevSelectedItem = prevProps.value !== undefined ? prevProps.value : prevState.value;\n            var selectedItemIndex = data.findIndex(function (i) { return areSame(i, selectedItem, dataItemKey); });\n            var selectedItemChanged = !areSame(prevSelectedItem, selectedItem, dataItemKey);\n            if (opening && virtual) {\n                this.base.scrollToVirtualItem(virtual, selectedItemIndex);\n            }\n            else if (opening && !virtual) {\n                this.base.scrollToItem(selectedItemIndex);\n            }\n            else if (opened && prevOpened && selectedItem && selectedItemChanged) {\n                this.base.scrollToItem(selectedItemIndex);\n            }\n        }\n        if (opening && this._input) {\n            this._input.focus();\n        }\n        this.setValidity();\n    };\n    /**\n     * @hidden\n     */\n    ComboBoxWithoutContext.prototype.componentDidMount = function () {\n        this.base.didMount();\n        this.setValidity();\n    };\n    /**\n     * @hidden\n     */\n    ComboBoxWithoutContext.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, dir = _a.dir, disabled = _a.disabled, _b = _a.clearButton, clearButton = _b === void 0 ? ComboBoxWithoutContext.defaultProps.clearButton : _b, label = _a.label, textField = _a.textField, className = _a.className, style = _a.style, loading = _a.loading, iconClassName = _a.iconClassName, virtual = _a.virtual;\n        var focused = this.state.focused;\n        var isValid = !this.validityStyles || this.validity.valid;\n        var text = this.props.filter !== undefined ? this.props.filter : this.state.text;\n        var selectedItemText = getItemValue(this.value, textField);\n        var inputText = isPresent(text) ? text : selectedItemText;\n        var renderClearButton = clearButton && (!!(inputText) || isPresent(this.value));\n        var base = this.base;\n        var vs = base.vs;\n        var id = this.props.id || this._inputId;\n        vs.enabled = virtual !== undefined;\n        if (virtual !== undefined) {\n            vs.skip = virtual.skip;\n            vs.total = virtual.total;\n            vs.pageSize = virtual.pageSize;\n        }\n        var combobox = (React.createElement(\"span\", { className: classNames('k-widget k-combobox', {\n                'k-combobox-clearable': clearButton,\n                'k-state-invalid': !isValid\n            }, className), ref: function (element) { return _this._element = element; }, style: !label\n                ? style\n                : __assign({}, style, { width: undefined }), dir: dir },\n            React.createElement(\"span\", { ref: function (wrapper) { return base.wrapper = wrapper; }, className: classNames('k-dropdown-wrap', {\n                    'k-state-disabled': disabled,\n                    'k-state-focused': focused && !disabled\n                }) },\n                this.renderSearchBar(renderClearButton, inputText || '', id),\n                React.createElement(\"span\", { className: \"k-select\", onClick: this.toggleBtnClick, onMouseDown: function (e) { return e.preventDefault(); } },\n                    React.createElement(\"span\", { className: classNames('k-icon', iconClassName, {\n                            'k-i-arrow-s': !loading && !iconClassName,\n                            'k-i-loading': loading && !iconClassName\n                        }) }))),\n            this.renderListContainer()));\n        return label\n            ? (React.createElement(FloatingLabel, { label: label, editorId: id, editorValue: inputText, editorValid: isValid, editorDisabled: disabled, style: { width: style ? style.width : undefined }, children: combobox }))\n            : combobox;\n    };\n    /**\n     * @hidden\n     */\n    ComboBoxWithoutContext.prototype.onNavigate = function (state, keyCode) {\n        var _a = this.props, _b = _a.data, data = _b === void 0 ? [] : _b, _c = _a.virtual, virtual = _c === void 0 ? { skip: 0 } : _c;\n        var text = this.props.filter ? this.props.filter : this.state.text;\n        var focusedIndex = this.getFocusedIndex();\n        var vs = this.base.vs;\n        var value = this.value;\n        this._suggested = '';\n        if (focusedIndex !== -1 && !isPresent(value)) {\n            this.handleItemSelect(focusedIndex, state);\n        }\n        else if (text === '') {\n            this.handleItemSelect(0, state);\n        }\n        else {\n            var currentIndex = virtual.skip + focusedIndex;\n            var newIndex = this.base.navigation.navigate({\n                keyCode: keyCode,\n                current: currentIndex,\n                max: (vs.enabled ? vs.total : data.length) - 1,\n                min: 0\n            });\n            if (newIndex !== undefined) {\n                this.handleItemSelect(newIndex, state);\n            }\n        }\n    };\n    ComboBoxWithoutContext.prototype.applyValueOnEnter = function (value, state) {\n        var _a;\n        var _b = this.props, _c = _b.data, data = _c === void 0 ? [] : _c, textField = _b.textField, allowCustom = _b.allowCustom;\n        var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n        var currentValueText = getItemValue(this.value, textField);\n        var valueIndex = currentValueText === value ?\n            this.index : getItemIndexByText(data, value, textField);\n        var itemSelected = valueIndex !== -1;\n        var newSelected = undefined;\n        this._suggested = '';\n        if (itemSelected) { // typed text match item from list\n            newSelected = data[valueIndex];\n        }\n        else {\n            if (allowCustom) { // any custom text not in list\n                newSelected = textField !== undefined ? (_a = {}, _a[textField] = value, _a) : value;\n            }\n            else {\n                return this.selectFocusedItem(value, state);\n            }\n        }\n        this.triggerOnChange(newSelected, state);\n        if (opened) {\n            this.base.togglePopup(state);\n        }\n        if (this.props.filter === undefined && this.state.text !== undefined) {\n            state.data.text = undefined;\n        }\n        this.applyState(state);\n    };\n    ComboBoxWithoutContext.prototype.applyValueOnRejectSuggestions = function (text, state) {\n        var _a;\n        var _b = this.props, _c = _b.data, data = _c === void 0 ? [] : _c, textField = _b.textField, allowCustom = _b.allowCustom;\n        var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n        var valueItemText = getItemValue(this.value, textField);\n        this._suggested = '';\n        if (text === valueItemText || (text === '' && !isPresent(valueItemText))) {\n            if (opened) {\n                this.base.togglePopup(state);\n            }\n            return this.applyState(state);\n        }\n        var valueIndex = getItemIndexByText(data, text, textField, true);\n        var itemSelected = valueIndex !== -1;\n        var newSelected = null;\n        if (itemSelected) {\n            newSelected = data[valueIndex];\n        }\n        else if (allowCustom) {\n            newSelected = text ? (textField ? (_a = {}, _a[textField] = text, _a) : text) : null;\n        }\n        this.triggerOnChange(newSelected, state);\n        if (this.state.text !== undefined) {\n            state.data.text = undefined;\n            this.base.filterChanged('', state);\n        }\n        if (opened) {\n            this.base.togglePopup(state);\n        }\n        this.applyState(state);\n    };\n    ComboBoxWithoutContext.prototype.selectFocusedItem = function (text, state) {\n        var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n        var _a = this.props, _b = _a.data, data = _b === void 0 ? [] : _b, textField = _a.textField, _c = _a.virtual, virtual = _c === void 0 ? { skip: 0 } : _c, _d = _a.focusedItemIndex, focusedItemIndex = _d === void 0 ? itemIndexStartsWith : _d;\n        var skip = virtual.skip;\n        var focusedIndex = (text === '' && skip === 0) ? 0 :\n            focusedItemIndex(data, text, textField);\n        if (focusedIndex !== -1) {\n            this.handleItemSelect(focusedIndex + skip, state);\n        }\n        else {\n            this.triggerOnChange(null, state);\n            if (this.state.text !== undefined) {\n                state.data.text = undefined;\n            }\n        }\n        if (opened) {\n            this.base.togglePopup(state);\n        }\n        return this.applyState(state);\n    };\n    ComboBoxWithoutContext.prototype.renderListContainer = function () {\n        var base = this.base;\n        var _a = this.props, dir = _a.dir, header = _a.header, footer = _a.footer, _b = _a.data, data = _b === void 0 ? [] : _b, groupField = _a.groupField;\n        var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n        var popupSettings = base.getPopupSettings();\n        var popupWidth = popupSettings.width !== undefined ? popupSettings.width : base.popupWidth;\n        var group = this.state.group;\n        if (group === undefined && groupField !== undefined) {\n            group = getItemValue(data[0], groupField);\n        }\n        return (React.createElement(ListContainer, { width: popupWidth, popupSettings: {\n                animate: popupSettings.animate,\n                anchor: this.element,\n                show: opened,\n                popupClass: popupSettings.popupClass,\n                className: classNames('k-list-container k-reset', popupSettings.className),\n                appendTo: popupSettings.appendTo\n            }, dir: dir !== undefined ? dir : this.base.dirCalculated, itemsCount: [data.length] },\n            header,\n            group && React.createElement(\"div\", { className: \"k-group-header\" }, group),\n            base.renderScrollWrapper([this.renderList(), base.renderScrollElement()], this.onScroll),\n            footer));\n    };\n    ComboBoxWithoutContext.prototype.renderList = function () {\n        var _this = this;\n        var base = this.base;\n        var _a = this.props, textField = _a.textField, dataItemKey = _a.dataItemKey, listNoDataRender = _a.listNoDataRender, itemRender = _a.itemRender, _b = _a.data, data = _b === void 0 ? [] : _b, _c = _a.virtual, virtual = _c === void 0 ? { skip: 0 } : _c;\n        var popupSettings = base.getPopupSettings();\n        var vs = base.vs;\n        var skip = virtual.skip;\n        var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n        var translate = \"translateY(\" + vs.translate + \"px)\";\n        var focusedIndex = opened ? this.getFocusedIndex() : undefined;\n        var text = this.props.filter !== undefined ? this.props.filter : this.state.text;\n        var selectedItemText = getItemValue(this.value, textField);\n        var value = isPresent(text) && text !== selectedItemText ? null : this.value;\n        var ListComponent = this.props.list || List;\n        return (React.createElement(ListComponent, { id: base.listBoxId, show: opened, data: data, focusedIndex: focusedIndex, value: value, textField: textField, valueField: dataItemKey, groupField: this.props.groupField, optionsGuid: base.guid, listRef: function (list) { vs.list = _this.base.list = list; _this.itemHeight = 0; }, wrapperStyle: !vs.enabled ?\n                { maxHeight: popupSettings.height } : { float: 'left', width: '100%' }, wrapperCssClass: !vs.enabled ? 'k-list-scroller' : undefined, listStyle: vs.enabled ?\n                { transform: translate } : undefined, key: \"listkey\", skip: skip, onClick: this.handleItemClick, itemRender: itemRender, noDataRender: listNoDataRender, onMouseDown: function (e) { return e.preventDefault(); }, onScroll: this.onScroll }));\n    };\n    ComboBoxWithoutContext.prototype.renderSearchBar = function (clearButton, text, id) {\n        var _this = this;\n        var _a = this.props, placeholder = _a.placeholder, tabIndex = _a.tabIndex, disabled = _a.disabled, _b = _a.data, data = _b === void 0 ? [] : _b, dataItemKey = _a.dataItemKey, _c = _a.virtual, virtual = _c === void 0 ? { skip: 0 } : _c;\n        var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n        var value = this.value;\n        var selectedIndex = Math.max(0, data.findIndex(function (i) { return areSame(i, value, dataItemKey); }));\n        if (this._suggested && !areSame(this._valueOnDidUpdate, value, dataItemKey)) {\n            this._suggested = '';\n        }\n        return (React.createElement(SearchBar, { id: id, placeholder: placeholder, tabIndex: tabIndex || undefined, accessKey: this.props.accessKey, value: text + this._suggested, suggestedText: this._suggested, ref: function (el) { return _this._input = el && el.input; }, onKeyDown: this.onInputKeyDown, onChange: this.inputOnChange, onFocus: this.base.handleFocus, onBlur: this.handleBlur, disabled: disabled, expanded: opened, owns: this.base.listBoxId, activedescendant: this.base.guid + '-' + (selectedIndex + virtual.skip), role: \"combobox\", clearButton: clearButton, clearButtonClick: this.clearButtonClick, ariaLabelledBy: this.props.ariaLabelledBy, ariaDescribedBy: this.props.ariaDescribedBy, render: this.props.valueRender }));\n    };\n    ComboBoxWithoutContext.prototype.triggerOnChange = function (item, state) {\n        var value = this.value;\n        if ((!isPresent(value) && !isPresent(item)) || areSame(value, item, this.props.dataItemKey)) {\n            return;\n        }\n        if (this.props.value === undefined) {\n            state.data.value = item;\n        }\n        this._valueDuringOnChange = item;\n        state.events.push({ type: 'onChange' });\n    };\n    ComboBoxWithoutContext.prototype.getFocusedIndex = function () {\n        var value = this.value;\n        var _a = this.props, _b = _a.data, data = _b === void 0 ? [] : _b, textField = _a.textField, dataItemKey = _a.dataItemKey, _c = _a.virtual, virtual = _c === void 0 ? { skip: 0 } : _c, _d = _a.focusedItemIndex, focusedItemIndex = _d === void 0 ? itemIndexStartsWith : _d;\n        var text = this.props.filter ? this.props.filter : this.state.text;\n        if (isPresent(value) && text === undefined) {\n            return data.findIndex(function (i) { return areSame(i, value, dataItemKey); });\n        }\n        else if (text) {\n            return focusedItemIndex(data, text, textField);\n        }\n        else {\n            return virtual.skip === 0 ? 0 : -1;\n        }\n    };\n    ComboBoxWithoutContext.prototype.suggestValue = function (value) {\n        var _a = this.props, data = _a.data, textField = _a.textField;\n        this._suggested = suggestValue(value, data, textField);\n    };\n    ComboBoxWithoutContext.prototype.applyState = function (state) {\n        this.base.applyState(state);\n        this._valueDuringOnChange = undefined;\n    };\n    ComboBoxWithoutContext.displayName = 'ComboBox';\n    /**\n     * @hidden\n     */\n    ComboBoxWithoutContext.propTypes = __assign({}, DropDownBase.propTypes, { dataItemKey: PropTypes.string, groupField: PropTypes.string, suggest: PropTypes.bool, placeholder: PropTypes.string, allowCustom: PropTypes.bool, clearButton: PropTypes.bool, iconClassName: PropTypes.string, validationMessage: PropTypes.string, required: PropTypes.bool, id: PropTypes.string, ariaLabelledBy: PropTypes.string, ariaDescribedBy: PropTypes.string, list: PropTypes.any, valueRender: PropTypes.func });\n    /**\n     * @hidden\n     */\n    ComboBoxWithoutContext.defaultProps = __assign({}, DropDownBase.defaultProps, { allowCustom: false, clearButton: true, required: false });\n    return ComboBoxWithoutContext;\n}(React.Component));\nexport { ComboBoxWithoutContext };\n/**\n * Represents the PropsContext of the `ComboBox` component.\n * Used for global configuration of all `ComboBox` instances.\n *\n * For more information, refer to the [Dropdowns Props Context]({% slug props-context_dropdowns %}) article.\n */\nexport var ComboBoxPropsContext = createPropsContext();\n/* eslint-disable @typescript-eslint/no-redeclare -- intentionally naming the component the same as the type */\n/**\n * Represents the [KendoReact ComboBox component]({% slug overview_combobox %}).\n *\n * Accepts properties of type [ComboBoxProps]({% slug api_dropdowns_comboboxprops %}).\n * Obtaining the `ref` returns an object of type [ComboBoxHandle]({% slug api_dropdowns_comboboxhandle %}).\n *\n * @example\n * ```jsx\n * class App extends React.Component {\n *    combobox = null;\n *    render() {\n *       return (\n *          <div>\n *              <ComboBox\n *                  data={[ \"Albania\", \"Andorra\", \"Austria\", \"Belarus\" ]}\n *                  ref={component => this.combobox = component}\n *              />\n *              <button onClick={() => alert(this.combobox.value)}>alert value</button>\n *          </div>\n *       );\n *    }\n * }\n * ReactDOM.render(<App />, document.querySelector('my-app'));\n * ```\n */\nexport var ComboBox = withPropsContext(ComboBoxPropsContext, ComboBoxWithoutContext);\nComboBox.displayName = 'KendoReactComboBox';\n"]},"metadata":{},"sourceType":"module"}