{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { getDate } from '@progress/kendo-date-math';\nimport { toGroupResources, toFlatGroupResources } from '../views/common/utils';\nimport { getter, setter, clone, cloneDate } from '@progress/kendo-react-common';\nimport { // OCCURRENCE_ID,\nDEFAULT_ID } from '../constants';\nimport { orderBy } from '@progress/kendo-data-query';\n/** @hidden */\n\nexport var first = function (arr) {\n  return arr[0];\n};\n/** @hidden */\n\nexport var last = function (arr) {\n  return arr[arr.length - 1];\n};\n/** @hidden */\n\nexport var isMultiDay = function (item) {\n  var result = item.end.getTime() - item.start.getTime() > new Date(0).setHours(24);\n  return result;\n};\n/** @hidden */\n\nexport var isGroupped = function (resources) {\n  var set = new Set();\n  resources.forEach(function (resource) {\n    set.add(resource.field);\n  });\n  return set.size === resources.length;\n};\n/**\n * @hidden\n */\n\nexport function formatEventTime(intl, start, end, isAllDay) {\n  var startTimeFormat = {\n    skeleton: 'yMMMMEEEEdhm'\n  };\n  var startDateFormat = {\n    skeleton: 'yMMMMEEEEd'\n  };\n  var endFormat = 't';\n  return isAllDay ? \"\" + intl.formatDate(start, startDateFormat) : intl.formatDate(start, startTimeFormat) + \"\\u2013\" + intl.formatDate(end, endFormat);\n}\n/**\n * @hidden\n * TODO Move to date-math\n */\n\nexport var addUTCDays = function (date, offset) {\n  var newDate = new Date(date.getTime());\n  newDate.setUTCDate(newDate.getUTCDate() + offset);\n  return newDate;\n};\n/** @hidden */\n\nexport function dateWithTime(target, time) {\n  return new Date(target.getFullYear(), target.getMonth(), target.getDate(), time.getHours(), time.getMinutes());\n}\n/**\n * @hidden\n */\n\nexport var getToday = function () {\n  return getDate(new Date());\n}; // Introduce max depth doe to Maximum call stack size exceeded when react <body />\n// The element.closest() approach is not available due to browser support issues.\n\n/** @hidden */\n\nexport var slotDive = function (x, y, maxDepth, level) {\n  if (level === void 0) {\n    level = 0;\n  }\n\n  if (level === maxDepth) {\n    return null;\n  }\n\n  var result = null;\n  var element = document.elementFromPoint(x, y);\n\n  if (!element) {\n    return result;\n  }\n\n  var isSlot = element.getAttribute('data-slot') === 'true';\n\n  if (isSlot) {\n    return element;\n  } else {\n    var oldPointerEvents = element.style.pointerEvents;\n    element.style.pointerEvents = 'none';\n    result = slotDive(x, y, maxDepth, level + 1);\n    element.style.pointerEvents = oldPointerEvents;\n  }\n\n  return result;\n};\n/**\n * @hidden\n */\n\nexport var getField = function (obj, field) {\n  return getter(field)(obj);\n};\n/**\n * @hidden\n */\n\nexport var setField = function (obj, field, value) {\n  if (!field) {\n    return;\n  }\n\n  return setter(field)(obj, value);\n};\n/**\n * @hidden\n */\n\nexport function assignField(target, source, field) {\n  setField(target, field, getField(source, field));\n}\n/**\n * @hidden\n */\n\nexport function assignFields(target, source) {\n  var fields = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    fields[_i - 2] = arguments[_i];\n  }\n\n  for (var idx = 0; idx < fields.length; idx++) {\n    assignField(target, source, fields[idx]);\n  }\n}\n/**\n * @hidden\n */\n\nexport var isPresent = function (value) {\n  return value !== null && value !== undefined;\n};\n/**\n * @hidden\n */\n\nexport var isRecurringMaster = function (event) {\n  return event.recurrenceRule && !isPresent(event.recurrenceId);\n}; //  TODO: move to date-math\n\n/** @hidden */\n\nexport function toUTCDate(localDate) {\n  return new Date(Date.UTC(localDate.getFullYear(), localDate.getMonth(), localDate.getDate()));\n} // TODO: move to date-math\n\n/** @hidden */\n\nexport function getUTCDate(utcDate) {\n  return new Date(Date.UTC(utcDate.getUTCFullYear(), utcDate.getUTCMonth(), utcDate.getUTCDate()));\n} // TODO: move to date-math\n\n/** @hidden */\n\nexport function toUTCDateTime(localDate) {\n  return new Date(Date.UTC(localDate.getFullYear(), localDate.getMonth(), localDate.getDate(), localDate.getHours(), localDate.getMinutes(), localDate.getSeconds(), localDate.getMilliseconds()));\n}\n/** @hidden */\n\nexport function toInvariantTime(date) {\n  var staticDate = new Date(1980, 1, 1, 0, 0, 0);\n\n  if (date) {\n    staticDate.setHours(date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\n  }\n\n  return staticDate;\n}\n/** @hidden */\n\nexport function isRecurringException(event) {\n  return event && isPresent(event.recurrenceId) && !event.recurrenceRule;\n}\n/**\n * @hidden\n */\n\nexport var isRecurring = function (event, fields) {\n  var recurrenceId = getter(fields.recurrenceId || 'recurrenceId')(event);\n  var recurrenceRule = getter(fields.recurrenceRule || 'recurrenceRule')(event);\n  return !!(recurrenceRule || recurrenceId);\n};\n/**\n * @hidden\n */\n\nexport var groupResources = function (group, resources) {\n  var result = [];\n\n  if (group && group.resources && group.resources.length) {\n    var groups_1 = group.resources;\n\n    var _loop_1 = function (idx) {\n      var resource = resources.find(function (r) {\n        return r.name === groups_1[idx];\n      });\n      result.push(resource);\n    };\n\n    for (var idx = 0; idx < groups_1.length; idx++) {\n      _loop_1(idx);\n    }\n  }\n\n  return result;\n};\n/**\n * @hidden\n */\n\nexport var findMaster = function (event, fields, data) {\n  var headId = isMaster(event, fields) ? getField(event, fields.id) : getField(event, fields.recurrenceId);\n  return data.find(function (currentEvent) {\n    return getField(currentEvent, fields.id) === headId;\n  });\n};\n/**\n * @hidden\n */\n\nexport var isMaster = function (event, fields) {\n  var id = getField(event, fields.id);\n  var recurrenceId = getField(event, fields.recurrenceId);\n  var recurrenceRule = getField(event, fields.recurrenceRule);\n  return !!(id && recurrenceRule && (recurrenceId === undefined || recurrenceId === null));\n};\n/**\n * @hidden\n */\n\nexport var buildException = function (event, fields, data) {\n  var headEvent = findMaster(event, fields, data);\n  var copy = clone(event);\n  assignField(copy, headEvent, fields.id);\n\n  if (fields.id !== undefined) {\n    setField(copy, fields.id, DEFAULT_ID);\n  }\n\n  if (fields.recurrenceRule !== undefined) {\n    setField(copy, fields.recurrenceRule, undefined);\n  }\n\n  if (fields.recurrenceId !== undefined) {\n    setField(copy, fields.recurrenceId, getField(headEvent, fields.id));\n  }\n\n  return copy;\n};\n/**\n * @hidden\n */\n\nexport var isException = function (event, fields) {\n  return isPresent(getField(event, fields.recurrenceId)) && !getField(event, fields.recurrenceRule);\n};\n\nvar maxDate = function (x, y) {\n  return Math.max(x.getTime(), y.getTime());\n};\n\nvar minDate = function (x, y) {\n  return Math.min(x.getTime(), y.getTime());\n};\n/** @hidden */\n\n\nexport var intersects = function (startTime, endTime, periodStart, periodEnd, inclusive) {\n  if (inclusive === void 0) {\n    inclusive = false;\n  }\n\n  return inclusive ? maxDate(endTime, periodEnd) - minDate(startTime, periodStart) <= endTime.getTime() - startTime.getTime() + (periodEnd.getTime() - periodStart.getTime()) : maxDate(endTime, periodEnd) - minDate(startTime, periodStart) < endTime.getTime() - startTime.getTime() + (periodEnd.getTime() - periodStart.getTime());\n};\n/** @hidden */\n\nexport var roundAllDayEnd = function (_a) {\n  var start = _a.start,\n      end = _a.end;\n  var startDate = start.stripTime();\n  var endDate = end.stripTime();\n  return endDate.getTime() !== end.getTime() || startDate.getTime() === endDate.getTime() ? endDate.addDays(1) : endDate;\n};\n/**\n * @hidden\n */\n\nexport var defaultModelFields = {\n  id: 'id',\n  start: 'start',\n  startTimezone: 'startTimezone',\n  originalStart: 'originalStart',\n  end: 'end',\n  endTimezone: 'endTimezone',\n  isAllDay: 'isAllDay',\n  title: 'title',\n  description: 'description',\n  recurrenceRule: 'recurrenceRule',\n  recurrenceId: 'recurrenceId',\n  recurrenceExceptions: 'recurrenceExceptions'\n};\n/** @hidden */\n\nexport var getModelFields = function (modelFields) {\n  return {\n    fields: __assign({}, defaultModelFields, modelFields)\n  };\n};\n/** @hidden */\n\nexport var isInTimeRange = function (date, min, max) {\n  return (min.getHours() < date.getHours() || min.getHours() === date.getHours() && min.getMinutes() <= date.getMinutes()) && (date.getHours() < max.getHours() || max.getHours() === date.getHours() && date.getMinutes() < max.getMinutes());\n}; // /** @hidden */\n// export const generateGroups = (\n//     groupIndex: string | null,\n//     nextGroupIndex: string | null,\n//     groups: any[],\n//     group: SchedulerGroup | undefined,\n//     resources: SchedulerResource[] = []\n// ) => {\n//     if (!groupIndex || !nextGroupIndex) { return []; }\n//     const groupedResources = toGroupResources(group, resources);\n//     const flat = toFlatGroupResources(groupedResources);\n//     return groups.map(g => g.index === Number(groupIndex)\n//         ? { index: Number((nextGroupIndex)), resources: flat[Number(nextGroupIndex)] }\n//         : g);\n// };\n\n/** @hidden */\n\nexport var toSchedulerGroups = function (group, resources) {\n  var groupedResources = toGroupResources(group, resources);\n  var flat = toFlatGroupResources(groupedResources);\n\n  if (flat.length === 1) {\n    return [{\n      index: 0,\n      // resources: []\n      resources: (resources || []).reduce(function (all, res) {\n        return all.concat(res.data.map(function (item) {\n          return __assign({}, item, {\n            field: res.field,\n            valueField: res.valueField,\n            colorField: res.colorField,\n            multiple: res.multiple\n          });\n        }));\n      }, [])\n    }];\n  } else {\n    return flat.map(function (res, index) {\n      return {\n        index: index,\n        resources: res\n      };\n    });\n  }\n};\n/** @hidden */\n\nexport var toSchedulerResources = function (resources) {\n  return (resources || []).reduce(function (all, res) {\n    return all.concat(res.data.map(function (item) {\n      return __assign({}, item, {\n        field: res.field,\n        valueField: res.valueField,\n        colorField: res.colorField,\n        multiple: res.multiple\n      });\n    }));\n  }, []);\n};\n/** @hidden */\n\nexport var generateResourceFields = function (groups, defaultFields) {\n  if (!groups || !groups.length) {\n    return defaultFields;\n  }\n\n  var result = {};\n  groups.forEach(function (group) {\n    group.resources.forEach(function (resource) {\n      if (result[resource.field] === undefined) {\n        result[resource.field] = resource[resource.valueField];\n      }\n    });\n  });\n  return result;\n};\n/**\n * @hidden\n *\n * TODO: Move to @progress/kendo-common\n */\n\nexport var isBlank = function (value) {\n  return value === null || value === undefined;\n};\n/**\n * @hidden\n *\n * TODO: Move to @progress/kendo-common\n */\n\nexport var isNullOrEmptyString = function (value) {\n  return isBlank(value) || value.trim && value.trim().length === 0;\n};\n/**\n * @hidden\n */\n\nexport var setTime = function (origin, candidate) {\n  var date = cloneDate(origin);\n  date.setHours(candidate.getHours(), candidate.getMinutes(), candidate.getSeconds(), candidate.getMilliseconds());\n  return date;\n};\n\nfunction getDataIdx(value, resource) {\n  var data = resource.data;\n\n  for (var dataIdx = 0; dataIdx < data.length; dataIdx++) {\n    if (getField(data[dataIdx], resource.valueField) === value) {\n      return dataIdx;\n    }\n  }\n\n  return 0;\n}\n/** @hidden */\n\n\nexport var extractGroups = function (dataItem, fields, group, resources) {\n  var groupedResources = toGroupResources(group, resources);\n  var flat = toFlatGroupResources(groupedResources);\n\n  var flatGroupsReducer = function (acc, items, index) {\n    var match = true;\n    items.forEach(function (item) {\n      var expected = item[item.valueField];\n      var actual = dataItem[fields[item.field] || item.field];\n\n      if (Array.isArray(actual)) {\n        match = match && actual.indexOf(expected) >= 0;\n      } else {\n        match = match && actual === expected;\n      }\n    });\n\n    if (match) {\n      return acc.concat([{\n        index: index,\n        resources: items\n      }]);\n    } else {\n      return acc;\n    }\n  };\n\n  return flat.reduce(flatGroupsReducer, []);\n};\n\nvar findLeafResource = function (level) {\n  if (level === void 0) {\n    level = 0;\n  }\n\n  return findLeafResource(level + 1);\n};\n/** @hidden */\n\n\nexport var extractResourceFields = function (dataItem, fields, resources) {\n  var result = {};\n\n  if (!resources || !resources.length) {\n    return result;\n  }\n\n  resources.forEach(function (resource) {\n    var match = resource.data.find(function (item) {\n      return item.value === dataItem[fields[resource.field] || resource.field];\n    });\n\n    if (match) {\n      result[resource.field] = match.value;\n    }\n  });\n  return result;\n};\n/** @hidden */\n\nexport var extractResources = function (dataItem, fields, resources) {\n  if (resources === void 0) {\n    resources = [];\n  }\n\n  var resourceIndex = 0;\n  var itemResources = [];\n\n  for (var resourceIdx = 0; resourceIdx < resources.length; resourceIdx++) {\n    var resource = resources[resourceIdx];\n    var values = getField(dataItem, fields[resource.field] || resource.field);\n\n    if (!Array.isArray(values)) {\n      values = [values];\n    }\n\n    for (var valueIndex = 0; valueIndex < values.length; valueIndex++) {\n      if (values[valueIndex] !== undefined) {\n        var dataIdx = getDataIdx(values[valueIndex], resource);\n        var data = resource.data[dataIdx];\n        var itemResource = {\n          text: getField(data, resource.textField),\n          color: getField(data, resource.colorField),\n          value: getField(data, resource.valueField)\n        };\n        itemResources.push(__assign({}, itemResource, {\n          index: resourceIndex\n        }));\n      }\n\n      resourceIndex++;\n    }\n  }\n\n  return itemResources;\n}; // Change from JSON.stringify to recursive compare! use clone\n\n/** @hidden */\n\nexport var shallowCompare = function (x, y) {\n  return JSON.stringify(x) === JSON.stringify(y);\n};\n/** @hidden */\n\nexport var findMissing = function (orderNumbers) {\n  var result = 0;\n  var numbers = orderNumbers.slice(); // Array.find is also O(n)\n\n  numbers.sort(function (a, b) {\n    return a - b;\n  }).forEach(function (_, index) {\n    if (numbers[index] === index) {\n      result = index + 1;\n    }\n  });\n  return result;\n};\n/** @hidden */\n\nexport var calculateOrder = function (current, items, slots, ignoreIsAllDay) {\n  if (ignoreIsAllDay === void 0) {\n    ignoreIsAllDay = false;\n  }\n\n  var result;\n  ;\n  slots.forEach(function (slot) {\n    var orderNumbers = [];\n    var sorted = items.sort(function (a, b) {\n      return a.props.start.getTime() - b.props.start.getTime();\n    });\n    sorted.forEach(function (item) {\n      var fit = (ignoreIsAllDay || item.props.isAllDay === slot.current.props.isAllDay) && item.props.range.index === slot.current.props.range.index && item.props.group.index === slot.current.props.group.index && intersects(item.props.start, item.props.end, slot.current.props.start, slot.current.props.end);\n\n      if (fit) {\n        var order = findMissing(orderNumbers);\n\n        if (item === current && result === undefined) {\n          result = order;\n        }\n\n        orderNumbers.splice(order, 0, order);\n      }\n    });\n  });\n  return result;\n}; // TODO: REVISIT\n\n/** @hidden */\n\nexport var mapSlotsToItems = function (items, slots, ignoreIsAllDay) {\n  if (ignoreIsAllDay === void 0) {\n    ignoreIsAllDay = false;\n  } // Clear\n\n\n  slots.forEach(function (slot) {\n    return slot.items.splice(0, slot.items.length);\n  }); // Populate\n\n  slots.forEach(function (slot) {\n    var orderNumbers = [];\n    items.forEach(function (item) {\n      var fit = (ignoreIsAllDay || item.isAllDay === slot.isAllDay) && item.range.index === slot.range.index && item.group.index === slot.group.index && intersects(item.start, item.end, slot.start, slot.end);\n\n      if (fit) {\n        var order = findMissing(orderNumbers);\n\n        if (item.order === null || item.order === undefined || item.order < order) {\n          item.order = order;\n        }\n\n        orderNumbers.splice(item.order, 0, item.order);\n        slot.items.push(item);\n      }\n    });\n  });\n}; // TODO: REVISIT\n\n/** @hidden */\n\nexport var mapItemsToSlots = function (items, slots, ignoreIsAllDay) {\n  if (ignoreIsAllDay === void 0) {\n    ignoreIsAllDay = false;\n  } // Clear\n\n\n  items.forEach(function (item) {\n    return item.slots.splice(0, item.slots.length);\n  }); // Populate\n\n  items.forEach(function (item) {\n    slots.forEach(function (slot) {\n      var fit = (ignoreIsAllDay || item.isAllDay === slot.isAllDay) && item.range.index === slot.range.index && item.group.index === slot.group.index && intersects(item.start, item.end, slot.start, slot.end);\n\n      if (fit) {\n        item.slots.push(slot);\n      }\n    });\n  });\n};\n/** @hidden */\n\nexport var noop = function () {\n  var _args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    _args[_i] = arguments[_i];\n  }\n};\n/** @hidden */\n\nexport var findFirstItem = function (current) {\n  var next = current.props.items.find(function (i) {\n    return i.order === 0;\n  }) || current.props.items[0];\n  return next && next._ref.current;\n};\n/** @hidden */\n\nexport var findNextItem = function (ref, all, ignoreIsAllDay, backwards) {\n  if (ignoreIsAllDay === void 0) {\n    ignoreIsAllDay = false;\n  }\n\n  if (backwards === void 0) {\n    backwards = false;\n  }\n\n  var current = ref.current;\n\n  if (!current || !all) {\n    return null;\n  }\n\n  var filtered = all.filter(function (i) {\n    return i.current !== null && i.current.element !== null;\n  });\n  var sorted = orderBy(filtered, [{\n    field: 'current.props.group.index',\n    dir: 'asc'\n  }, {\n    field: 'current.props.range.index',\n    dir: 'asc'\n  }, ignoreIsAllDay ? {\n    field: ''\n  } : {\n    field: 'current.props.isAllDay',\n    dir: 'desc'\n  }, {\n    field: 'current.props.start',\n    dir: 'asc'\n  }]);\n  var currentIndex = sorted.findIndex(function (i) {\n    return i.current !== null && Boolean(i.current.props.uid === current.props.uid && (i.current.props.occurrenceId === undefined || i.current.props.occurrenceId === current.props.occurrenceId) && i.current.props.group.index === current.props.group.index && i.current.props.range.index === current.props.range.index && (ignoreIsAllDay || i.current.props.isAllDay === current.props.isAllDay));\n  });\n  var next = sorted[currentIndex + (backwards ? -1 : 1)];\n  return next;\n};\n/**\n * @hidden\n */\n\nexport var orderSort = function (a, b) {\n  return (a.order || 0) - (b.order || 0);\n};","map":{"version":3,"sources":["/home/asmith/taller/proyecto1/proyecto-taller/client/node_modules/@progress/kendo-react-scheduler/dist/es/utils/index.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","getDate","toGroupResources","toFlatGroupResources","getter","setter","clone","cloneDate","DEFAULT_ID","orderBy","first","arr","last","isMultiDay","item","result","end","getTime","start","Date","setHours","isGroupped","resources","set","Set","forEach","resource","add","field","size","formatEventTime","intl","isAllDay","startTimeFormat","skeleton","startDateFormat","endFormat","formatDate","addUTCDays","date","offset","newDate","setUTCDate","getUTCDate","dateWithTime","target","time","getFullYear","getMonth","getHours","getMinutes","getToday","slotDive","x","y","maxDepth","level","element","document","elementFromPoint","isSlot","getAttribute","oldPointerEvents","style","pointerEvents","getField","obj","setField","value","assignField","source","assignFields","fields","_i","idx","isPresent","undefined","isRecurringMaster","event","recurrenceRule","recurrenceId","toUTCDate","localDate","UTC","utcDate","getUTCFullYear","getUTCMonth","toUTCDateTime","getSeconds","getMilliseconds","toInvariantTime","staticDate","isRecurringException","isRecurring","groupResources","group","groups_1","_loop_1","find","r","name","push","findMaster","data","headId","isMaster","id","currentEvent","buildException","headEvent","copy","isException","maxDate","Math","max","minDate","min","intersects","startTime","endTime","periodStart","periodEnd","inclusive","roundAllDayEnd","_a","startDate","stripTime","endDate","addDays","defaultModelFields","startTimezone","originalStart","endTimezone","title","description","recurrenceExceptions","getModelFields","modelFields","isInTimeRange","toSchedulerGroups","groupedResources","flat","index","reduce","all","res","concat","map","valueField","colorField","multiple","toSchedulerResources","generateResourceFields","groups","defaultFields","isBlank","isNullOrEmptyString","trim","setTime","origin","candidate","getDataIdx","dataIdx","extractGroups","dataItem","flatGroupsReducer","acc","items","match","expected","actual","Array","isArray","indexOf","findLeafResource","extractResourceFields","extractResources","resourceIndex","itemResources","resourceIdx","values","valueIndex","itemResource","text","textField","color","shallowCompare","JSON","stringify","findMissing","orderNumbers","numbers","slice","sort","a","b","_","calculateOrder","current","slots","ignoreIsAllDay","slot","sorted","props","fit","range","order","splice","mapSlotsToItems","mapItemsToSlots","noop","_args","findFirstItem","next","_ref","findNextItem","ref","backwards","filtered","filter","dir","currentIndex","findIndex","Boolean","uid","occurrenceId","orderSort"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { getDate } from '@progress/kendo-date-math';\nimport { toGroupResources, toFlatGroupResources } from '../views/common/utils';\nimport { getter, setter, clone, cloneDate } from '@progress/kendo-react-common';\nimport { \n// OCCURRENCE_ID,\nDEFAULT_ID } from '../constants';\nimport { orderBy } from '@progress/kendo-data-query';\n/** @hidden */\nexport var first = function (arr) { return arr[0]; };\n/** @hidden */\nexport var last = function (arr) { return arr[arr.length - 1]; };\n/** @hidden */\nexport var isMultiDay = function (item) {\n    var result = (item.end.getTime() - item.start.getTime()) > new Date(0).setHours(24);\n    return result;\n};\n/** @hidden */\nexport var isGroupped = function (resources) {\n    var set = new Set();\n    resources.forEach(function (resource) {\n        set.add(resource.field);\n    });\n    return set.size === resources.length;\n};\n/**\n * @hidden\n */\nexport function formatEventTime(intl, start, end, isAllDay) {\n    var startTimeFormat = { skeleton: 'yMMMMEEEEdhm' };\n    var startDateFormat = { skeleton: 'yMMMMEEEEd' };\n    var endFormat = 't';\n    return isAllDay ?\n        \"\" + intl.formatDate(start, startDateFormat) :\n        intl.formatDate(start, startTimeFormat) + \"\\u2013\" + intl.formatDate(end, endFormat);\n}\n/**\n * @hidden\n * TODO Move to date-math\n */\nexport var addUTCDays = function (date, offset) {\n    var newDate = new Date(date.getTime());\n    newDate.setUTCDate(newDate.getUTCDate() + offset);\n    return newDate;\n};\n/** @hidden */\nexport function dateWithTime(target, time) {\n    return new Date(target.getFullYear(), target.getMonth(), target.getDate(), time.getHours(), time.getMinutes());\n}\n/**\n * @hidden\n */\nexport var getToday = function () { return getDate(new Date()); };\n// Introduce max depth doe to Maximum call stack size exceeded when react <body />\n// The element.closest() approach is not available due to browser support issues.\n/** @hidden */\nexport var slotDive = function (x, y, maxDepth, level) {\n    if (level === void 0) { level = 0; }\n    if (level === maxDepth) {\n        return null;\n    }\n    var result = null;\n    var element = document.elementFromPoint(x, y);\n    if (!element) {\n        return result;\n    }\n    var isSlot = element.getAttribute('data-slot') === 'true';\n    if (isSlot) {\n        return element;\n    }\n    else {\n        var oldPointerEvents = element.style.pointerEvents;\n        element.style.pointerEvents = 'none';\n        result = slotDive(x, y, maxDepth, level + 1);\n        element.style.pointerEvents = oldPointerEvents;\n    }\n    return result;\n};\n/**\n * @hidden\n */\nexport var getField = function (obj, field) { return getter(field)(obj); };\n/**\n * @hidden\n */\nexport var setField = function (obj, field, value) {\n    if (!field) {\n        return;\n    }\n    return setter(field)(obj, value);\n};\n/**\n * @hidden\n */\nexport function assignField(target, source, field) {\n    setField(target, field, getField(source, field));\n}\n/**\n * @hidden\n */\nexport function assignFields(target, source) {\n    var fields = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        fields[_i - 2] = arguments[_i];\n    }\n    for (var idx = 0; idx < fields.length; idx++) {\n        assignField(target, source, fields[idx]);\n    }\n}\n/**\n * @hidden\n */\nexport var isPresent = function (value) { return value !== null && value !== undefined; };\n/**\n * @hidden\n */\nexport var isRecurringMaster = function (event) { return event.recurrenceRule && !isPresent(event.recurrenceId); };\n//  TODO: move to date-math\n/** @hidden */\nexport function toUTCDate(localDate) {\n    return new Date(Date.UTC(localDate.getFullYear(), localDate.getMonth(), localDate.getDate()));\n}\n// TODO: move to date-math\n/** @hidden */\nexport function getUTCDate(utcDate) {\n    return new Date(Date.UTC(utcDate.getUTCFullYear(), utcDate.getUTCMonth(), utcDate.getUTCDate()));\n}\n// TODO: move to date-math\n/** @hidden */\nexport function toUTCDateTime(localDate) {\n    return new Date(Date.UTC(localDate.getFullYear(), localDate.getMonth(), localDate.getDate(), localDate.getHours(), localDate.getMinutes(), localDate.getSeconds(), localDate.getMilliseconds()));\n}\n/** @hidden */\nexport function toInvariantTime(date) {\n    var staticDate = new Date(1980, 1, 1, 0, 0, 0);\n    if (date) {\n        staticDate.setHours(date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\n    }\n    return staticDate;\n}\n/** @hidden */\nexport function isRecurringException(event) {\n    return event && isPresent(event.recurrenceId) && !event.recurrenceRule;\n}\n/**\n * @hidden\n */\nexport var isRecurring = function (event, fields) {\n    var recurrenceId = getter(fields.recurrenceId || 'recurrenceId')(event);\n    var recurrenceRule = getter(fields.recurrenceRule || 'recurrenceRule')(event);\n    return !!(recurrenceRule || recurrenceId);\n};\n/**\n * @hidden\n */\nexport var groupResources = function (group, resources) {\n    var result = [];\n    if (group && group.resources && group.resources.length) {\n        var groups_1 = group.resources;\n        var _loop_1 = function (idx) {\n            var resource = resources.find(function (r) { return r.name === groups_1[idx]; });\n            result.push(resource);\n        };\n        for (var idx = 0; idx < groups_1.length; idx++) {\n            _loop_1(idx);\n        }\n    }\n    return result;\n};\n/**\n * @hidden\n */\nexport var findMaster = function (event, fields, data) {\n    var headId = isMaster(event, fields) ? getField(event, fields.id) : getField(event, fields.recurrenceId);\n    return data.find(function (currentEvent) { return getField(currentEvent, fields.id) === headId; });\n};\n/**\n * @hidden\n */\nexport var isMaster = function (event, fields) {\n    var id = getField(event, fields.id);\n    var recurrenceId = getField(event, fields.recurrenceId);\n    var recurrenceRule = getField(event, fields.recurrenceRule);\n    return !!(id && recurrenceRule && (recurrenceId === undefined || recurrenceId === null));\n};\n/**\n * @hidden\n */\nexport var buildException = function (event, fields, data) {\n    var headEvent = findMaster(event, fields, data);\n    var copy = clone(event);\n    assignField(copy, headEvent, fields.id);\n    if (fields.id !== undefined) {\n        setField(copy, fields.id, DEFAULT_ID);\n    }\n    if (fields.recurrenceRule !== undefined) {\n        setField(copy, fields.recurrenceRule, undefined);\n    }\n    if (fields.recurrenceId !== undefined) {\n        setField(copy, fields.recurrenceId, getField(headEvent, fields.id));\n    }\n    return copy;\n};\n/**\n * @hidden\n */\nexport var isException = function (event, fields) {\n    return isPresent(getField(event, fields.recurrenceId)) && !getField(event, fields.recurrenceRule);\n};\nvar maxDate = function (x, y) { return Math.max(x.getTime(), y.getTime()); };\nvar minDate = function (x, y) { return Math.min(x.getTime(), y.getTime()); };\n/** @hidden */\nexport var intersects = function (startTime, endTime, periodStart, periodEnd, inclusive) {\n    if (inclusive === void 0) { inclusive = false; }\n    return inclusive\n        ? maxDate(endTime, periodEnd) - minDate(startTime, periodStart) <=\n            (endTime.getTime() - startTime.getTime()) + (periodEnd.getTime() - periodStart.getTime())\n        : maxDate(endTime, periodEnd) - minDate(startTime, periodStart) <\n            (endTime.getTime() - startTime.getTime()) + (periodEnd.getTime() - periodStart.getTime());\n};\n/** @hidden */\nexport var roundAllDayEnd = function (_a) {\n    var start = _a.start, end = _a.end;\n    var startDate = start.stripTime();\n    var endDate = end.stripTime();\n    return endDate.getTime() !== end.getTime() || startDate.getTime() === endDate.getTime() ? endDate.addDays(1) : endDate;\n};\n/**\n * @hidden\n */\nexport var defaultModelFields = {\n    id: 'id',\n    start: 'start',\n    startTimezone: 'startTimezone',\n    originalStart: 'originalStart',\n    end: 'end',\n    endTimezone: 'endTimezone',\n    isAllDay: 'isAllDay',\n    title: 'title',\n    description: 'description',\n    recurrenceRule: 'recurrenceRule',\n    recurrenceId: 'recurrenceId',\n    recurrenceExceptions: 'recurrenceExceptions'\n};\n/** @hidden */\nexport var getModelFields = function (modelFields) {\n    return { fields: __assign({}, defaultModelFields, modelFields) };\n};\n/** @hidden */\nexport var isInTimeRange = function (date, min, max) {\n    return ((min.getHours() < date.getHours()) || (min.getHours() === date.getHours() && min.getMinutes() <= date.getMinutes()))\n        && ((date.getHours() < max.getHours()) || (max.getHours() === date.getHours() && date.getMinutes() < max.getMinutes()));\n};\n// /** @hidden */\n// export const generateGroups = (\n//     groupIndex: string | null,\n//     nextGroupIndex: string | null,\n//     groups: any[],\n//     group: SchedulerGroup | undefined,\n//     resources: SchedulerResource[] = []\n// ) => {\n//     if (!groupIndex || !nextGroupIndex) { return []; }\n//     const groupedResources = toGroupResources(group, resources);\n//     const flat = toFlatGroupResources(groupedResources);\n//     return groups.map(g => g.index === Number(groupIndex)\n//         ? { index: Number((nextGroupIndex)), resources: flat[Number(nextGroupIndex)] }\n//         : g);\n// };\n/** @hidden */\nexport var toSchedulerGroups = function (group, resources) {\n    var groupedResources = toGroupResources(group, resources);\n    var flat = toFlatGroupResources(groupedResources);\n    if (flat.length === 1) {\n        return [{\n                index: 0,\n                // resources: []\n                resources: (resources || [])\n                    .reduce(function (all, res) { return all.concat(res.data\n                    .map(function (item) { return (__assign({}, item, { field: res.field, valueField: res.valueField, colorField: res.colorField, multiple: res.multiple })); })); }, [])\n            }];\n    }\n    else {\n        return flat.map(function (res, index) { return ({\n            index: index,\n            resources: res\n        }); });\n    }\n};\n/** @hidden */\nexport var toSchedulerResources = function (resources) {\n    return (resources || []).reduce(function (all, res) { return all.concat(res.data.map(function (item) { return (__assign({}, item, { field: res.field, valueField: res.valueField, colorField: res.colorField, multiple: res.multiple })); })); }, []);\n};\n/** @hidden */\nexport var generateResourceFields = function (groups, defaultFields) {\n    if (!groups || !groups.length) {\n        return defaultFields;\n    }\n    var result = {};\n    groups.forEach(function (group) {\n        group.resources.forEach(function (resource) {\n            if (result[resource.field] === undefined) {\n                result[resource.field] = resource[resource.valueField];\n            }\n        });\n    });\n    return result;\n};\n/**\n * @hidden\n *\n * TODO: Move to @progress/kendo-common\n */\nexport var isBlank = function (value) { return value === null || value === undefined; };\n/**\n * @hidden\n *\n * TODO: Move to @progress/kendo-common\n */\nexport var isNullOrEmptyString = function (value) { return isBlank(value) || (value.trim && value.trim().length === 0); };\n/**\n * @hidden\n */\nexport var setTime = function (origin, candidate) {\n    var date = cloneDate(origin);\n    date.setHours(candidate.getHours(), candidate.getMinutes(), candidate.getSeconds(), candidate.getMilliseconds());\n    return date;\n};\nfunction getDataIdx(value, resource) {\n    var data = resource.data;\n    for (var dataIdx = 0; dataIdx < data.length; dataIdx++) {\n        if (getField(data[dataIdx], resource.valueField) === value) {\n            return dataIdx;\n        }\n    }\n    return 0;\n}\n/** @hidden */\nexport var extractGroups = function (dataItem, fields, group, resources) {\n    var groupedResources = toGroupResources(group, resources);\n    var flat = toFlatGroupResources(groupedResources);\n    var flatGroupsReducer = function (acc, items, index) {\n        var match = true;\n        items.forEach(function (item) {\n            var expected = item[item.valueField];\n            var actual = dataItem[fields[item.field] || item.field];\n            if (Array.isArray(actual)) {\n                match = match && actual.indexOf(expected) >= 0;\n            }\n            else {\n                match = match && actual === expected;\n            }\n        });\n        if (match) {\n            return acc.concat([{ index: index, resources: items }]);\n        }\n        else {\n            return acc;\n        }\n    };\n    return flat.reduce(flatGroupsReducer, []);\n};\nvar findLeafResource = function (level) {\n    if (level === void 0) { level = 0; }\n    return findLeafResource(level + 1);\n};\n/** @hidden */\nexport var extractResourceFields = function (dataItem, fields, resources) {\n    var result = {};\n    if (!resources || !resources.length) {\n        return result;\n    }\n    resources.forEach(function (resource) {\n        var match = resource.data.find(function (item) { return item.value === dataItem[fields[resource.field] || resource.field]; });\n        if (match) {\n            result[resource.field] = match.value;\n        }\n    });\n    return result;\n};\n/** @hidden */\nexport var extractResources = function (dataItem, fields, resources) {\n    if (resources === void 0) { resources = []; }\n    var resourceIndex = 0;\n    var itemResources = [];\n    for (var resourceIdx = 0; resourceIdx < resources.length; resourceIdx++) {\n        var resource = resources[resourceIdx];\n        var values = getField(dataItem, fields[resource.field] || resource.field);\n        if (!Array.isArray(values)) {\n            values = [values];\n        }\n        for (var valueIndex = 0; valueIndex < values.length; valueIndex++) {\n            if (values[valueIndex] !== undefined) {\n                var dataIdx = getDataIdx(values[valueIndex], resource);\n                var data = resource.data[dataIdx];\n                var itemResource = {\n                    text: getField(data, resource.textField),\n                    color: getField(data, resource.colorField),\n                    value: getField(data, resource.valueField)\n                };\n                itemResources.push(__assign({}, itemResource, { index: resourceIndex }));\n            }\n            resourceIndex++;\n        }\n    }\n    return itemResources;\n};\n// Change from JSON.stringify to recursive compare! use clone\n/** @hidden */\nexport var shallowCompare = function (x, y) { return JSON.stringify(x) === JSON.stringify(y); };\n/** @hidden */\nexport var findMissing = function (orderNumbers) {\n    var result = 0;\n    var numbers = orderNumbers.slice();\n    // Array.find is also O(n)\n    numbers.sort(function (a, b) { return a - b; }).forEach(function (_, index) {\n        if (numbers[index] === index) {\n            result = index + 1;\n        }\n    });\n    return result;\n};\n/** @hidden */\nexport var calculateOrder = function (current, items, slots, ignoreIsAllDay) {\n    if (ignoreIsAllDay === void 0) { ignoreIsAllDay = false; }\n    var result;\n    ;\n    slots.forEach(function (slot) {\n        var orderNumbers = [];\n        var sorted = items.sort(function (a, b) { return a.props.start.getTime() - b.props.start.getTime(); });\n        sorted.forEach(function (item) {\n            var fit = (ignoreIsAllDay || (item.props.isAllDay === slot.current.props.isAllDay))\n                && item.props.range.index === slot.current.props.range.index\n                && item.props.group.index === slot.current.props.group.index\n                && intersects(item.props.start, item.props.end, slot.current.props.start, slot.current.props.end);\n            if (fit) {\n                var order = findMissing(orderNumbers);\n                if (item === current && result === undefined) {\n                    result = order;\n                }\n                orderNumbers.splice(order, 0, order);\n            }\n        });\n    });\n    return result;\n};\n// TODO: REVISIT\n/** @hidden */\nexport var mapSlotsToItems = function (items, slots, ignoreIsAllDay) {\n    if (ignoreIsAllDay === void 0) { ignoreIsAllDay = false; }\n    // Clear\n    slots.forEach(function (slot) { return slot.items.splice(0, slot.items.length); });\n    // Populate\n    slots.forEach(function (slot) {\n        var orderNumbers = [];\n        items.forEach(function (item) {\n            var fit = (ignoreIsAllDay || (item.isAllDay === slot.isAllDay))\n                && item.range.index === slot.range.index\n                && item.group.index === slot.group.index\n                && intersects(item.start, item.end, slot.start, slot.end);\n            if (fit) {\n                var order = findMissing(orderNumbers);\n                if (item.order === null || item.order === undefined || item.order < order) {\n                    item.order = order;\n                }\n                orderNumbers.splice(item.order, 0, item.order);\n                slot.items.push(item);\n            }\n        });\n    });\n};\n// TODO: REVISIT\n/** @hidden */\nexport var mapItemsToSlots = function (items, slots, ignoreIsAllDay) {\n    if (ignoreIsAllDay === void 0) { ignoreIsAllDay = false; }\n    // Clear\n    items.forEach(function (item) { return item.slots.splice(0, item.slots.length); });\n    // Populate\n    items.forEach(function (item) {\n        slots.forEach(function (slot) {\n            var fit = (ignoreIsAllDay || (item.isAllDay === slot.isAllDay))\n                && item.range.index === slot.range.index\n                && item.group.index === slot.group.index\n                && intersects(item.start, item.end, slot.start, slot.end);\n            if (fit) {\n                item.slots.push(slot);\n            }\n        });\n    });\n};\n/** @hidden */\nexport var noop = function () {\n    var _args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        _args[_i] = arguments[_i];\n    }\n};\n/** @hidden */\nexport var findFirstItem = function (current) {\n    var next = current.props.items.find(function (i) { return i.order === 0; }) || current.props.items[0];\n    return next && next._ref.current;\n};\n/** @hidden */\nexport var findNextItem = function (ref, all, ignoreIsAllDay, backwards) {\n    if (ignoreIsAllDay === void 0) { ignoreIsAllDay = false; }\n    if (backwards === void 0) { backwards = false; }\n    var current = ref.current;\n    if (!current || !all) {\n        return null;\n    }\n    var filtered = all.filter(function (i) { return i.current !== null && i.current.element !== null; });\n    var sorted = orderBy(filtered, [\n        { field: 'current.props.group.index', dir: 'asc' },\n        { field: 'current.props.range.index', dir: 'asc' },\n        (ignoreIsAllDay ? { field: '' } : { field: 'current.props.isAllDay', dir: 'desc' }),\n        { field: 'current.props.start', dir: 'asc' }\n    ]);\n    var currentIndex = sorted\n        .findIndex(function (i) { return i.current !== null && Boolean(i.current.props.uid === current.props.uid\n        && ((i.current.props.occurrenceId === undefined) || i.current.props.occurrenceId === current.props.occurrenceId)\n        && (i.current.props.group.index === current.props.group.index)\n        && (i.current.props.range.index === current.props.range.index)\n        && (ignoreIsAllDay || i.current.props.isAllDay === current.props.isAllDay)); });\n    var next = sorted[currentIndex + (backwards ? -1 : 1)];\n    return next;\n};\n/**\n * @hidden\n */\nexport var orderSort = function (a, b) {\n    return (a.order || 0) - (b.order || 0);\n};\n"]},"metadata":{},"sourceType":"module"}