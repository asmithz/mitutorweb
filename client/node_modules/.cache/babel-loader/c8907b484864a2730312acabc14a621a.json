{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nimport * as React from 'react';\nimport { Keys } from '@progress/kendo-react-common';\nimport { DATA_ACTION } from '../Scheduler';\nimport { setField, getField, findFirstItem, isGroupped } from '../utils';\nimport { SchedulerForm } from '../components/SchedulerForm';\nimport { SchedulerViewSlot } from './SchedulerViewSlot';\nimport { SLOTS_FOCUS_ACTION, useEditable } from '../hooks';\nimport { useControlledState } from '../hooks/useControlledState';\nimport { useSchedulerFieldsContext } from '../context/SchedulerContext';\nimport { useSchedulerViewSlotsContext, useSchedulerViewSelectedSlotsContext, useSchedulerViewFocusedSlotsContext, useSchedulerViewItemsContext } from '../context';\nimport { SchedulerEditSlotContext } from '../context/SchedulerEditSlotContext';\nimport { SLOTS_SELECT_ACTION } from '../hooks/use-slots-selection';\n/* eslint-disable max-len */\n\n/**\n * Represents the default `editSlot` component rendered by the [KendoReact Scheduler component]({% slug overview_scheduler %}).\n *\n * This is a composite component of the [`SchedulerViewSlot`]({% slug api_scheduler_schedulerviewslot %}), extending it to allow creating an item inside the slot.\n */\n// tslint:enable:max-line-length\n\nexport var SchedulerEditSlot = React.forwardRef(function (props, ref) {\n  var _ref = props._ref,\n      onDataAction = props.onDataAction,\n      propViewSlot = props.viewSlot,\n      propForm = props.form,\n      propFormItem = props.formItem,\n      onFormItemChange = props.onFormItemChange,\n      viewSlotProps = __rest(props, [\"_ref\", \"onDataAction\", \"viewSlot\", \"form\", \"formItem\", \"onFormItemChange\"]);\n\n  var _a = React.useState(props.tabIndex),\n      tabIndex = _a[0],\n      setTabIndex = _a[1];\n\n  var slot = React.useRef(null);\n  var editableSlot = React.useRef(null);\n  React.useImperativeHandle(editableSlot, function () {\n    return {\n      props: props\n    };\n  });\n  React.useImperativeHandle(ref, function () {\n    return editableSlot.current;\n  });\n  React.useImperativeHandle(_ref, function () {\n    return slot.current;\n  });\n  var editable = useEditable(props.editable);\n  var fields = useSchedulerFieldsContext();\n  var slots = useSchedulerViewSlotsContext()[0];\n  var items = useSchedulerViewItemsContext()[0];\n\n  var _b = useSchedulerViewSelectedSlotsContext(),\n      selectedSlots = _b[0],\n      dispatchSlotsSelection = _b[1];\n\n  var _c = useSchedulerViewFocusedSlotsContext(),\n      dispatchFocusedSlots = _c[1];\n\n  var Form = propForm || defaultProps.form;\n  var ViewSlot = propViewSlot || defaultProps.viewSlot;\n\n  var _d = useControlledState(null, propFormItem, props.onFormItemChange),\n      formItem = _d[0],\n      setFormItem = _d[1];\n\n  var selected = selectedSlots.some(function (s) {\n    return Boolean(s.current && s.current.props.start.getTime() === props.start.getTime() && s.current.props.end.getTime() === props.end.getTime() && s.current.props.index === props.index && s.current.props.group.index === props.group.index && s.current.props.range.index === props.range.index && s.current.props.isAllDay === props.isAllDay);\n  });\n  var createDataItemFromSlot = React.useCallback(function () {\n    var dataItem = {};\n    setField(dataItem, fields.start, new Date(props.start.getTime()));\n    setField(dataItem, fields.end, new Date(props.end.getTime()));\n    setField(dataItem, fields.isAllDay, props.isAllDay);\n\n    if (props.group.resources.length) {\n      for (var idx = 0; idx < props.group.resources.length; idx++) {\n        var resource = props.group.resources[idx];\n\n        if (isGroupped(props.group.resources)) {\n          var value = getField(props.group.resources[idx], resource.valueField);\n          setField(dataItem, resource.field, resource.multiple ? [value] : value);\n        } else {\n          setField(dataItem, resource.field, resource.multiple ? [] : undefined);\n        }\n      }\n    }\n\n    return dataItem;\n  }, [fields.start, fields.end, fields.isAllDay, props.start, props.end, props.isAllDay, props.group.resources]); // Handlers\n  // Focus\n\n  var handleFocus = React.useCallback(function (event) {\n    if (editable.select) {\n      dispatchSlotsSelection({\n        type: SLOTS_SELECT_ACTION.select,\n        slot: slot\n      }, event.syntheticEvent);\n    }\n\n    if (props.onFocus) {\n      props.onFocus.call(undefined, event);\n    }\n  }, [dispatchSlotsSelection, editable.select, props.onFocus]); // Mouse\n\n  var handleDoubleClick = React.useCallback(function (event) {\n    if (editable.add) {\n      var dataItem = createDataItemFromSlot();\n      setFormItem(dataItem, event);\n    }\n\n    if (props.onDoubleClick) {\n      props.onDoubleClick.call(undefined, event);\n    }\n  }, [createDataItemFromSlot, editable.add, props.onDoubleClick, setFormItem]);\n  var handleKeyDown = React.useCallback(function (event) {\n    var nextItem;\n\n    switch (event.syntheticEvent.keyCode) {\n      case Keys.left:\n        if (!slots) {\n          return;\n        }\n\n        event.syntheticEvent.preventDefault();\n        dispatchFocusedSlots({\n          type: SLOTS_FOCUS_ACTION.left,\n          slot: slot\n        }, event.syntheticEvent);\n        break;\n\n      case Keys.right:\n        if (!slots) {\n          return;\n        }\n\n        event.syntheticEvent.preventDefault();\n        dispatchFocusedSlots({\n          type: SLOTS_FOCUS_ACTION.right,\n          slot: slot\n        }, event.syntheticEvent);\n        break;\n\n      case Keys.up:\n        if (!slots) {\n          return;\n        }\n\n        event.syntheticEvent.preventDefault();\n        dispatchFocusedSlots({\n          type: SLOTS_FOCUS_ACTION.up,\n          slot: slot\n        }, event.syntheticEvent);\n        break;\n\n      case Keys.down:\n        if (!slots) {\n          return;\n        }\n\n        event.syntheticEvent.preventDefault();\n        dispatchFocusedSlots({\n          type: SLOTS_FOCUS_ACTION.down,\n          slot: slot\n        }, event.syntheticEvent);\n        break;\n\n      case Keys.enter:\n        if (!slots || !editable.add) {\n          return;\n        }\n\n        var dataItem = createDataItemFromSlot();\n        setFormItem(dataItem);\n        break;\n\n      case Keys.tab:\n        nextItem = findFirstItem(event.target);\n        break;\n\n      default:\n        break;\n    }\n\n    if (nextItem) {\n      event.syntheticEvent.preventDefault();\n\n      if (nextItem.element) {\n        nextItem.element.focus();\n      }\n    }\n  }, [createDataItemFromSlot, dispatchFocusedSlots, editable.add, setFormItem, slots]);\n  var handleEditFormSubmit = React.useCallback(function (event) {\n    if (onDataAction) {\n      onDataAction.call(undefined, {\n        type: DATA_ACTION.create,\n        series: false,\n        dataItem: event.value\n      }, event);\n    }\n\n    setFormItem(null, event.syntheticEvent);\n  }, [onDataAction, setFormItem]);\n  var handleEditFormCancel = React.useCallback(function (event) {\n    setFormItem(null, event.syntheticEvent);\n  }, [setFormItem]);\n  var handleEditFormClose = React.useCallback(function (event) {\n    setFormItem(null, event);\n  }, [setFormItem]);\n  var handleFormItemChange = React.useCallback(function (value, event) {\n    if (!setFormItem) {\n      return;\n    }\n\n    setFormItem(value, event);\n  }, [setFormItem]);\n  React.useEffect(function () {\n    var isFirst = slots.length && slots[0].current === slot.current;\n    setTabIndex(props.tabIndex !== undefined ? props.tabIndex === null ? undefined : props.tabIndex : selectedSlots.length === 0 ? isFirst && items.length === 0 ? 0 : undefined : undefined);\n  }, [items, props.tabIndex, selectedSlots.length, slots]);\n  return React.createElement(SchedulerEditSlotContext, {\n    props: props,\n    form: [formItem, handleFormItemChange]\n  }, React.createElement(ViewSlot, __assign({}, viewSlotProps, {\n    _ref: slot,\n    selected: selected,\n    tabIndex: tabIndex,\n    // Focus\n    onFocus: handleFocus,\n    // Mouse\n    onDoubleClick: handleDoubleClick,\n    // Keyboard\n    onKeyDown: handleKeyDown\n  })), formItem && React.createElement(Form, {\n    dataItem: formItem,\n    onSubmit: handleEditFormSubmit,\n    onClose: handleEditFormClose,\n    onCancel: handleEditFormCancel\n  }));\n});\nvar defaultProps = {\n  viewSlot: SchedulerViewSlot,\n  form: SchedulerForm\n};\nSchedulerEditSlot.defaultProps = defaultProps;\nSchedulerEditSlot.displayName = 'KendoReactSchedulerEditSlot';","map":{"version":3,"sources":["/home/asmith/taller/proyecto1/proyecto-taller/client/node_modules/@progress/kendo-react-scheduler/dist/es/slots/SchedulerEditSlot.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","React","Keys","DATA_ACTION","setField","getField","findFirstItem","isGroupped","SchedulerForm","SchedulerViewSlot","SLOTS_FOCUS_ACTION","useEditable","useControlledState","useSchedulerFieldsContext","useSchedulerViewSlotsContext","useSchedulerViewSelectedSlotsContext","useSchedulerViewFocusedSlotsContext","useSchedulerViewItemsContext","SchedulerEditSlotContext","SLOTS_SELECT_ACTION","SchedulerEditSlot","forwardRef","props","ref","_ref","onDataAction","propViewSlot","viewSlot","propForm","form","propFormItem","formItem","onFormItemChange","viewSlotProps","_a","useState","tabIndex","setTabIndex","slot","useRef","editableSlot","useImperativeHandle","current","editable","fields","slots","items","_b","selectedSlots","dispatchSlotsSelection","_c","dispatchFocusedSlots","Form","defaultProps","ViewSlot","_d","setFormItem","selected","some","Boolean","start","getTime","end","index","group","range","isAllDay","createDataItemFromSlot","useCallback","dataItem","Date","resources","idx","resource","value","valueField","field","multiple","undefined","handleFocus","event","select","type","syntheticEvent","onFocus","handleDoubleClick","add","onDoubleClick","handleKeyDown","nextItem","keyCode","left","preventDefault","right","up","down","enter","tab","target","element","focus","handleEditFormSubmit","create","series","handleEditFormCancel","handleEditFormClose","handleFormItemChange","useEffect","isFirst","createElement","onKeyDown","onSubmit","onClose","onCancel","displayName"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport * as React from 'react';\nimport { Keys } from '@progress/kendo-react-common';\nimport { DATA_ACTION } from '../Scheduler';\nimport { setField, getField, findFirstItem, isGroupped } from '../utils';\nimport { SchedulerForm } from '../components/SchedulerForm';\nimport { SchedulerViewSlot } from './SchedulerViewSlot';\nimport { SLOTS_FOCUS_ACTION, useEditable } from '../hooks';\nimport { useControlledState } from '../hooks/useControlledState';\nimport { useSchedulerFieldsContext } from '../context/SchedulerContext';\nimport { useSchedulerViewSlotsContext, useSchedulerViewSelectedSlotsContext, useSchedulerViewFocusedSlotsContext, useSchedulerViewItemsContext } from '../context';\nimport { SchedulerEditSlotContext } from '../context/SchedulerEditSlotContext';\nimport { SLOTS_SELECT_ACTION } from '../hooks/use-slots-selection';\n/* eslint-disable max-len */\n/**\n * Represents the default `editSlot` component rendered by the [KendoReact Scheduler component]({% slug overview_scheduler %}).\n *\n * This is a composite component of the [`SchedulerViewSlot`]({% slug api_scheduler_schedulerviewslot %}), extending it to allow creating an item inside the slot.\n */\n// tslint:enable:max-line-length\nexport var SchedulerEditSlot = React.forwardRef(function (props, ref) {\n    var _ref = props._ref, onDataAction = props.onDataAction, propViewSlot = props.viewSlot, propForm = props.form, propFormItem = props.formItem, onFormItemChange = props.onFormItemChange, viewSlotProps = __rest(props, [\"_ref\", \"onDataAction\", \"viewSlot\", \"form\", \"formItem\", \"onFormItemChange\"]);\n    var _a = React.useState(props.tabIndex), tabIndex = _a[0], setTabIndex = _a[1];\n    var slot = React.useRef(null);\n    var editableSlot = React.useRef(null);\n    React.useImperativeHandle(editableSlot, function () { return ({ props: props }); });\n    React.useImperativeHandle(ref, function () { return editableSlot.current; });\n    React.useImperativeHandle(_ref, function () { return slot.current; });\n    var editable = useEditable(props.editable);\n    var fields = useSchedulerFieldsContext();\n    var slots = useSchedulerViewSlotsContext()[0];\n    var items = useSchedulerViewItemsContext()[0];\n    var _b = useSchedulerViewSelectedSlotsContext(), selectedSlots = _b[0], dispatchSlotsSelection = _b[1];\n    var _c = useSchedulerViewFocusedSlotsContext(), dispatchFocusedSlots = _c[1];\n    var Form = propForm || defaultProps.form;\n    var ViewSlot = propViewSlot || defaultProps.viewSlot;\n    var _d = useControlledState(null, propFormItem, props.onFormItemChange), formItem = _d[0], setFormItem = _d[1];\n    var selected = selectedSlots.some(function (s) { return Boolean(s.current\n        && s.current.props.start.getTime() === props.start.getTime()\n        && s.current.props.end.getTime() === props.end.getTime()\n        && s.current.props.index === props.index\n        && s.current.props.group.index === props.group.index\n        && s.current.props.range.index === props.range.index\n        && s.current.props.isAllDay === props.isAllDay); });\n    var createDataItemFromSlot = React.useCallback(function () {\n        var dataItem = {};\n        setField(dataItem, fields.start, new Date(props.start.getTime()));\n        setField(dataItem, fields.end, new Date(props.end.getTime()));\n        setField(dataItem, fields.isAllDay, props.isAllDay);\n        if (props.group.resources.length) {\n            for (var idx = 0; idx < props.group.resources.length; idx++) {\n                var resource = props.group.resources[idx];\n                if (isGroupped(props.group.resources)) {\n                    var value = getField(props.group.resources[idx], resource.valueField);\n                    setField(dataItem, resource.field, resource.multiple ? [value] : value);\n                }\n                else {\n                    setField(dataItem, resource.field, resource.multiple ? [] : undefined);\n                }\n            }\n        }\n        return dataItem;\n    }, [\n        fields.start,\n        fields.end,\n        fields.isAllDay,\n        props.start,\n        props.end,\n        props.isAllDay,\n        props.group.resources\n    ]);\n    // Handlers\n    // Focus\n    var handleFocus = React.useCallback(function (event) {\n        if (editable.select) {\n            dispatchSlotsSelection({\n                type: SLOTS_SELECT_ACTION.select,\n                slot: slot\n            }, event.syntheticEvent);\n        }\n        if (props.onFocus) {\n            props.onFocus.call(undefined, event);\n        }\n    }, [\n        dispatchSlotsSelection,\n        editable.select,\n        props.onFocus\n    ]);\n    // Mouse\n    var handleDoubleClick = React.useCallback(function (event) {\n        if (editable.add) {\n            var dataItem = createDataItemFromSlot();\n            setFormItem(dataItem, event);\n        }\n        if (props.onDoubleClick) {\n            props.onDoubleClick.call(undefined, event);\n        }\n    }, [\n        createDataItemFromSlot,\n        editable.add,\n        props.onDoubleClick,\n        setFormItem\n    ]);\n    var handleKeyDown = React.useCallback(function (event) {\n        var nextItem;\n        switch (event.syntheticEvent.keyCode) {\n            case Keys.left:\n                if (!slots) {\n                    return;\n                }\n                event.syntheticEvent.preventDefault();\n                dispatchFocusedSlots({ type: SLOTS_FOCUS_ACTION.left, slot: slot }, event.syntheticEvent);\n                break;\n            case Keys.right:\n                if (!slots) {\n                    return;\n                }\n                event.syntheticEvent.preventDefault();\n                dispatchFocusedSlots({ type: SLOTS_FOCUS_ACTION.right, slot: slot }, event.syntheticEvent);\n                break;\n            case Keys.up:\n                if (!slots) {\n                    return;\n                }\n                event.syntheticEvent.preventDefault();\n                dispatchFocusedSlots({ type: SLOTS_FOCUS_ACTION.up, slot: slot }, event.syntheticEvent);\n                break;\n            case Keys.down:\n                if (!slots) {\n                    return;\n                }\n                event.syntheticEvent.preventDefault();\n                dispatchFocusedSlots({ type: SLOTS_FOCUS_ACTION.down, slot: slot }, event.syntheticEvent);\n                break;\n            case Keys.enter:\n                if (!slots || !editable.add) {\n                    return;\n                }\n                var dataItem = createDataItemFromSlot();\n                setFormItem(dataItem);\n                break;\n            case Keys.tab:\n                nextItem = findFirstItem(event.target);\n                break;\n            default:\n                break;\n        }\n        if (nextItem) {\n            event.syntheticEvent.preventDefault();\n            if (nextItem.element) {\n                nextItem.element.focus();\n            }\n        }\n    }, [createDataItemFromSlot, dispatchFocusedSlots, editable.add, setFormItem, slots]);\n    var handleEditFormSubmit = React.useCallback(function (event) {\n        if (onDataAction) {\n            onDataAction.call(undefined, {\n                type: DATA_ACTION.create,\n                series: false,\n                dataItem: event.value\n            }, event);\n        }\n        setFormItem(null, event.syntheticEvent);\n    }, [\n        onDataAction,\n        setFormItem\n    ]);\n    var handleEditFormCancel = React.useCallback(function (event) {\n        setFormItem(null, event.syntheticEvent);\n    }, [setFormItem]);\n    var handleEditFormClose = React.useCallback(function (event) {\n        setFormItem(null, event);\n    }, [setFormItem]);\n    var handleFormItemChange = React.useCallback(function (value, event) {\n        if (!setFormItem) {\n            return;\n        }\n        setFormItem(value, event);\n    }, [setFormItem]);\n    React.useEffect(function () {\n        var isFirst = slots.length && slots[0].current === slot.current;\n        setTabIndex(props.tabIndex !== undefined\n            ? props.tabIndex === null\n                ? undefined\n                : props.tabIndex\n            : selectedSlots.length === 0\n                ? isFirst && items.length === 0\n                    ? 0\n                    : undefined\n                : undefined);\n    }, [items, props.tabIndex, selectedSlots.length, slots]);\n    return (React.createElement(SchedulerEditSlotContext, { props: props, form: [formItem, handleFormItemChange] },\n        React.createElement(ViewSlot, __assign({}, viewSlotProps, { _ref: slot, selected: selected, tabIndex: tabIndex, \n            // Focus\n            onFocus: handleFocus, \n            // Mouse\n            onDoubleClick: handleDoubleClick, \n            // Keyboard\n            onKeyDown: handleKeyDown })),\n        (formItem) && (React.createElement(Form, { dataItem: formItem, onSubmit: handleEditFormSubmit, onClose: handleEditFormClose, onCancel: handleEditFormCancel }))));\n});\nvar defaultProps = {\n    viewSlot: SchedulerViewSlot,\n    form: SchedulerForm\n};\nSchedulerEditSlot.defaultProps = defaultProps;\nSchedulerEditSlot.displayName = 'KendoReactSchedulerEditSlot';\n"]},"metadata":{},"sourceType":"module"}