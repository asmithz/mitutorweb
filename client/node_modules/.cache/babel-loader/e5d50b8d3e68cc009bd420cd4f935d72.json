{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, noop, useRtl, getTabIndex, Keys, guid, createPropsContext, usePropsContext } from '@progress/kendo-react-common';\nimport { Popup } from '@progress/kendo-react-popup';\nimport { useLocalization } from '@progress/kendo-react-intl';\nimport { TreeView } from '@progress/kendo-react-treeview';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './../package-metadata';\nimport { getItemValue, areSame, matchTags } from '../common/utils';\nimport { useDropdownWidth } from './../DropDownTree/useDropdownWidth';\nimport { ListNoData } from './../DropDownTree/ListNoData';\nimport { messages, clear, nodata } from './../messages';\nimport { FloatingLabel } from '@progress/kendo-react-labels';\nimport TagList from '../MultiSelect/TagList';\nvar VALIDATION_MESSAGE = 'Please select a value from the list!';\n\nvar toLevel = function (hierarchicalIndex) {\n  return hierarchicalIndex.split('_').map(function (i) {\n    return parseInt(i, 10);\n  });\n};\n\nvar getValidity = function (_a, hasValue) {\n  var validationMessage = _a.validationMessage,\n      valid = _a.valid,\n      required = _a.required;\n  return {\n    customError: validationMessage !== undefined,\n    valid: Boolean(valid !== undefined ? valid : !required || hasValue),\n    valueMissing: !hasValue\n  };\n};\n\nvar defaultProps = {\n  checkField: 'checkField',\n  checkIndeterminateField: 'checkIndeterminateField',\n  subItemsField: 'items',\n  popupSettings: {\n    animate: true,\n    width: '200px',\n    height: '200px'\n  },\n  required: false,\n  validityStyles: true\n};\n/**\n * Represents the PropsContext of the `MultiSelectTree` component.\n * Used for global configuration of all `MultiSelectTree` instances.\n *\n * For more information, refer to the [Dropdowns Props Context]({% slug props-context_dropdowns %}) article.\n */\n\nexport var MultiSelectTreePropsContext = createPropsContext();\n/**\n * Represents the MultiSelectTree component.\n *\n * Accepts properties of type [MultiSelectTreeProps]({% slug api_dropdowns_multiselecttreeprops %}).\n * Obtaining the `ref` returns an object of type [MultiSelectTreeHandle]({% slug api_dropdowns_multiselecttreehandle %}).\n */\n\nexport var MultiSelectTree = React.forwardRef(function (directProps, ref) {\n  var props = usePropsContext(MultiSelectTreePropsContext, directProps);\n  validatePackage(packageMetadata);\n  var componentGuid = React.useMemo(function () {\n    return guid();\n  }, []);\n  var id = props.id || componentGuid;\n  var _a = props.data,\n      data = _a === void 0 ? [] : _a,\n      dataItemKey = props.dataItemKey,\n      _b = props.popupSettings,\n      popupSettings = _b === void 0 ? {} : _b,\n      _c = props.style,\n      style = _c === void 0 ? {} : _c,\n      opened = props.opened,\n      disabled = props.disabled,\n      _d = props.onOpen,\n      onOpen = _d === void 0 ? noop : _d,\n      _e = props.onClose,\n      onClose = _e === void 0 ? noop : _e,\n      placeholder = props.placeholder,\n      label = props.label,\n      name = props.name,\n      _f = props.checkField,\n      checkField = _f === void 0 ? defaultProps.checkField : _f,\n      _g = props.checkIndeterminateField,\n      checkIndeterminateField = _g === void 0 ? defaultProps.checkIndeterminateField : _g,\n      _h = props.subItemsField,\n      subItemsField = _h === void 0 ? defaultProps.subItemsField : _h,\n      validationMessage = props.validationMessage,\n      valid = props.valid,\n      tags = props.tags,\n      value = props.value,\n      _j = props.required,\n      required = _j === void 0 ? defaultProps.required : _j,\n      _k = props.validityStyles,\n      validityStyles = _k === void 0 ? defaultProps.validityStyles : _k;\n  var tabIndex = getTabIndex(props.tabIndex, disabled);\n  var targetRef = React.useRef(null);\n  var elementRef = React.useRef(null);\n  var inputRef = React.useRef(null);\n  var selectRef = React.useRef(null);\n  var treeViewRef = React.useRef(null);\n  var skipFocusRef = React.useRef(false);\n  var tagsToRenderRef = React.useRef([]);\n  var popupRef = React.useRef(null);\n\n  var _l = React.useState(),\n      focusedTagState = _l[0],\n      setFocusedTagState = _l[1];\n\n  var _m = React.useState(false),\n      openState = _m[0],\n      setOpenState = _m[1];\n\n  var _o = React.useState(false),\n      focusedState = _o[0],\n      setFocusedState = _o[1];\n\n  var _p = React.useState(''),\n      filterState = _p[0],\n      setFilterState = _p[1];\n\n  var isOpen = opened !== undefined ? opened : openState;\n  var hasValue = Boolean(Array.isArray(value) && value.length);\n  var validity = getValidity({\n    validationMessage: validationMessage,\n    valid: valid,\n    required: required\n  }, hasValue);\n  var dir = useRtl(elementRef, props.dir);\n  var initialStyleWidth = popupSettings.width !== undefined ? popupSettings.width : style.width !== undefined ? style.width : defaultProps.popupSettings.width;\n  var popupWidth = useDropdownWidth(elementRef, initialStyleWidth);\n\n  var popupStyles = __assign({\n    width: popupWidth\n  }, dir !== undefined ? {\n    direction: dir\n  } : {});\n\n  var focus = React.useCallback(function () {\n    return elementRef.current && elementRef.current.focus();\n  }, []);\n  tagsToRenderRef.current = tags === undefined ? (value || []).map(function (item) {\n    return {\n      text: getItemValue(item, props.textField),\n      data: [item]\n    };\n  }) : tags.slice();\n  React.useImperativeHandle(targetRef, function () {\n    return {\n      props: props,\n      element: elementRef.current,\n      actionElement: elementRef.current,\n      focus: focus\n    };\n  });\n  React.useImperativeHandle(ref, function () {\n    return targetRef.current;\n  });\n  var setValidity = React.useCallback(function () {\n    if (selectRef.current && selectRef.current.setCustomValidity) {\n      selectRef.current.setCustomValidity(validity.valid ? '' : validationMessage === undefined ? VALIDATION_MESSAGE : validationMessage);\n    }\n  }, [validationMessage, validity]);\n  React.useEffect(setValidity);\n  React.useEffect(function () {\n    if (popupRef.current && isOpen) {\n      popupRef.current.setPosition(popupRef.current._popup);\n    }\n  }, [value, isOpen]);\n  var changeValue = React.useCallback(function (event, relatedItems, operation) {\n    if (props.onChange) {\n      var changeEvent = __assign({\n        items: relatedItems,\n        operation: operation\n      }, event);\n\n      props.onChange.call(undefined, changeEvent);\n    }\n  }, [props.onChange]);\n  var onChange = React.useCallback(function (event) {\n    if (areSame(event.item, value, dataItemKey) || !targetRef.current) {\n      return;\n    }\n\n    var item = event.item,\n        nativeEvent = event.nativeEvent,\n        syntheticEvent = event.syntheticEvent;\n    var ev = {\n      syntheticEvent: syntheticEvent,\n      nativeEvent: nativeEvent,\n      target: targetRef.current\n    };\n    changeValue(ev, [item], 'toggle');\n  }, [value, dataItemKey, changeValue]);\n  var openPopup = React.useCallback(function (event) {\n    if (!isOpen) {\n      if (onOpen) {\n        var openEvent = __assign({}, event);\n\n        onOpen.call(undefined, openEvent);\n      }\n\n      if (opened === undefined) {\n        setOpenState(true);\n      }\n    }\n  }, [isOpen, opened, onOpen]);\n  var closePopup = React.useCallback(function (event) {\n    if (isOpen) {\n      if (onClose) {\n        var closeEvent = __assign({}, event);\n\n        onClose.call(undefined, closeEvent);\n      }\n\n      if (opened === undefined) {\n        setOpenState(false);\n      }\n    }\n  }, [isOpen, opened, onClose]);\n  var switchFocus = React.useCallback(function (focusFn) {\n    skipFocusRef.current = true;\n    focusFn();\n    window.setTimeout(function () {\n      return skipFocusRef.current = false;\n    }, 0);\n  }, []);\n  var focusElement = React.useCallback(function (element) {\n    if (element) {\n      switchFocus(function () {\n        return element.focus();\n      });\n    }\n  }, [switchFocus]);\n  var onPopupOpened = React.useCallback(function () {\n    if (!focusedState && isOpen) {\n      closePopup({\n        target: targetRef.current\n      });\n    } else {\n      if (props.filterable) {\n        focusElement(inputRef.current);\n      } else {\n        focusElement(treeViewRef.current && treeViewRef.current.element);\n      }\n    }\n  }, [focusedState, isOpen, focusElement, closePopup, props.filterable]);\n  var onPopupClosed = React.useCallback(function () {\n    if (focusedState) {\n      // Move the focus from treeview to dropdown without triggering Focus or Blur events.\n      focusElement(elementRef.current);\n    }\n  }, [focusedState, focusElement]);\n  var onFocus = React.useCallback(function (event) {\n    if (!focusedState && !skipFocusRef.current) {\n      setFocusedState(true);\n\n      if (props.onFocus && targetRef.current) {\n        var focusEvent = {\n          syntheticEvent: event,\n          nativeEvent: event.nativeEvent,\n          target: targetRef.current\n        };\n        props.onFocus.call(undefined, focusEvent);\n      }\n    }\n  }, [focusedState, props.onFocus]);\n  var onBlur = React.useCallback(function (event) {\n    if (focusedState && !skipFocusRef.current && targetRef.current) {\n      setFocusedState(false);\n      var ev = {\n        syntheticEvent: event,\n        nativeEvent: event.nativeEvent,\n        target: targetRef.current\n      };\n\n      if (props.onBlur) {\n        var focusEvent = __assign({}, ev);\n\n        props.onBlur.call(undefined, focusEvent);\n      }\n\n      closePopup(ev);\n    }\n  }, [focusedState, props.onBlur, isOpen, opened, onClose]);\n  var onWrapperMouseDown = React.useCallback(function () {\n    if (focusedState) {\n      // moving focus from treeview to dropdown triggers Focus and Blur events.\n      switchFocus(noop);\n    }\n  }, [focusedState, switchFocus]);\n  var onWrapperClick = React.useCallback(function (event) {\n    if (!event.isDefaultPrevented() && targetRef.current) {\n      setFocusedState(true);\n      var ev = {\n        syntheticEvent: event,\n        nativeEvent: event.nativeEvent,\n        target: targetRef.current\n      };\n\n      if (!isOpen) {\n        openPopup(ev);\n      }\n    }\n  }, [isOpen, openPopup]);\n  var onWrapperKeyDown = React.useCallback(function (event) {\n    var keyCode = event.keyCode,\n        altKey = event.altKey;\n    var treeviewElement = treeViewRef.current && treeViewRef.current.element;\n\n    if (!targetRef.current || event.isDefaultPrevented() && inputRef.current === event.target) {\n      return;\n    }\n\n    var ev = {\n      syntheticEvent: event,\n      nativeEvent: event.nativeEvent,\n      target: targetRef.current\n    };\n\n    if (value && value.length > 0 && (keyCode === Keys.left || keyCode === Keys.right || keyCode === Keys.home || keyCode === Keys.end || keyCode === Keys.delete)) {\n      var tagsToRender = tagsToRenderRef.current;\n      var focusedIndex = focusedTagState ? tagsToRender.findIndex(function (t) {\n        return matchTags(t, focusedTagState, dataItemKey);\n      }) : -1;\n      var newFocusedTag = undefined;\n      var hasFocused = focusedIndex !== -1;\n\n      if (keyCode === Keys.left) {\n        if (hasFocused) {\n          focusedIndex = Math.max(0, focusedIndex - 1);\n        } else {\n          focusedIndex = tagsToRender.length - 1;\n        }\n\n        newFocusedTag = tagsToRender[focusedIndex];\n      } else if (keyCode === Keys.right) {\n        if (focusedIndex === tagsToRender.length - 1) {\n          newFocusedTag = undefined;\n        } else if (hasFocused) {\n          focusedIndex = Math.min(tagsToRender.length - 1, focusedIndex + 1);\n          newFocusedTag = tagsToRender[focusedIndex];\n        }\n      } else if (keyCode === Keys.home) {\n        newFocusedTag = tagsToRender[0];\n      } else if (keyCode === Keys.end) {\n        newFocusedTag = tagsToRender[tagsToRender.length - 1];\n      } else if (keyCode === Keys.delete) {\n        if (hasFocused) {\n          changeValue(ev, tagsToRender[focusedIndex].data, 'delete');\n        }\n      }\n\n      if (newFocusedTag !== focusedTagState) {\n        setFocusedTagState(newFocusedTag);\n      }\n    }\n\n    if (isOpen) {\n      if (keyCode === Keys.esc || altKey && keyCode === Keys.up) {\n        closePopup(ev);\n      } else if (treeviewElement && treeviewElement.querySelector('.k-state-focused') && (keyCode === Keys.up || keyCode === Keys.down || keyCode === Keys.left || keyCode === Keys.right || keyCode === Keys.home || keyCode === Keys.end)) {\n        if (keyCode === Keys.up && inputRef.current) {\n          var items = Array.from(treeviewElement.querySelectorAll('.k-treeview-item'));\n          var focusedItem = items.slice().reverse().find(function (i) {\n            return Boolean(i && i.querySelector('.k-state-focused'));\n          });\n\n          if (focusedItem && items.indexOf(focusedItem) === 0) {\n            return switchFocus(function () {\n              focusElement(inputRef.current);\n            });\n          }\n        }\n\n        switchFocus(noop);\n      } else if (keyCode === Keys.down) {\n        switchFocus(function () {\n          focusElement(inputRef.current || treeviewElement);\n        });\n      }\n    } else {\n      if (altKey && keyCode === Keys.down) {\n        openPopup(ev);\n      }\n    }\n  }, [isOpen, closePopup, focusElement, switchFocus, openPopup, focusedTagState, dataItemKey, value, changeValue]);\n  var onInputKeyDown = React.useCallback(function (event) {\n    var keyCode = event.keyCode,\n        altKey = event.altKey;\n\n    if (altKey || keyCode !== Keys.up && keyCode !== Keys.down) {\n      return;\n    }\n\n    event.preventDefault();\n    switchFocus(keyCode === Keys.up ? function () {\n      focusElement(elementRef.current);\n    } : function () {\n      focusElement(treeViewRef.current && treeViewRef.current.element);\n    });\n  }, [focusElement, switchFocus]);\n  var onClear = React.useCallback(function (event) {\n    if (!targetRef.current) {\n      return;\n    }\n\n    var ev = {\n      syntheticEvent: event,\n      nativeEvent: event.nativeEvent,\n      target: targetRef.current\n    };\n    changeValue(ev, [], 'clear');\n    closePopup(ev);\n    event.preventDefault();\n  }, [changeValue, closePopup]);\n  var onTagDelete = React.useCallback(function (itemsToRemove, event) {\n    closePopup({\n      target: targetRef.current\n    });\n\n    if (!focusedState) {\n      focusElement(inputRef.current);\n    }\n\n    changeValue({\n      syntheticEvent: event,\n      nativeEvent: event.nativeEvent,\n      target: targetRef.current\n    }, itemsToRemove, 'delete');\n  }, [changeValue, closePopup, focusElement, focusedState]);\n  var onExpand = React.useCallback(function (event) {\n    if (props.onExpandChange && targetRef.current) {\n      var item = event.item,\n          itemHierarchicalIndex = event.itemHierarchicalIndex,\n          nativeEvent = event.nativeEvent,\n          syntheticEvent = event.syntheticEvent;\n      var expandEvent = {\n        level: toLevel(itemHierarchicalIndex),\n        item: item,\n        nativeEvent: nativeEvent,\n        syntheticEvent: syntheticEvent,\n        target: targetRef.current\n      };\n      props.onExpandChange.call(undefined, expandEvent);\n    }\n  }, [props.onExpandChange]);\n  var onFilterChange = React.useCallback(function (event) {\n    if (props.onFilterChange && targetRef.current) {\n      var filterDesc = {\n        field: props.textField,\n        operator: 'contains',\n        value: event.target.value\n      };\n      var ev = {\n        filter: filterDesc,\n        syntheticEvent: event,\n        nativeEvent: event.nativeEvent,\n        target: targetRef.current\n      };\n      props.onFilterChange.call(undefined, ev);\n\n      if (props.filter === undefined) {\n        setFilterState(event.target.value);\n      }\n    }\n  }, [props.onFilterChange, props.filter, props.textField]);\n  var NoData = props.listNoData || ListNoData;\n  var localization = useLocalization();\n  var isValid = !validityStyles || validity.valid;\n  var multiselecttree = React.createElement(\"span\", {\n    className: classNames('k-widget k-dropdowntree', props.className, {\n      'k-state-focused': focusedState && !disabled,\n      'k-state-invalid': !isValid,\n      'k-state-disabled': disabled\n    }),\n    tabIndex: tabIndex,\n    accessKey: props.accessKey,\n    id: id,\n    style: label ? __assign({}, style, {\n      width: undefined\n    }) : style,\n    dir: dir,\n    ref: elementRef,\n    onKeyDown: disabled ? undefined : onWrapperKeyDown,\n    onMouseDown: onWrapperMouseDown,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    role: \"listbox\",\n    \"aria-haspopup\": \"true\",\n    \"aria-expanded\": isOpen,\n    \"aria-disabled\": disabled,\n    \"aria-label\": label,\n    \"aria-labelledby\": props.ariaLabelledBy,\n    \"aria-describedby\": props.ariaDescribedBy\n  }, React.createElement(\"span\", {\n    className: classNames('k-multiselect-wrap k-floatwrap', {\n      'k-state-focused': focusedState,\n      'k-state-disabled': disabled,\n      'k-state-invalid': !isValid\n    }),\n    onClick: disabled ? undefined : onWrapperClick\n  }, tagsToRenderRef.current.length > 0 && React.createElement(TagList, {\n    tag: props.tag,\n    onTagDelete: onTagDelete,\n    data: tagsToRenderRef.current,\n    guid: componentGuid,\n    focused: focusedTagState ? tagsToRenderRef.current.find(function (t) {\n      return matchTags(t, focusedTagState, dataItemKey);\n    }) : undefined\n  }), props.loading && React.createElement(\"span\", {\n    className: classNames('k-icon', {\n      'k-i-loading': props.loading\n    })\n  }), hasValue && !disabled && React.createElement(\"span\", {\n    onClick: onClear,\n    className: \"k-icon k-clear-value k-i-close\",\n    title: localization.toLanguageString(clear, messages[clear]),\n    role: \"button\",\n    tabIndex: -1,\n    onMouseDown: function (e) {\n      return e.preventDefault();\n    }\n  }), React.createElement(\"select\", {\n    name: name,\n    ref: selectRef,\n    tabIndex: -1,\n    \"aria-hidden\": true,\n    title: label,\n    style: {\n      opacity: 0,\n      width: 1,\n      border: 0,\n      zIndex: -1,\n      position: 'absolute',\n      left: '50%'\n    }\n  }, React.createElement(\"option\", {\n    value: props.valueMap ? props.valueMap.call(undefined, value) : value\n  }))), React.createElement(Popup, {\n    popupClass: popupSettings.popupClass,\n    className: classNames('k-list-container k-group k-reset k-popup-dropdowntree', popupSettings.className, {\n      'k-rtl': dir === 'rtl'\n    }),\n    style: popupStyles,\n    animate: popupSettings.animate,\n    anchor: elementRef.current,\n    show: isOpen,\n    onOpen: onPopupOpened,\n    onClose: onPopupClosed,\n    appendTo: popupSettings.appendTo,\n    ref: popupRef\n  }, props.filterable && React.createElement(\"span\", {\n    className: \"k-list-filter\"\n  }, React.createElement(\"input\", {\n    className: \"k-textbox\",\n    tabIndex: tabIndex,\n    ref: inputRef,\n    value: props.filter === undefined ? filterState : props.filter,\n    onChange: onFilterChange,\n    onKeyDown: onInputKeyDown\n  }), React.createElement(\"span\", {\n    className: \"k-icon k-i-zoom\"\n  })), data.length > 0 ? React.createElement(TreeView, {\n    ref: treeViewRef,\n    tabIndex: tabIndex,\n    data: data,\n    focusIdField: dataItemKey,\n    textField: props.textField,\n    checkField: checkField,\n    checkIndeterminateField: checkIndeterminateField,\n    expandField: props.expandField,\n    childrenField: subItemsField,\n    expandIcons: true,\n    onItemClick: onChange,\n    onCheckChange: onChange,\n    onExpandChange: onExpand,\n    checkboxes: true,\n    item: props.item\n  }) : React.createElement(NoData, null, localization.toLanguageString(nodata, messages[nodata]))));\n  return label ? React.createElement(FloatingLabel, {\n    label: label,\n    editorValue: hasValue,\n    editorPlaceholder: placeholder,\n    editorValid: isValid,\n    editorDisabled: disabled,\n    editorId: id,\n    style: {\n      width: style ? style.width : undefined\n    },\n    children: multiselecttree,\n    dir: dir\n  }) : multiselecttree;\n});\nvar propTypes = {\n  opened: PropTypes.bool,\n  disabled: PropTypes.bool,\n  dir: PropTypes.string,\n  tabIndex: PropTypes.number,\n  accessKey: PropTypes.string,\n  data: PropTypes.array,\n  value: PropTypes.any,\n  valueMap: PropTypes.func,\n  placeholder: PropTypes.string,\n  dataItemKey: PropTypes.string.isRequired,\n  textField: PropTypes.string.isRequired,\n  checkField: PropTypes.string,\n  checkIndeterminateField: PropTypes.string,\n  expandField: PropTypes.string,\n  subItemsField: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  label: PropTypes.string,\n  validationMessage: PropTypes.string,\n  validityStyles: PropTypes.bool,\n  valid: PropTypes.bool,\n  required: PropTypes.bool,\n  name: PropTypes.string,\n  id: PropTypes.string,\n  ariaLabelledBy: PropTypes.string,\n  ariaDescribedBy: PropTypes.string,\n  filterable: PropTypes.bool,\n  filter: PropTypes.string,\n  loading: PropTypes.bool,\n  tags: PropTypes.arrayOf(PropTypes.shape({\n    text: PropTypes.string,\n    data: PropTypes.arrayOf(PropTypes.any)\n  })),\n  popupSettings: PropTypes.shape({\n    animate: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n      openDuration: PropTypes.number,\n      closeDuration: PropTypes.number\n    })]),\n    popupClass: PropTypes.string,\n    className: PropTypes.string,\n    appendTo: PropTypes.any,\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  }),\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  onFilterChange: PropTypes.func,\n  onExpandChange: PropTypes.func,\n  item: PropTypes.func,\n  listNoData: PropTypes.func\n};\nMultiSelectTree.displayName = 'KendoReactMultiSelectTree';\nMultiSelectTree.propTypes = propTypes;","map":{"version":3,"sources":["/home/asmith/taller/proyecto1/proyecto-taller/client/node_modules/@progress/kendo-react-dropdowns/dist/es/MultiSelectTree/MultiSelectTree.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","PropTypes","classNames","noop","useRtl","getTabIndex","Keys","guid","createPropsContext","usePropsContext","Popup","useLocalization","TreeView","validatePackage","packageMetadata","getItemValue","areSame","matchTags","useDropdownWidth","ListNoData","messages","clear","nodata","FloatingLabel","TagList","VALIDATION_MESSAGE","toLevel","hierarchicalIndex","split","map","parseInt","getValidity","_a","hasValue","validationMessage","valid","required","customError","undefined","Boolean","valueMissing","defaultProps","checkField","checkIndeterminateField","subItemsField","popupSettings","animate","width","height","validityStyles","MultiSelectTreePropsContext","MultiSelectTree","forwardRef","directProps","ref","props","componentGuid","useMemo","id","data","dataItemKey","_b","_c","style","opened","disabled","_d","onOpen","_e","onClose","placeholder","label","name","_f","_g","_h","tags","value","_j","_k","tabIndex","targetRef","useRef","elementRef","inputRef","selectRef","treeViewRef","skipFocusRef","tagsToRenderRef","popupRef","_l","useState","focusedTagState","setFocusedTagState","_m","openState","setOpenState","_o","focusedState","setFocusedState","_p","filterState","setFilterState","isOpen","Array","isArray","validity","dir","initialStyleWidth","popupWidth","popupStyles","direction","focus","useCallback","current","item","text","textField","slice","useImperativeHandle","element","actionElement","setValidity","setCustomValidity","useEffect","setPosition","_popup","changeValue","event","relatedItems","operation","onChange","changeEvent","items","nativeEvent","syntheticEvent","ev","target","openPopup","openEvent","closePopup","closeEvent","switchFocus","focusFn","window","setTimeout","focusElement","onPopupOpened","filterable","onPopupClosed","onFocus","focusEvent","onBlur","onWrapperMouseDown","onWrapperClick","isDefaultPrevented","onWrapperKeyDown","keyCode","altKey","treeviewElement","left","right","home","end","delete","tagsToRender","focusedIndex","findIndex","newFocusedTag","hasFocused","Math","max","min","esc","up","querySelector","down","from","querySelectorAll","focusedItem","reverse","find","indexOf","onInputKeyDown","preventDefault","onClear","onTagDelete","itemsToRemove","onExpand","onExpandChange","itemHierarchicalIndex","expandEvent","level","onFilterChange","filterDesc","field","operator","filter","NoData","listNoData","localization","isValid","multiselecttree","createElement","className","accessKey","onKeyDown","onMouseDown","role","ariaLabelledBy","ariaDescribedBy","onClick","tag","focused","loading","title","toLanguageString","e","opacity","border","zIndex","position","valueMap","popupClass","anchor","show","appendTo","focusIdField","expandField","childrenField","expandIcons","onItemClick","onCheckChange","checkboxes","editorValue","editorPlaceholder","editorValid","editorDisabled","editorId","children","propTypes","bool","string","number","array","any","func","isRequired","object","arrayOf","shape","oneOfType","openDuration","closeDuration","displayName"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, noop, useRtl, getTabIndex, Keys, guid, createPropsContext, usePropsContext } from '@progress/kendo-react-common';\nimport { Popup } from '@progress/kendo-react-popup';\nimport { useLocalization } from '@progress/kendo-react-intl';\nimport { TreeView } from '@progress/kendo-react-treeview';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './../package-metadata';\nimport { getItemValue, areSame, matchTags } from '../common/utils';\nimport { useDropdownWidth } from './../DropDownTree/useDropdownWidth';\nimport { ListNoData } from './../DropDownTree/ListNoData';\nimport { messages, clear, nodata } from './../messages';\nimport { FloatingLabel } from '@progress/kendo-react-labels';\nimport TagList from '../MultiSelect/TagList';\nvar VALIDATION_MESSAGE = 'Please select a value from the list!';\nvar toLevel = function (hierarchicalIndex) {\n    return hierarchicalIndex.split('_').map(function (i) { return parseInt(i, 10); });\n};\nvar getValidity = function (_a, hasValue) {\n    var validationMessage = _a.validationMessage, valid = _a.valid, required = _a.required;\n    return ({\n        customError: validationMessage !== undefined,\n        valid: Boolean(valid !== undefined ? valid : (!required || hasValue)),\n        valueMissing: !hasValue\n    });\n};\nvar defaultProps = {\n    checkField: 'checkField',\n    checkIndeterminateField: 'checkIndeterminateField',\n    subItemsField: 'items',\n    popupSettings: {\n        animate: true,\n        width: '200px',\n        height: '200px'\n    },\n    required: false,\n    validityStyles: true\n};\n/**\n * Represents the PropsContext of the `MultiSelectTree` component.\n * Used for global configuration of all `MultiSelectTree` instances.\n *\n * For more information, refer to the [Dropdowns Props Context]({% slug props-context_dropdowns %}) article.\n */\nexport var MultiSelectTreePropsContext = createPropsContext();\n/**\n * Represents the MultiSelectTree component.\n *\n * Accepts properties of type [MultiSelectTreeProps]({% slug api_dropdowns_multiselecttreeprops %}).\n * Obtaining the `ref` returns an object of type [MultiSelectTreeHandle]({% slug api_dropdowns_multiselecttreehandle %}).\n */\nexport var MultiSelectTree = React.forwardRef(function (directProps, ref) {\n    var props = usePropsContext(MultiSelectTreePropsContext, directProps);\n    validatePackage(packageMetadata);\n    var componentGuid = React.useMemo(function () { return guid(); }, []);\n    var id = props.id || componentGuid;\n    var _a = props.data, data = _a === void 0 ? [] : _a, dataItemKey = props.dataItemKey, _b = props.popupSettings, popupSettings = _b === void 0 ? {} : _b, _c = props.style, style = _c === void 0 ? {} : _c, opened = props.opened, disabled = props.disabled, _d = props.onOpen, onOpen = _d === void 0 ? noop : _d, _e = props.onClose, onClose = _e === void 0 ? noop : _e, placeholder = props.placeholder, label = props.label, name = props.name, _f = props.checkField, checkField = _f === void 0 ? defaultProps.checkField : _f, _g = props.checkIndeterminateField, checkIndeterminateField = _g === void 0 ? defaultProps.checkIndeterminateField : _g, _h = props.subItemsField, subItemsField = _h === void 0 ? defaultProps.subItemsField : _h, validationMessage = props.validationMessage, valid = props.valid, tags = props.tags, value = props.value, _j = props.required, required = _j === void 0 ? defaultProps.required : _j, _k = props.validityStyles, validityStyles = _k === void 0 ? defaultProps.validityStyles : _k;\n    var tabIndex = getTabIndex(props.tabIndex, disabled);\n    var targetRef = React.useRef(null);\n    var elementRef = React.useRef(null);\n    var inputRef = React.useRef(null);\n    var selectRef = React.useRef(null);\n    var treeViewRef = React.useRef(null);\n    var skipFocusRef = React.useRef(false);\n    var tagsToRenderRef = React.useRef([]);\n    var popupRef = React.useRef(null);\n    var _l = React.useState(), focusedTagState = _l[0], setFocusedTagState = _l[1];\n    var _m = React.useState(false), openState = _m[0], setOpenState = _m[1];\n    var _o = React.useState(false), focusedState = _o[0], setFocusedState = _o[1];\n    var _p = React.useState(''), filterState = _p[0], setFilterState = _p[1];\n    var isOpen = opened !== undefined ? opened : openState;\n    var hasValue = Boolean(Array.isArray(value) && value.length);\n    var validity = getValidity({ validationMessage: validationMessage, valid: valid, required: required }, hasValue);\n    var dir = useRtl(elementRef, props.dir);\n    var initialStyleWidth = popupSettings.width !== undefined ?\n        popupSettings.width : (style.width !== undefined ? style.width : defaultProps.popupSettings.width);\n    var popupWidth = useDropdownWidth(elementRef, initialStyleWidth);\n    var popupStyles = __assign({ width: popupWidth }, (dir !== undefined ? { direction: dir } : {}));\n    var focus = React.useCallback(function () { return elementRef.current && elementRef.current.focus(); }, []);\n    tagsToRenderRef.current = tags === undefined ?\n        (value || []).map(function (item) { return ({ text: getItemValue(item, props.textField), data: [item] }); }) : tags.slice();\n    React.useImperativeHandle(targetRef, function () { return ({\n        props: props,\n        element: elementRef.current,\n        actionElement: elementRef.current,\n        focus: focus\n    }); });\n    React.useImperativeHandle(ref, function () { return targetRef.current; });\n    var setValidity = React.useCallback(function () {\n        if (selectRef.current && selectRef.current.setCustomValidity) {\n            selectRef.current.setCustomValidity(validity.valid\n                ? ''\n                : validationMessage === undefined ? VALIDATION_MESSAGE : validationMessage);\n        }\n    }, [validationMessage, validity]);\n    React.useEffect(setValidity);\n    React.useEffect(function () {\n        if (popupRef.current && isOpen) {\n            popupRef.current.setPosition(popupRef.current._popup);\n        }\n    }, [value, isOpen]);\n    var changeValue = React.useCallback(function (event, relatedItems, operation) {\n        if (props.onChange) {\n            var changeEvent = __assign({ items: relatedItems, operation: operation }, event);\n            props.onChange.call(undefined, changeEvent);\n        }\n    }, [props.onChange]);\n    var onChange = React.useCallback(function (event) {\n        if (areSame(event.item, value, dataItemKey) || !targetRef.current) {\n            return;\n        }\n        var item = event.item, nativeEvent = event.nativeEvent, syntheticEvent = event.syntheticEvent;\n        var ev = {\n            syntheticEvent: syntheticEvent,\n            nativeEvent: nativeEvent,\n            target: targetRef.current\n        };\n        changeValue(ev, [item], 'toggle');\n    }, [value, dataItemKey, changeValue]);\n    var openPopup = React.useCallback(function (event) {\n        if (!isOpen) {\n            if (onOpen) {\n                var openEvent = __assign({}, event);\n                onOpen.call(undefined, openEvent);\n            }\n            if (opened === undefined) {\n                setOpenState(true);\n            }\n        }\n    }, [isOpen, opened, onOpen]);\n    var closePopup = React.useCallback(function (event) {\n        if (isOpen) {\n            if (onClose) {\n                var closeEvent = __assign({}, event);\n                onClose.call(undefined, closeEvent);\n            }\n            if (opened === undefined) {\n                setOpenState(false);\n            }\n        }\n    }, [isOpen, opened, onClose]);\n    var switchFocus = React.useCallback(function (focusFn) {\n        skipFocusRef.current = true;\n        focusFn();\n        window.setTimeout(function () { return skipFocusRef.current = false; }, 0);\n    }, []);\n    var focusElement = React.useCallback(function (element) {\n        if (element) {\n            switchFocus(function () { return element.focus(); });\n        }\n    }, [switchFocus]);\n    var onPopupOpened = React.useCallback(function () {\n        if (!focusedState && isOpen) {\n            closePopup({ target: targetRef.current });\n        }\n        else {\n            if (props.filterable) {\n                focusElement(inputRef.current);\n            }\n            else {\n                focusElement(treeViewRef.current && treeViewRef.current.element);\n            }\n        }\n    }, [focusedState, isOpen, focusElement, closePopup, props.filterable]);\n    var onPopupClosed = React.useCallback(function () {\n        if (focusedState) {\n            // Move the focus from treeview to dropdown without triggering Focus or Blur events.\n            focusElement(elementRef.current);\n        }\n    }, [focusedState, focusElement]);\n    var onFocus = React.useCallback(function (event) {\n        if (!focusedState && !skipFocusRef.current) {\n            setFocusedState(true);\n            if (props.onFocus && targetRef.current) {\n                var focusEvent = {\n                    syntheticEvent: event,\n                    nativeEvent: event.nativeEvent,\n                    target: targetRef.current\n                };\n                props.onFocus.call(undefined, focusEvent);\n            }\n        }\n    }, [focusedState, props.onFocus]);\n    var onBlur = React.useCallback(function (event) {\n        if (focusedState && !skipFocusRef.current && targetRef.current) {\n            setFocusedState(false);\n            var ev = {\n                syntheticEvent: event,\n                nativeEvent: event.nativeEvent,\n                target: targetRef.current\n            };\n            if (props.onBlur) {\n                var focusEvent = __assign({}, ev);\n                props.onBlur.call(undefined, focusEvent);\n            }\n            closePopup(ev);\n        }\n    }, [focusedState, props.onBlur, isOpen, opened, onClose]);\n    var onWrapperMouseDown = React.useCallback(function () {\n        if (focusedState) {\n            // moving focus from treeview to dropdown triggers Focus and Blur events.\n            switchFocus(noop);\n        }\n    }, [focusedState, switchFocus]);\n    var onWrapperClick = React.useCallback(function (event) {\n        if (!event.isDefaultPrevented() && targetRef.current) {\n            setFocusedState(true);\n            var ev = {\n                syntheticEvent: event,\n                nativeEvent: event.nativeEvent,\n                target: targetRef.current\n            };\n            if (!isOpen) {\n                openPopup(ev);\n            }\n        }\n    }, [isOpen, openPopup]);\n    var onWrapperKeyDown = React.useCallback(function (event) {\n        var keyCode = event.keyCode, altKey = event.altKey;\n        var treeviewElement = treeViewRef.current && treeViewRef.current.element;\n        if (!targetRef.current || (event.isDefaultPrevented() && inputRef.current === event.target)) {\n            return;\n        }\n        var ev = {\n            syntheticEvent: event,\n            nativeEvent: event.nativeEvent,\n            target: targetRef.current\n        };\n        if (value && value.length > 0 &&\n            (keyCode === Keys.left || keyCode === Keys.right ||\n                keyCode === Keys.home || keyCode === Keys.end ||\n                keyCode === Keys.delete)) {\n            var tagsToRender = tagsToRenderRef.current;\n            var focusedIndex = focusedTagState ?\n                tagsToRender.findIndex(function (t) { return matchTags(t, focusedTagState, dataItemKey); }) : -1;\n            var newFocusedTag = undefined;\n            var hasFocused = focusedIndex !== -1;\n            if (keyCode === Keys.left) {\n                if (hasFocused) {\n                    focusedIndex = Math.max(0, focusedIndex - 1);\n                }\n                else {\n                    focusedIndex = tagsToRender.length - 1;\n                }\n                newFocusedTag = tagsToRender[focusedIndex];\n            }\n            else if (keyCode === Keys.right) {\n                if (focusedIndex === tagsToRender.length - 1) {\n                    newFocusedTag = undefined;\n                }\n                else if (hasFocused) {\n                    focusedIndex = Math.min(tagsToRender.length - 1, focusedIndex + 1);\n                    newFocusedTag = tagsToRender[focusedIndex];\n                }\n            }\n            else if (keyCode === Keys.home) {\n                newFocusedTag = tagsToRender[0];\n            }\n            else if (keyCode === Keys.end) {\n                newFocusedTag = tagsToRender[tagsToRender.length - 1];\n            }\n            else if (keyCode === Keys.delete) {\n                if (hasFocused) {\n                    changeValue(ev, tagsToRender[focusedIndex].data, 'delete');\n                }\n            }\n            if (newFocusedTag !== focusedTagState) {\n                setFocusedTagState(newFocusedTag);\n            }\n        }\n        if (isOpen) {\n            if (keyCode === Keys.esc || (altKey && keyCode === Keys.up)) {\n                closePopup(ev);\n            }\n            else if (treeviewElement && treeviewElement.querySelector('.k-state-focused') &&\n                (keyCode === Keys.up || keyCode === Keys.down ||\n                    keyCode === Keys.left || keyCode === Keys.right ||\n                    keyCode === Keys.home || keyCode === Keys.end)) {\n                if (keyCode === Keys.up && inputRef.current) {\n                    var items = Array.from(treeviewElement.querySelectorAll('.k-treeview-item'));\n                    var focusedItem = items.slice().reverse().find(function (i) { return Boolean(i && i.querySelector('.k-state-focused')); });\n                    if (focusedItem && items.indexOf(focusedItem) === 0) {\n                        return switchFocus(function () { focusElement(inputRef.current); });\n                    }\n                }\n                switchFocus(noop);\n            }\n            else if (keyCode === Keys.down) {\n                switchFocus(function () { focusElement(inputRef.current || treeviewElement); });\n            }\n        }\n        else {\n            if (altKey && keyCode === Keys.down) {\n                openPopup(ev);\n            }\n        }\n    }, [isOpen, closePopup, focusElement, switchFocus, openPopup, focusedTagState, dataItemKey, value, changeValue]);\n    var onInputKeyDown = React.useCallback(function (event) {\n        var keyCode = event.keyCode, altKey = event.altKey;\n        if (altKey || (keyCode !== Keys.up && keyCode !== Keys.down)) {\n            return;\n        }\n        event.preventDefault();\n        switchFocus(keyCode === Keys.up ?\n            function () { focusElement(elementRef.current); } :\n            function () { focusElement(treeViewRef.current && treeViewRef.current.element); });\n    }, [focusElement, switchFocus]);\n    var onClear = React.useCallback(function (event) {\n        if (!targetRef.current) {\n            return;\n        }\n        var ev = {\n            syntheticEvent: event,\n            nativeEvent: event.nativeEvent,\n            target: targetRef.current\n        };\n        changeValue(ev, [], 'clear');\n        closePopup(ev);\n        event.preventDefault();\n    }, [changeValue, closePopup]);\n    var onTagDelete = React.useCallback(function (itemsToRemove, event) {\n        closePopup({ target: targetRef.current });\n        if (!focusedState) {\n            focusElement(inputRef.current);\n        }\n        changeValue({\n            syntheticEvent: event,\n            nativeEvent: event.nativeEvent,\n            target: targetRef.current\n        }, itemsToRemove, 'delete');\n    }, [changeValue, closePopup, focusElement, focusedState]);\n    var onExpand = React.useCallback(function (event) {\n        if (props.onExpandChange && targetRef.current) {\n            var item = event.item, itemHierarchicalIndex = event.itemHierarchicalIndex, nativeEvent = event.nativeEvent, syntheticEvent = event.syntheticEvent;\n            var expandEvent = {\n                level: toLevel(itemHierarchicalIndex),\n                item: item, nativeEvent: nativeEvent, syntheticEvent: syntheticEvent, target: targetRef.current\n            };\n            props.onExpandChange.call(undefined, expandEvent);\n        }\n    }, [props.onExpandChange]);\n    var onFilterChange = React.useCallback(function (event) {\n        if (props.onFilterChange && targetRef.current) {\n            var filterDesc = { field: props.textField, operator: 'contains', value: event.target.value };\n            var ev = {\n                filter: filterDesc,\n                syntheticEvent: event,\n                nativeEvent: event.nativeEvent,\n                target: targetRef.current\n            };\n            props.onFilterChange.call(undefined, ev);\n            if (props.filter === undefined) {\n                setFilterState(event.target.value);\n            }\n        }\n    }, [props.onFilterChange, props.filter, props.textField]);\n    var NoData = props.listNoData || ListNoData;\n    var localization = useLocalization();\n    var isValid = !validityStyles || validity.valid;\n    var multiselecttree = (React.createElement(\"span\", { className: classNames('k-widget k-dropdowntree', props.className, {\n            'k-state-focused': focusedState && !disabled,\n            'k-state-invalid': !isValid,\n            'k-state-disabled': disabled\n        }), tabIndex: tabIndex, accessKey: props.accessKey, id: id, style: label ? __assign({}, style, { width: undefined }) : style, dir: dir, ref: elementRef, onKeyDown: disabled ? undefined : onWrapperKeyDown, onMouseDown: onWrapperMouseDown, onFocus: onFocus, onBlur: onBlur, role: \"listbox\", \"aria-haspopup\": \"true\", \"aria-expanded\": isOpen, \"aria-disabled\": disabled, \"aria-label\": label, \"aria-labelledby\": props.ariaLabelledBy, \"aria-describedby\": props.ariaDescribedBy },\n        React.createElement(\"span\", { className: classNames('k-multiselect-wrap k-floatwrap', {\n                'k-state-focused': focusedState,\n                'k-state-disabled': disabled,\n                'k-state-invalid': !isValid\n            }), onClick: disabled ? undefined : onWrapperClick },\n            tagsToRenderRef.current.length > 0 && (React.createElement(TagList, { tag: props.tag, onTagDelete: onTagDelete, data: tagsToRenderRef.current, guid: componentGuid, focused: focusedTagState ? tagsToRenderRef.current.find(function (t) { return matchTags(t, focusedTagState, dataItemKey); }) : undefined })),\n            props.loading && (React.createElement(\"span\", { className: classNames('k-icon', { 'k-i-loading': props.loading }) })),\n            hasValue && !disabled && (React.createElement(\"span\", { onClick: onClear, className: \"k-icon k-clear-value k-i-close\", title: localization.toLanguageString(clear, messages[clear]), role: \"button\", tabIndex: -1, onMouseDown: function (e) { return e.preventDefault(); } })),\n            React.createElement(\"select\", { name: name, ref: selectRef, tabIndex: -1, \"aria-hidden\": true, title: label, style: { opacity: 0, width: 1, border: 0, zIndex: -1, position: 'absolute', left: '50%' } },\n                React.createElement(\"option\", { value: props.valueMap ? props.valueMap.call(undefined, value) : value }))),\n        React.createElement(Popup, { popupClass: popupSettings.popupClass, className: classNames('k-list-container k-group k-reset k-popup-dropdowntree', popupSettings.className, { 'k-rtl': dir === 'rtl' }), style: popupStyles, animate: popupSettings.animate, anchor: elementRef.current, show: isOpen, onOpen: onPopupOpened, onClose: onPopupClosed, appendTo: popupSettings.appendTo, ref: popupRef },\n            props.filterable && (React.createElement(\"span\", { className: \"k-list-filter\" },\n                React.createElement(\"input\", { className: \"k-textbox\", tabIndex: tabIndex, ref: inputRef, value: props.filter === undefined ? filterState : props.filter, onChange: onFilterChange, onKeyDown: onInputKeyDown }),\n                React.createElement(\"span\", { className: \"k-icon k-i-zoom\" }))),\n            data.length > 0 ? (React.createElement(TreeView, { ref: treeViewRef, tabIndex: tabIndex, data: data, focusIdField: dataItemKey, textField: props.textField, checkField: checkField, checkIndeterminateField: checkIndeterminateField, expandField: props.expandField, childrenField: subItemsField, expandIcons: true, onItemClick: onChange, onCheckChange: onChange, onExpandChange: onExpand, checkboxes: true, item: props.item })) : (React.createElement(NoData, null, localization.toLanguageString(nodata, messages[nodata]))))));\n    return label ? (React.createElement(FloatingLabel, { label: label, editorValue: hasValue, editorPlaceholder: placeholder, editorValid: isValid, editorDisabled: disabled, editorId: id, style: { width: style ? style.width : undefined }, children: multiselecttree, dir: dir })) : multiselecttree;\n});\nvar propTypes = {\n    opened: PropTypes.bool,\n    disabled: PropTypes.bool,\n    dir: PropTypes.string,\n    tabIndex: PropTypes.number,\n    accessKey: PropTypes.string,\n    data: PropTypes.array,\n    value: PropTypes.any,\n    valueMap: PropTypes.func,\n    placeholder: PropTypes.string,\n    dataItemKey: PropTypes.string.isRequired,\n    textField: PropTypes.string.isRequired,\n    checkField: PropTypes.string,\n    checkIndeterminateField: PropTypes.string,\n    expandField: PropTypes.string,\n    subItemsField: PropTypes.string,\n    className: PropTypes.string,\n    style: PropTypes.object,\n    label: PropTypes.string,\n    validationMessage: PropTypes.string,\n    validityStyles: PropTypes.bool,\n    valid: PropTypes.bool,\n    required: PropTypes.bool,\n    name: PropTypes.string,\n    id: PropTypes.string,\n    ariaLabelledBy: PropTypes.string,\n    ariaDescribedBy: PropTypes.string,\n    filterable: PropTypes.bool,\n    filter: PropTypes.string,\n    loading: PropTypes.bool,\n    tags: PropTypes.arrayOf(PropTypes.shape({\n        text: PropTypes.string,\n        data: PropTypes.arrayOf(PropTypes.any)\n    })),\n    popupSettings: PropTypes.shape({\n        animate: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n                openDuration: PropTypes.number,\n                closeDuration: PropTypes.number\n            })]),\n        popupClass: PropTypes.string,\n        className: PropTypes.string,\n        appendTo: PropTypes.any,\n        width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    }),\n    onOpen: PropTypes.func,\n    onClose: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onChange: PropTypes.func,\n    onFilterChange: PropTypes.func,\n    onExpandChange: PropTypes.func,\n    item: PropTypes.func,\n    listNoData: PropTypes.func\n};\nMultiSelectTree.displayName = 'KendoReactMultiSelectTree';\nMultiSelectTree.propTypes = propTypes;\n"]},"metadata":{},"sourceType":"module"}