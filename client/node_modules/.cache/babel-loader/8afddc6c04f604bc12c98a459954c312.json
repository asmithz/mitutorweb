{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, Keys, guid, createPropsContext, withPropsContext } from '@progress/kendo-react-common';\nimport { FloatingLabel } from '@progress/kendo-react-labels';\nimport ListContainer from '../common/ListContainer';\nimport List from '../common/List';\nimport TagList from './TagList';\nimport SearchBar from '../common/SearchBar';\nimport DropDownBase from '../common/DropDownBase';\nimport { ActiveDescendant } from './../common/settings';\nimport { itemIndexStartsWith, getItemValue, areSame, removeDataItems, isPresent, preventDefaultNonInputs, matchTags } from '../common/utils';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from '../package-metadata';\nvar VALIDATION_MESSAGE = 'Please enter a valid value!';\n\nvar preventDefault = function (event) {\n  return event.preventDefault();\n};\n\nvar isCustom = function (type) {\n  return type === FocusedItemType.CustomItem;\n};\n\nvar FocusedItemType;\n\n(function (FocusedItemType) {\n  FocusedItemType[FocusedItemType[\"None\"] = 0] = \"None\";\n  FocusedItemType[FocusedItemType[\"ListItem\"] = 1] = \"ListItem\";\n  FocusedItemType[FocusedItemType[\"CustomItem\"] = 2] = \"CustomItem\";\n})(FocusedItemType || (FocusedItemType = {}));\n/** @hidden */\n\n\nvar MultiSelectWithoutContext =\n/** @class */\nfunction (_super) {\n  __extends(MultiSelectWithoutContext, _super);\n\n  function MultiSelectWithoutContext(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.state = {\n      activedescendant: ActiveDescendant.PopupList\n    };\n    _this._valueItemsDuringOnChange = null;\n    _this._inputId = guid();\n    _this.base = new DropDownBase(_this);\n    _this._tags = [];\n    _this._skipFocusEvent = false;\n    _this.scrollToFocused = false;\n    /**\n     * @hidden\n     */\n\n    _this.focus = function () {\n      if (_this._input) {\n        _this._input.focus();\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.handleItemSelect = function (index, state) {\n      var _a = _this.props,\n          _b = _a.data,\n          data = _b === void 0 ? [] : _b,\n          dataItemKey = _a.dataItemKey,\n          virtual = _a.virtual;\n      var skip = virtual ? virtual.skip : 0;\n      var dataItem = data[index - skip];\n\n      var indexInValue = _this.value.findIndex(function (i) {\n        return areSame(i, dataItem, dataItemKey);\n      });\n\n      var newItems = [];\n\n      if (indexInValue !== -1) {\n        // item is already selected\n        newItems = _this.value;\n        newItems.splice(indexInValue, 1);\n      } else {\n        newItems = _this.value.concat([dataItem]);\n      }\n\n      var text = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n\n      if (text) {\n        if (_this.state.text) {\n          state.data.text = '';\n        }\n\n        _this.base.filterChanged('', state);\n      }\n\n      if (_this.state.focusedIndex !== undefined) {\n        state.data.focusedIndex = undefined;\n      }\n\n      _this.triggerOnChange(newItems, state);\n\n      _this.base.triggerPageChangeCornerItems(dataItem, state);\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onTagDelete = function (itemsToRemove, event) {\n      var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n\n      var state = _this.base.initState();\n\n      state.syntheticEvent = event;\n\n      if (opened) {\n        _this.base.togglePopup(state);\n      }\n\n      if (!_this.state.focused) {\n        state.data.focused = true;\n\n        _this.focus();\n      }\n\n      var selected = _this.value;\n      removeDataItems(selected, itemsToRemove, _this.props.dataItemKey);\n\n      _this.triggerOnChange(selected, state);\n\n      _this.applyState(state);\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.itemFocus = function (index, state) {\n      var _a = _this.props,\n          _b = _a.data,\n          data = _b === void 0 ? [] : _b,\n          allowCustom = _a.allowCustom,\n          virtual = _a.virtual;\n      var skip = virtual ? virtual.skip : 0;\n      var text = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n\n      var focusedIndex = _this.getFocusedState().focusedIndex;\n\n      var customItem = allowCustom && text;\n      var nextFocusedItem = data[index - skip];\n\n      if (nextFocusedItem && focusedIndex !== index) {\n        if (_this.state.focusedIndex !== index) {\n          state.data.focusedIndex = index;\n          state.data.activedescendant = ActiveDescendant.PopupList;\n        }\n      } else if (customItem && index === -1) {\n        if (_this.state.focusedIndex !== undefined) {\n          state.data.focusedIndex = undefined;\n        }\n      }\n\n      _this.base.triggerPageChangeCornerItems(nextFocusedItem, state);\n    };\n\n    _this.searchbarRef = function (searchbar) {\n      var input = _this._input = searchbar && searchbar.input;\n\n      if (input && _this.state.focused) {\n        window.setTimeout(function () {\n          return input.focus();\n        }, 0);\n      }\n    };\n\n    _this.onChangeHandler = function (event) {\n      var state = _this.base.initState();\n\n      var value = event.currentTarget.value;\n      var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n      state.syntheticEvent = event;\n\n      if (_this.props.filter === undefined) {\n        state.data.text = value;\n      }\n\n      state.data.focusedIndex = undefined;\n\n      if (!opened) {\n        _this.base.togglePopup(state);\n      }\n\n      _this.base.filterChanged(value, state);\n\n      _this.applyState(state);\n    };\n\n    _this.clearButtonClick = function (event) {\n      var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n\n      var state = _this.base.initState();\n\n      state.syntheticEvent = event;\n      event.stopPropagation();\n\n      if (_this.value.length > 0) {\n        _this.triggerOnChange([], state);\n      }\n\n      if (_this.state.focusedIndex !== undefined) {\n        state.data.focusedIndex = undefined;\n      }\n\n      if (opened) {\n        _this.base.togglePopup(state);\n      }\n\n      var text = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n\n      if (isPresent(text) && text !== '') {\n        _this.base.filterChanged('', state);\n      }\n\n      if (_this.state.text) {\n        state.data.text = '';\n      }\n\n      _this.applyState(state);\n    };\n\n    _this.onInputKeyDown = function (event) {\n      var keyCode = event.keyCode;\n      var text = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n      var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n\n      var focusedItem = _this.getFocusedState().focusedItem;\n\n      var state = _this.base.initState();\n\n      state.syntheticEvent = event;\n\n      if (!text && _this.value.length > 0 && (keyCode === Keys.left || keyCode === Keys.right || keyCode === Keys.home || keyCode === Keys.end || keyCode === Keys.delete || keyCode === Keys.backspace)) {\n        return _this.onTagsNavigate(event, state);\n      }\n\n      var togglePopup = function () {\n        event.preventDefault();\n\n        _this.base.togglePopup(state);\n\n        _this.applyState(state);\n      };\n\n      if (opened) {\n        if (event.altKey && keyCode === Keys.up) {\n          togglePopup();\n        } else if (keyCode === Keys.up || keyCode === Keys.down) {\n          event.preventDefault();\n\n          _this.onNavigate(state, keyCode);\n        } else if (keyCode === Keys.enter) {\n          event.preventDefault();\n\n          if (_this.props.allowCustom && text && focusedItem === null) {\n            _this.customItemSelect(event);\n          } else {\n            _this.selectFocusedItem(event);\n          }\n        } else if (keyCode === Keys.esc) {\n          togglePopup();\n        }\n      } else if (event.altKey && keyCode === Keys.down) {\n        togglePopup();\n      }\n    };\n\n    _this.renderListContainer = function () {\n      var base = _this.base;\n      var _a = _this.props,\n          header = _a.header,\n          footer = _a.footer,\n          allowCustom = _a.allowCustom,\n          dir = _a.dir,\n          _b = _a.data,\n          data = _b === void 0 ? [] : _b;\n\n      var popupSettings = _this.base.getPopupSettings();\n\n      var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n      var text = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n      var virtual = _this.props.virtual !== undefined;\n      var popupWidth = popupSettings.width !== undefined ? popupSettings.width : base.popupWidth;\n      var listContainerProps = {\n        dir: dir !== undefined ? dir : base.dirCalculated,\n        width: popupWidth,\n        popupSettings: {\n          popupClass: popupSettings.popupClass,\n          className: classNames('k-list-container k-reset', popupSettings.className),\n          animate: popupSettings.animate,\n          anchor: _this.element,\n          show: opened,\n          onOpen: _this.onPopupOpened,\n          onClose: _this.onPopupClosed,\n          appendTo: popupSettings.appendTo\n        },\n        itemsCount: [data.length, _this.value.length]\n      };\n\n      var focusedType = _this.getFocusedState().focusedType;\n\n      var customItem = allowCustom && text && React.createElement(\"div\", {\n        className: \"k-list\",\n        key: \"customitem\",\n        onClick: _this.customItemSelect,\n        onMouseDown: preventDefault\n      }, React.createElement(\"div\", {\n        className: classNames('k-item k-custom-item', {\n          'k-state-focused': isCustom(focusedType)\n        })\n      }, text, React.createElement(\"span\", {\n        className: \"k-icon k-i-plus\",\n        style: {\n          float: 'right'\n        }\n      })));\n      return React.createElement(ListContainer, __assign({}, listContainerProps), virtual && header, _this.base.renderScrollWrapper(React.createElement(React.Fragment, null, !virtual && header, customItem, _this.renderList(), !virtual && footer, _this.base.renderScrollElement())), virtual && footer);\n    };\n\n    _this.renderList = function () {\n      var _a = _this.props,\n          _b = _a.data,\n          data = _b === void 0 ? [] : _b,\n          textField = _a.textField,\n          listNoDataRender = _a.listNoDataRender,\n          itemRender = _a.itemRender,\n          dataItemKey = _a.dataItemKey,\n          virtual = _a.virtual;\n      var vs = _this.base.vs;\n      var skip = virtual ? virtual.skip : 0;\n      var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n\n      var focusedIndex = _this.getFocusedState().focusedIndex;\n\n      var popupSettings = _this.base.getPopupSettings();\n\n      var translate = \"translateY(\" + vs.translate + \"px)\";\n      return React.createElement(List, {\n        id: _this.base.listBoxId,\n        show: opened,\n        data: data.slice(),\n        focusedIndex: focusedIndex - skip,\n        value: _this.value,\n        textField: textField,\n        valueField: dataItemKey,\n        optionsGuid: _this.base.guid,\n        listRef: function (list) {\n          vs.list = _this.base.list = list;\n        },\n        wrapperStyle: vs.enabled ? {\n          float: 'left',\n          width: '100%'\n        } : {\n          maxHeight: popupSettings.height\n        },\n        wrapperCssClass: vs.enabled ? undefined : 'k-list-scroller',\n        listStyle: vs.enabled ? {\n          transform: translate\n        } : undefined,\n        key: \"listKey\",\n        skip: skip,\n        onClick: _this.handleItemClick,\n        itemRender: itemRender,\n        noDataRender: listNoDataRender,\n        onMouseDown: preventDefault,\n        onBlur: _this.handleBlur\n      });\n    };\n\n    _this.customItemSelect = function (event) {\n      var _a;\n\n      var itemText = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n      var textField = _this.props.textField;\n\n      if (!itemText) {\n        return;\n      }\n\n      var state = _this.base.initState();\n\n      state.syntheticEvent = event;\n      var item = textField ? (_a = {}, _a[textField] = itemText, _a) : itemText;\n\n      if (_this.state.text !== undefined) {\n        state.data.text = '';\n      }\n\n      state.data.focusedIndex = undefined;\n\n      _this.base.filterChanged('', state);\n\n      var newItems = _this.value.concat([item]);\n\n      _this.triggerOnChange(newItems, state);\n\n      _this.base.togglePopup(state);\n\n      _this.applyState(state);\n    };\n\n    _this.handleWrapperClick = function (event) {\n      var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n      var input = _this._input;\n\n      if (!opened && input) {\n        _this.focusElement(input);\n      }\n\n      var state = _this.base.initState();\n\n      state.syntheticEvent = event;\n\n      if (!_this.state.focused) {\n        state.events.push({\n          type: 'onFocus'\n        });\n        state.data.focused = true;\n      }\n\n      _this.base.togglePopup(state);\n\n      _this.applyState(state);\n    };\n\n    _this.handleItemClick = function (index, event) {\n      var state = _this.base.initState();\n\n      state.syntheticEvent = event;\n\n      _this.handleItemSelect(index, state);\n\n      if (_this.props.autoClose) {\n        _this.base.togglePopup(state);\n      }\n\n      _this.applyState(state);\n    };\n\n    _this.handleBlur = function (event) {\n      if (!_this.state.focused || _this._skipFocusEvent) {\n        return;\n      }\n\n      var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n\n      var state = _this.base.initState();\n\n      var _a = _this.props,\n          allowCustom = _a.allowCustom,\n          filterable = _a.filterable;\n      state.syntheticEvent = event;\n      state.data.focused = false;\n      state.events.push({\n        type: 'onBlur'\n      });\n\n      if (opened) {\n        if (_this.state.opened) {\n          state.data.opened = false;\n        }\n\n        state.events.push({\n          type: 'onClose'\n        });\n      }\n\n      if (!allowCustom && !filterable && _this.state.text) {\n        state.data.text = '';\n      }\n\n      _this.applyState(state);\n    };\n\n    _this.handleFocus = function (event) {\n      if (_this._skipFocusEvent) {\n        return;\n      }\n\n      _this.base.handleFocus(event);\n    };\n\n    _this.onPopupOpened = function () {\n      if (_this._input && _this.state.focused) {\n        _this.focusElement(_this._input);\n      }\n    };\n\n    _this.onPopupClosed = function () {\n      if (_this.state.focused) {\n        window.setTimeout(function () {\n          if (_this.state.focused) {\n            _this.focusElement(_this._input);\n          }\n        }, 0);\n      }\n    };\n\n    _this.setValidity = function () {\n      if (_this._input && _this._input.setCustomValidity) {\n        _this._input.setCustomValidity(_this.validity.valid ? '' : _this.props.validationMessage || VALIDATION_MESSAGE);\n      }\n    };\n\n    validatePackage(packageMetadata);\n    return _this;\n  }\n\n  Object.defineProperty(MultiSelectWithoutContext.prototype, \"element\", {\n    /**\n     * @hidden\n     */\n    get: function () {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiSelectWithoutContext.prototype, \"value\", {\n    /**\n     * Represents the value of the MultiSelect.\n     */\n    get: function () {\n      var result = [];\n\n      if (this._valueItemsDuringOnChange) {\n        result.push.apply(result, this._valueItemsDuringOnChange);\n      } else if (this.props.value) {\n        result.push.apply(result, this.props.value);\n      } else if (this.state.value) {\n        result.push.apply(result, this.state.value);\n      } else if (this.props.defaultValue) {\n        result.push.apply(result, this.props.defaultValue);\n      }\n\n      return result;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiSelectWithoutContext.prototype, \"name\", {\n    /**\n     * Gets the `name` property of the MultiSelect.\n     */\n    get: function () {\n      return this.props.name;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiSelectWithoutContext.prototype, \"validity\", {\n    /**\n     * Represents the validity state into which the MultiSelect is set.\n     */\n    get: function () {\n      var customError = this.props.validationMessage !== undefined;\n      var isValid = !this.required || this.value !== null && this.value.length > 0 && this.value !== undefined;\n      var valid = this.props.valid !== undefined ? this.props.valid : isValid;\n      return {\n        customError: customError,\n        valid: valid,\n        valueMissing: this.value === null\n      };\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiSelectWithoutContext.prototype, \"required\", {\n    /**\n     * @hidden\n     */\n    get: function () {\n      return this.props.required !== undefined ? this.props.required : MultiSelectWithoutContext.defaultProps.required;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiSelectWithoutContext.prototype, \"validityStyles\", {\n    get: function () {\n      return this.props.validityStyles !== undefined ? this.props.validityStyles : MultiSelectWithoutContext.defaultProps.validityStyles;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  MultiSelectWithoutContext.prototype.componentDidUpdate = function (prevProps, prevState) {\n    var virtual = this.props.virtual;\n    var skip = virtual ? virtual.skip : 0;\n    var prevTotal = prevProps.virtual ? prevProps.virtual.total : 0;\n    var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n    var prevOpened = prevProps.opened !== undefined ? prevProps.opened : prevState.opened;\n    var opening = !prevOpened && opened;\n    var closing = prevOpened && !opened;\n    var popupSettings = this.base.getPopupSettings();\n\n    if (!popupSettings.animate && closing) {\n      this.onPopupClosed();\n    }\n\n    if (virtual && virtual.total !== prevTotal) {\n      this.base.vs.calcScrollElementHeight();\n      this.base.vs.reset();\n    } else {\n      var _a = this.getFocusedState(),\n          focusedItem = _a.focusedItem,\n          focusedIndex = _a.focusedIndex;\n\n      if (opening && virtual) {\n        this.base.scrollToVirtualItem(virtual, focusedIndex - skip);\n      } else if (opening && !virtual) {\n        this.base.scrollToItem(focusedIndex);\n      } else if (opened && prevOpened && focusedItem && this.scrollToFocused) {\n        this.base.scrollToItem(focusedIndex - skip);\n      }\n    }\n\n    this.scrollToFocused = false;\n    this.setValidity();\n  };\n  /**\n   * @hidden\n   */\n\n\n  MultiSelectWithoutContext.prototype.componentDidMount = function () {\n    this.base.didMount();\n    this.setValidity();\n  };\n  /**\n   * @hidden\n   */\n\n\n  MultiSelectWithoutContext.prototype.onNavigate = function (state, keyCode) {\n    var _a = this.props,\n        allowCustom = _a.allowCustom,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b;\n    var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n    var text = this.props.filter !== undefined ? this.props.filter : this.state.text;\n\n    var _c = this.getFocusedState(),\n        focusedType = _c.focusedType,\n        focusedIndex = _c.focusedIndex;\n\n    var customItem = allowCustom && text;\n    var customItemFocused = isCustom(focusedType);\n    var base = this.base;\n    var vs = base.vs;\n\n    if (opened && keyCode === Keys.up && customItemFocused) {\n      if (this.state.focusedIndex !== undefined) {\n        state.data.focusedIndex = undefined;\n      }\n    } else {\n      var newFocused = base.navigation.navigate({\n        keyCode: keyCode,\n        current: focusedIndex,\n        max: (vs.enabled ? vs.total : data.length) - 1,\n        min: customItem ? -1 : 0\n      });\n\n      if (newFocused !== undefined) {\n        this.itemFocus(newFocused, state);\n        this.scrollToFocused = true;\n      }\n    }\n\n    this.applyState(state);\n  };\n  /**\n   * @hidden\n   */\n\n\n  MultiSelectWithoutContext.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        style = _a.style,\n        className = _a.className,\n        label = _a.label,\n        dir = _a.dir,\n        disabled = _a.disabled,\n        tags = _a.tags,\n        textField = _a.textField,\n        dataItemKey = _a.dataItemKey,\n        virtual = _a.virtual;\n    var _b = this.state,\n        focused = _b.focused,\n        text = _b.text,\n        focusedTag = _b.focusedTag;\n    var vs = this.base.vs;\n    var id = this.props.id || this._inputId;\n    vs.enabled = virtual !== undefined;\n\n    if (virtual !== undefined) {\n      vs.skip = virtual.skip;\n      vs.total = virtual.total;\n      vs.pageSize = virtual.pageSize;\n    }\n\n    var tagsToRender = [];\n\n    if (tags === undefined) {\n      this.value.forEach(function (item) {\n        tagsToRender.push({\n          text: getItemValue(item, textField),\n          data: [item]\n        });\n      });\n    } else {\n      tagsToRender.push.apply(tagsToRender, tags);\n    }\n\n    this.setItems(tagsToRender, this._tags);\n    var isValid = !this.validityStyles || this.validity.valid;\n    var component = React.createElement(\"span\", {\n      ref: function (dropdown) {\n        return _this._element = dropdown;\n      },\n      className: classNames('k-widget k-multiselect', className, {\n        'k-state-focused': focused && !disabled,\n        'k-state-invalid': !isValid,\n        'k-state-disabled': disabled\n      }),\n      style: !label ? style : __assign({}, style, {\n        width: undefined\n      }),\n      dir: dir,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur\n    }, React.createElement(\"div\", {\n      onClick: this.handleWrapperClick,\n      ref: function (wrapper) {\n        return _this.base.wrapper = wrapper;\n      },\n      className: \"k-multiselect-wrap k-floatwrap\",\n      onMouseDown: preventDefaultNonInputs\n    }, tagsToRender.length > 0 && React.createElement(TagList, {\n      tagRender: this.props.tagRender,\n      onTagDelete: this.onTagDelete,\n      data: tagsToRender,\n      guid: this.base.guid,\n      focused: focusedTag ? tagsToRender.find(function (t) {\n        return matchTags(t, focusedTag, dataItemKey);\n      }) : undefined\n    }), this.renderSearchbar(id)), this.renderListContainer());\n    return label ? React.createElement(FloatingLabel, {\n      label: label,\n      editorId: id,\n      editorValue: text || getItemValue(this.value[0], textField),\n      editorValid: isValid,\n      editorDisabled: disabled,\n      style: {\n        width: style ? style.width : undefined\n      },\n      children: component\n    }) : component;\n  };\n\n  MultiSelectWithoutContext.prototype.renderSearchbar = function (id) {\n    var _a = this.state,\n        activedescendant = _a.activedescendant,\n        focusedTag = _a.focusedTag;\n    var _b = this.props,\n        disabled = _b.disabled,\n        placeholder = _b.placeholder,\n        ariaDescribedBy = _b.ariaDescribedBy;\n    var text = (this.props.filter !== undefined ? this.props.filter : this.state.text) || '';\n    var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n    var focusedIndex = this.getFocusedState().focusedIndex;\n    var clearButton = !!text || this.value.length > 0;\n    var placeholderToShow = this.value.length === 0 && !text ? placeholder : undefined;\n    var ariaActivedescendant = activedescendant === ActiveDescendant.TagsList && focusedTag !== undefined ? \"tag-\" + this.base.guid + \"-\" + focusedTag.text.replace(/\\s+/g, '-') : \"option-\" + this.base.guid + \"-\" + focusedIndex;\n    return React.createElement(SearchBar, {\n      id: id,\n      size: Math.max((placeholderToShow || '').length, text.length, 1),\n      tabIndex: this.props.tabIndex,\n      accessKey: this.props.accessKey,\n      placeholder: placeholderToShow,\n      value: text,\n      onChange: this.onChangeHandler,\n      onKeyDown: this.onInputKeyDown,\n      ref: this.searchbarRef,\n      disabled: disabled,\n      expanded: opened,\n      owns: this.base.listBoxId,\n      activedescendant: ariaActivedescendant,\n      ariaDescribedBy: \"tagslist-\" + this.base.guid + (ariaDescribedBy ? ' ' + ariaDescribedBy : ''),\n      clearButton: clearButton,\n      clearButtonClick: this.clearButtonClick,\n      loading: this.props.loading,\n      ariaLabelledBy: this.props.ariaLabelledBy\n    });\n  };\n\n  MultiSelectWithoutContext.prototype.onTagsNavigate = function (event, state) {\n    var keyCode = event.keyCode;\n    var focusedTag = this.state.focusedTag;\n    var tags = this._tags;\n    var itemsKey = this.props.dataItemKey;\n    var focusedIndex = focusedTag ? tags.findIndex(function (t) {\n      return matchTags(t, focusedTag, itemsKey);\n    }) : -1;\n    var newFocusedTag = undefined;\n    var hasFocused = focusedIndex !== -1;\n\n    if (keyCode === Keys.left) {\n      if (hasFocused) {\n        focusedIndex = Math.max(0, focusedIndex - 1);\n      } else {\n        focusedIndex = tags.length - 1;\n      }\n\n      newFocusedTag = tags[focusedIndex];\n    } else if (keyCode === Keys.right) {\n      if (focusedIndex === tags.length - 1) {\n        newFocusedTag = undefined;\n      } else if (hasFocused) {\n        focusedIndex = Math.min(tags.length - 1, focusedIndex + 1);\n        newFocusedTag = tags[focusedIndex];\n      }\n    } else if (keyCode === Keys.home) {\n      newFocusedTag = tags[0];\n    } else if (keyCode === Keys.end) {\n      newFocusedTag = tags[tags.length - 1];\n    } else if (keyCode === Keys.delete) {\n      if (hasFocused) {\n        var items = this.value;\n        removeDataItems(items, tags[focusedIndex].data, itemsKey);\n        this.triggerOnChange(items, state);\n      }\n    } else if (keyCode === Keys.backspace) {\n      var items = this.value;\n\n      if (hasFocused) {\n        removeDataItems(items, tags[focusedIndex].data, itemsKey);\n        this.triggerOnChange(items, state);\n      } else if (!hasFocused && tags.length) {\n        var removed = tags.pop();\n        removeDataItems(items, removed.data, itemsKey);\n        this.triggerOnChange(items, state);\n      }\n    }\n\n    if (newFocusedTag !== focusedTag) {\n      state.data.focusedTag = newFocusedTag;\n      state.data.activedescendant = ActiveDescendant.TagsList;\n    }\n\n    this.applyState(state);\n  };\n\n  MultiSelectWithoutContext.prototype.triggerOnChange = function (items, state) {\n    if (this.props.value === undefined) {\n      state.data.value = items.slice();\n    }\n\n    this._valueItemsDuringOnChange = [];\n    this.setItems(items, this._valueItemsDuringOnChange);\n    state.events.push({\n      type: 'onChange'\n    });\n  };\n\n  MultiSelectWithoutContext.prototype.selectFocusedItem = function (event) {\n    var _a = this.props,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b,\n        virtual = _a.virtual;\n    var focusedIndex = this.getFocusedState().focusedIndex;\n    var skip = virtual ? virtual.skip : 0;\n\n    if (data[focusedIndex - skip] !== undefined) {\n      this.handleItemClick(focusedIndex, event);\n    }\n  };\n\n  MultiSelectWithoutContext.prototype.setItems = function (srcItems, destItems) {\n    destItems.length = 0;\n    destItems.push.apply(destItems, srcItems);\n  };\n\n  MultiSelectWithoutContext.prototype.getFocusedState = function () {\n    var focusedIndex = this.state.focusedIndex;\n    var text = this.props.filter !== undefined ? this.props.filter : this.state.text;\n    var _a = this.props,\n        allowCustom = _a.allowCustom,\n        _b = _a.data,\n        data = _b === void 0 ? [] : _b,\n        dataItemKey = _a.dataItemKey,\n        virtual = _a.virtual,\n        textField = _a.textField,\n        _c = _a.focusedItemIndex,\n        focusedItemIndex = _c === void 0 ? itemIndexStartsWith : _c;\n    var skip = virtual && virtual.skip || 0;\n    var focusedInd;\n\n    if (focusedIndex !== undefined) {\n      return {\n        focusedIndex: focusedIndex,\n        focusedItem: data[focusedIndex - skip],\n        focusedType: FocusedItemType.ListItem\n      };\n    }\n\n    var selected = this.value;\n\n    if (allowCustom && text) {\n      return {\n        focusedItem: null,\n        focusedIndex: -1,\n        focusedType: FocusedItemType.CustomItem\n      };\n    } else if (text) {\n      focusedInd = focusedItemIndex(data, text, textField);\n      return {\n        focusedItem: data[focusedInd],\n        focusedIndex: focusedInd + skip,\n        focusedType: FocusedItemType.ListItem\n      };\n    } else if (selected.length) {\n      var last_1 = selected[selected.length - 1];\n      focusedInd = data.findIndex(function (i) {\n        return areSame(i, last_1, dataItemKey);\n      });\n\n      if (data[focusedInd] !== undefined) {\n        return {\n          focusedIndex: focusedInd + skip,\n          focusedItem: data[focusedInd],\n          focusedType: FocusedItemType.ListItem\n        };\n      }\n\n      return {\n        focusedType: FocusedItemType.None,\n        focusedIndex: -1\n      };\n    }\n\n    return skip === 0 ? {\n      focusedItem: data[0],\n      focusedIndex: 0,\n      focusedType: FocusedItemType.ListItem\n    } : {\n      focusedType: FocusedItemType.None,\n      focusedIndex: -1\n    };\n  };\n\n  MultiSelectWithoutContext.prototype.focusElement = function (element) {\n    var _this = this;\n\n    this._skipFocusEvent = true;\n    element.focus();\n    window.setTimeout(function () {\n      return _this._skipFocusEvent = false;\n    }, 0);\n  };\n\n  MultiSelectWithoutContext.prototype.applyState = function (state) {\n    this.base.applyState(state);\n    this._valueItemsDuringOnChange = null;\n  };\n\n  MultiSelectWithoutContext.displayName = 'MultiSelect';\n  /**\n   * @hidden\n   */\n\n  MultiSelectWithoutContext.propTypes = __assign({}, DropDownBase.propTypes, {\n    autoClose: PropTypes.bool,\n    value: PropTypes.arrayOf(PropTypes.any),\n    defaultValue: PropTypes.arrayOf(PropTypes.any),\n    dataItemKey: PropTypes.string,\n    placeholder: PropTypes.string,\n    tags: PropTypes.arrayOf(PropTypes.shape({\n      text: PropTypes.string,\n      data: PropTypes.arrayOf(PropTypes.any)\n    })),\n    tagRender: PropTypes.func,\n    id: PropTypes.string,\n    ariaLabelledBy: PropTypes.string,\n    ariaDescribedBy: PropTypes.string\n  });\n  /**\n   * @hidden\n   */\n\n  MultiSelectWithoutContext.defaultProps = __assign({}, DropDownBase.defaultProps, {\n    autoClose: true,\n    required: false\n  });\n  return MultiSelectWithoutContext;\n}(React.Component);\n\nexport { MultiSelectWithoutContext };\n/**\n * Represents the PropsContext of the `MultiSelect` component.\n * Used for global configuration of all `MultiSelect` instances.\n *\n * For more information, refer to the [Dropdowns Props Context]({% slug props-context_dropdowns %}) article.\n */\n\nexport var MultiSelectPropsContext = createPropsContext();\n/* eslint-disable @typescript-eslint/no-redeclare -- intentionally naming the component the same as the type */\n\n/**\n * Represents the [KendoReact MultiSelect component]({% slug overview_multiselect %}).\n *\n * Accepts properties of type [MultiSelectProps]({% slug api_dropdowns_multiselectprops %}).\n * Obtaining the `ref` returns an object of type [MultiSelectHandle]({% slug api_dropdowns_multiselecthandle %}).\n *\n * @example\n * ```jsx\n * class App extends React.Component {\n *    multiselect = null;\n *    render() {\n *       return (\n *          <div>\n *              <MultiSelect\n *                  data={[ \"Albania\", \"Andorra\", \"Austria\", \"Belarus\" ]}\n *                  ref={component => this.multiselect = component}\n *              />\n *              <button onClick={() => alert(this.multiselect.value)}>alert value</button>\n *          </div>\n *       );\n *    }\n * }\n * ReactDOM.render(<App />, document.querySelector('my-app'));\n * ```\n */\n\nexport var MultiSelect = withPropsContext(MultiSelectPropsContext, MultiSelectWithoutContext);\nMultiSelect.displayName = 'KendoReactMultiSelect';","map":{"version":3,"sources":["/home/asmith/taller/proyecto1/proyecto-taller/client/node_modules/@progress/kendo-react-dropdowns/dist/es/MultiSelect/MultiSelect.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","React","PropTypes","classNames","Keys","guid","createPropsContext","withPropsContext","FloatingLabel","ListContainer","List","TagList","SearchBar","DropDownBase","ActiveDescendant","itemIndexStartsWith","getItemValue","areSame","removeDataItems","isPresent","preventDefaultNonInputs","matchTags","validatePackage","packageMetadata","VALIDATION_MESSAGE","preventDefault","event","isCustom","type","FocusedItemType","CustomItem","MultiSelectWithoutContext","_super","props","_this","state","activedescendant","PopupList","_valueItemsDuringOnChange","_inputId","base","_tags","_skipFocusEvent","scrollToFocused","focus","_input","handleItemSelect","index","_a","_b","data","dataItemKey","virtual","skip","dataItem","indexInValue","value","findIndex","newItems","splice","concat","text","filter","undefined","filterChanged","focusedIndex","triggerOnChange","triggerPageChangeCornerItems","onTagDelete","itemsToRemove","opened","initState","syntheticEvent","togglePopup","focused","selected","applyState","itemFocus","allowCustom","getFocusedState","customItem","nextFocusedItem","searchbarRef","searchbar","input","window","setTimeout","onChangeHandler","currentTarget","clearButtonClick","stopPropagation","onInputKeyDown","keyCode","focusedItem","left","right","home","end","delete","backspace","onTagsNavigate","altKey","up","down","onNavigate","enter","customItemSelect","selectFocusedItem","esc","renderListContainer","header","footer","dir","popupSettings","getPopupSettings","popupWidth","width","listContainerProps","dirCalculated","popupClass","className","animate","anchor","element","show","onOpen","onPopupOpened","onClose","onPopupClosed","appendTo","itemsCount","focusedType","createElement","key","onClick","onMouseDown","style","float","renderScrollWrapper","Fragment","renderList","renderScrollElement","textField","listNoDataRender","itemRender","vs","translate","id","listBoxId","slice","valueField","optionsGuid","listRef","list","wrapperStyle","enabled","maxHeight","height","wrapperCssClass","listStyle","transform","handleItemClick","noDataRender","onBlur","handleBlur","itemText","item","handleWrapperClick","focusElement","events","push","autoClose","filterable","handleFocus","setValidity","setCustomValidity","validity","valid","validationMessage","defineProperty","get","_element","enumerable","configurable","result","defaultValue","name","customError","isValid","required","valueMissing","defaultProps","validityStyles","componentDidUpdate","prevProps","prevState","prevTotal","total","prevOpened","opening","closing","calcScrollElementHeight","reset","scrollToVirtualItem","scrollToItem","componentDidMount","didMount","_c","customItemFocused","newFocused","navigation","navigate","current","max","min","render","label","disabled","tags","focusedTag","pageSize","tagsToRender","forEach","setItems","component","ref","dropdown","onFocus","wrapper","tagRender","find","renderSearchbar","editorId","editorValue","editorValid","editorDisabled","children","placeholder","ariaDescribedBy","clearButton","placeholderToShow","ariaActivedescendant","TagsList","replace","size","Math","tabIndex","accessKey","onChange","onKeyDown","expanded","owns","loading","ariaLabelledBy","itemsKey","newFocusedTag","hasFocused","items","removed","pop","srcItems","destItems","focusedItemIndex","focusedInd","ListItem","last_1","None","displayName","propTypes","bool","arrayOf","any","string","shape","func","Component","MultiSelectPropsContext","MultiSelect"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, Keys, guid, createPropsContext, withPropsContext } from '@progress/kendo-react-common';\nimport { FloatingLabel } from '@progress/kendo-react-labels';\nimport ListContainer from '../common/ListContainer';\nimport List from '../common/List';\nimport TagList from './TagList';\nimport SearchBar from '../common/SearchBar';\nimport DropDownBase from '../common/DropDownBase';\nimport { ActiveDescendant } from './../common/settings';\nimport { itemIndexStartsWith, getItemValue, areSame, removeDataItems, isPresent, preventDefaultNonInputs, matchTags } from '../common/utils';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from '../package-metadata';\nvar VALIDATION_MESSAGE = 'Please enter a valid value!';\nvar preventDefault = function (event) { return event.preventDefault(); };\nvar isCustom = function (type) { return type === FocusedItemType.CustomItem; };\nvar FocusedItemType;\n(function (FocusedItemType) {\n    FocusedItemType[FocusedItemType[\"None\"] = 0] = \"None\";\n    FocusedItemType[FocusedItemType[\"ListItem\"] = 1] = \"ListItem\";\n    FocusedItemType[FocusedItemType[\"CustomItem\"] = 2] = \"CustomItem\";\n})(FocusedItemType || (FocusedItemType = {}));\n/** @hidden */\nvar MultiSelectWithoutContext = /** @class */ (function (_super) {\n    __extends(MultiSelectWithoutContext, _super);\n    function MultiSelectWithoutContext(props) {\n        var _this = _super.call(this, props) || this;\n        /**\n         * @hidden\n         */\n        _this.state = {\n            activedescendant: ActiveDescendant.PopupList\n        };\n        _this._valueItemsDuringOnChange = null;\n        _this._inputId = guid();\n        _this.base = new DropDownBase(_this);\n        _this._tags = [];\n        _this._skipFocusEvent = false;\n        _this.scrollToFocused = false;\n        /**\n         * @hidden\n         */\n        _this.focus = function () {\n            if (_this._input) {\n                _this._input.focus();\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.handleItemSelect = function (index, state) {\n            var _a = _this.props, _b = _a.data, data = _b === void 0 ? [] : _b, dataItemKey = _a.dataItemKey, virtual = _a.virtual;\n            var skip = virtual ? virtual.skip : 0;\n            var dataItem = data[index - skip];\n            var indexInValue = _this.value.findIndex(function (i) { return areSame(i, dataItem, dataItemKey); });\n            var newItems = [];\n            if (indexInValue !== -1) { // item is already selected\n                newItems = _this.value;\n                newItems.splice(indexInValue, 1);\n            }\n            else {\n                newItems = _this.value.concat([dataItem]);\n            }\n            var text = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n            if (text) {\n                if (_this.state.text) {\n                    state.data.text = '';\n                }\n                _this.base.filterChanged('', state);\n            }\n            if (_this.state.focusedIndex !== undefined) {\n                state.data.focusedIndex = undefined;\n            }\n            _this.triggerOnChange(newItems, state);\n            _this.base.triggerPageChangeCornerItems(dataItem, state);\n        };\n        /**\n         * @hidden\n         */\n        _this.onTagDelete = function (itemsToRemove, event) {\n            var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n            var state = _this.base.initState();\n            state.syntheticEvent = event;\n            if (opened) {\n                _this.base.togglePopup(state);\n            }\n            if (!_this.state.focused) {\n                state.data.focused = true;\n                _this.focus();\n            }\n            var selected = _this.value;\n            removeDataItems(selected, itemsToRemove, _this.props.dataItemKey);\n            _this.triggerOnChange(selected, state);\n            _this.applyState(state);\n        };\n        /**\n         * @hidden\n         */\n        _this.itemFocus = function (index, state) {\n            var _a = _this.props, _b = _a.data, data = _b === void 0 ? [] : _b, allowCustom = _a.allowCustom, virtual = _a.virtual;\n            var skip = virtual ? virtual.skip : 0;\n            var text = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n            var focusedIndex = _this.getFocusedState().focusedIndex;\n            var customItem = allowCustom && text;\n            var nextFocusedItem = data[index - skip];\n            if (nextFocusedItem && focusedIndex !== index) {\n                if (_this.state.focusedIndex !== index) {\n                    state.data.focusedIndex = index;\n                    state.data.activedescendant = ActiveDescendant.PopupList;\n                }\n            }\n            else if (customItem && index === -1) {\n                if (_this.state.focusedIndex !== undefined) {\n                    state.data.focusedIndex = undefined;\n                }\n            }\n            _this.base.triggerPageChangeCornerItems(nextFocusedItem, state);\n        };\n        _this.searchbarRef = function (searchbar) {\n            var input = _this._input = searchbar && searchbar.input;\n            if (input && _this.state.focused) {\n                window.setTimeout(function () { return input.focus(); }, 0);\n            }\n        };\n        _this.onChangeHandler = function (event) {\n            var state = _this.base.initState();\n            var value = event.currentTarget.value;\n            var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n            state.syntheticEvent = event;\n            if (_this.props.filter === undefined) {\n                state.data.text = value;\n            }\n            state.data.focusedIndex = undefined;\n            if (!opened) {\n                _this.base.togglePopup(state);\n            }\n            _this.base.filterChanged(value, state);\n            _this.applyState(state);\n        };\n        _this.clearButtonClick = function (event) {\n            var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n            var state = _this.base.initState();\n            state.syntheticEvent = event;\n            event.stopPropagation();\n            if (_this.value.length > 0) {\n                _this.triggerOnChange([], state);\n            }\n            if (_this.state.focusedIndex !== undefined) {\n                state.data.focusedIndex = undefined;\n            }\n            if (opened) {\n                _this.base.togglePopup(state);\n            }\n            var text = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n            if (isPresent(text) && text !== '') {\n                _this.base.filterChanged('', state);\n            }\n            if (_this.state.text) {\n                state.data.text = '';\n            }\n            _this.applyState(state);\n        };\n        _this.onInputKeyDown = function (event) {\n            var keyCode = event.keyCode;\n            var text = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n            var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n            var focusedItem = _this.getFocusedState().focusedItem;\n            var state = _this.base.initState();\n            state.syntheticEvent = event;\n            if (!text && _this.value.length > 0 &&\n                (keyCode === Keys.left || keyCode === Keys.right ||\n                    keyCode === Keys.home || keyCode === Keys.end ||\n                    keyCode === Keys.delete || keyCode === Keys.backspace)) {\n                return _this.onTagsNavigate(event, state);\n            }\n            var togglePopup = function () {\n                event.preventDefault();\n                _this.base.togglePopup(state);\n                _this.applyState(state);\n            };\n            if (opened) {\n                if (event.altKey && keyCode === Keys.up) {\n                    togglePopup();\n                }\n                else if (keyCode === Keys.up || keyCode === Keys.down) {\n                    event.preventDefault();\n                    _this.onNavigate(state, keyCode);\n                }\n                else if (keyCode === Keys.enter) {\n                    event.preventDefault();\n                    if (_this.props.allowCustom && text && focusedItem === null) {\n                        _this.customItemSelect(event);\n                    }\n                    else {\n                        _this.selectFocusedItem(event);\n                    }\n                }\n                else if (keyCode === Keys.esc) {\n                    togglePopup();\n                }\n            }\n            else if (event.altKey && keyCode === Keys.down) {\n                togglePopup();\n            }\n        };\n        _this.renderListContainer = function () {\n            var base = _this.base;\n            var _a = _this.props, header = _a.header, footer = _a.footer, allowCustom = _a.allowCustom, dir = _a.dir, _b = _a.data, data = _b === void 0 ? [] : _b;\n            var popupSettings = _this.base.getPopupSettings();\n            var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n            var text = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n            var virtual = _this.props.virtual !== undefined;\n            var popupWidth = popupSettings.width !== undefined ? popupSettings.width : base.popupWidth;\n            var listContainerProps = {\n                dir: dir !== undefined ? dir : base.dirCalculated,\n                width: popupWidth,\n                popupSettings: {\n                    popupClass: popupSettings.popupClass,\n                    className: classNames('k-list-container k-reset', popupSettings.className),\n                    animate: popupSettings.animate,\n                    anchor: _this.element,\n                    show: opened,\n                    onOpen: _this.onPopupOpened,\n                    onClose: _this.onPopupClosed,\n                    appendTo: popupSettings.appendTo\n                },\n                itemsCount: [data.length, _this.value.length]\n            };\n            var focusedType = _this.getFocusedState().focusedType;\n            var customItem = allowCustom && text && (React.createElement(\"div\", { className: \"k-list\", key: \"customitem\", onClick: _this.customItemSelect, onMouseDown: preventDefault },\n                React.createElement(\"div\", { className: classNames('k-item k-custom-item', { 'k-state-focused': isCustom(focusedType) }) },\n                    text,\n                    React.createElement(\"span\", { className: \"k-icon k-i-plus\", style: { float: 'right' } }))));\n            return (React.createElement(ListContainer, __assign({}, listContainerProps),\n                virtual && header,\n                _this.base.renderScrollWrapper(React.createElement(React.Fragment, null,\n                    !virtual && header,\n                    customItem,\n                    _this.renderList(),\n                    !virtual && footer,\n                    _this.base.renderScrollElement())),\n                virtual && footer));\n        };\n        _this.renderList = function () {\n            var _a = _this.props, _b = _a.data, data = _b === void 0 ? [] : _b, textField = _a.textField, listNoDataRender = _a.listNoDataRender, itemRender = _a.itemRender, dataItemKey = _a.dataItemKey, virtual = _a.virtual;\n            var vs = _this.base.vs;\n            var skip = virtual ? virtual.skip : 0;\n            var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n            var focusedIndex = _this.getFocusedState().focusedIndex;\n            var popupSettings = _this.base.getPopupSettings();\n            var translate = \"translateY(\" + vs.translate + \"px)\";\n            return (React.createElement(List, { id: _this.base.listBoxId, show: opened, data: data.slice(), focusedIndex: focusedIndex - skip, value: _this.value, textField: textField, valueField: dataItemKey, optionsGuid: _this.base.guid, listRef: function (list) { vs.list = _this.base.list = list; }, wrapperStyle: vs.enabled ?\n                    { float: 'left', width: '100%' } : { maxHeight: popupSettings.height }, wrapperCssClass: vs.enabled ? undefined : 'k-list-scroller', listStyle: vs.enabled ? { transform: translate } : undefined, key: \"listKey\", skip: skip, onClick: _this.handleItemClick, itemRender: itemRender, noDataRender: listNoDataRender, onMouseDown: preventDefault, onBlur: _this.handleBlur }));\n        };\n        _this.customItemSelect = function (event) {\n            var _a;\n            var itemText = _this.props.filter !== undefined ? _this.props.filter : _this.state.text;\n            var textField = _this.props.textField;\n            if (!itemText) {\n                return;\n            }\n            var state = _this.base.initState();\n            state.syntheticEvent = event;\n            var item = textField ? (_a = {}, _a[textField] = itemText, _a) : itemText;\n            if (_this.state.text !== undefined) {\n                state.data.text = '';\n            }\n            state.data.focusedIndex = undefined;\n            _this.base.filterChanged('', state);\n            var newItems = _this.value.concat([item]);\n            _this.triggerOnChange(newItems, state);\n            _this.base.togglePopup(state);\n            _this.applyState(state);\n        };\n        _this.handleWrapperClick = function (event) {\n            var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n            var input = _this._input;\n            if (!opened && input) {\n                _this.focusElement(input);\n            }\n            var state = _this.base.initState();\n            state.syntheticEvent = event;\n            if (!_this.state.focused) {\n                state.events.push({ type: 'onFocus' });\n                state.data.focused = true;\n            }\n            _this.base.togglePopup(state);\n            _this.applyState(state);\n        };\n        _this.handleItemClick = function (index, event) {\n            var state = _this.base.initState();\n            state.syntheticEvent = event;\n            _this.handleItemSelect(index, state);\n            if (_this.props.autoClose) {\n                _this.base.togglePopup(state);\n            }\n            _this.applyState(state);\n        };\n        _this.handleBlur = function (event) {\n            if (!_this.state.focused || _this._skipFocusEvent) {\n                return;\n            }\n            var opened = _this.props.opened !== undefined ? _this.props.opened : _this.state.opened;\n            var state = _this.base.initState();\n            var _a = _this.props, allowCustom = _a.allowCustom, filterable = _a.filterable;\n            state.syntheticEvent = event;\n            state.data.focused = false;\n            state.events.push({ type: 'onBlur' });\n            if (opened) {\n                if (_this.state.opened) {\n                    state.data.opened = false;\n                }\n                state.events.push({ type: 'onClose' });\n            }\n            if (!allowCustom && !filterable && _this.state.text) {\n                state.data.text = '';\n            }\n            _this.applyState(state);\n        };\n        _this.handleFocus = function (event) {\n            if (_this._skipFocusEvent) {\n                return;\n            }\n            _this.base.handleFocus(event);\n        };\n        _this.onPopupOpened = function () {\n            if (_this._input && _this.state.focused) {\n                _this.focusElement(_this._input);\n            }\n        };\n        _this.onPopupClosed = function () {\n            if (_this.state.focused) {\n                window.setTimeout(function () { if (_this.state.focused) {\n                    _this.focusElement(_this._input);\n                } }, 0);\n            }\n        };\n        _this.setValidity = function () {\n            if (_this._input && _this._input.setCustomValidity) {\n                _this._input.setCustomValidity(_this.validity.valid\n                    ? ''\n                    : _this.props.validationMessage || VALIDATION_MESSAGE);\n            }\n        };\n        validatePackage(packageMetadata);\n        return _this;\n    }\n    Object.defineProperty(MultiSelectWithoutContext.prototype, \"element\", {\n        /**\n         * @hidden\n         */\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiSelectWithoutContext.prototype, \"value\", {\n        /**\n         * Represents the value of the MultiSelect.\n         */\n        get: function () {\n            var result = [];\n            if (this._valueItemsDuringOnChange) {\n                result.push.apply(result, this._valueItemsDuringOnChange);\n            }\n            else if (this.props.value) {\n                result.push.apply(result, this.props.value);\n            }\n            else if (this.state.value) {\n                result.push.apply(result, this.state.value);\n            }\n            else if (this.props.defaultValue) {\n                result.push.apply(result, this.props.defaultValue);\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiSelectWithoutContext.prototype, \"name\", {\n        /**\n         * Gets the `name` property of the MultiSelect.\n         */\n        get: function () {\n            return this.props.name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiSelectWithoutContext.prototype, \"validity\", {\n        /**\n         * Represents the validity state into which the MultiSelect is set.\n         */\n        get: function () {\n            var customError = this.props.validationMessage !== undefined;\n            var isValid = (!this.required\n                || (this.value !== null && this.value.length > 0 && this.value !== undefined));\n            var valid = this.props.valid !== undefined ? this.props.valid : isValid;\n            return {\n                customError: customError,\n                valid: valid,\n                valueMissing: this.value === null\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiSelectWithoutContext.prototype, \"required\", {\n        /**\n         * @hidden\n         */\n        get: function () {\n            return this.props.required !== undefined\n                ? this.props.required\n                : MultiSelectWithoutContext.defaultProps.required;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiSelectWithoutContext.prototype, \"validityStyles\", {\n        get: function () {\n            return this.props.validityStyles !== undefined\n                ? this.props.validityStyles\n                : MultiSelectWithoutContext.defaultProps.validityStyles;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    MultiSelectWithoutContext.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var virtual = this.props.virtual;\n        var skip = virtual ? virtual.skip : 0;\n        var prevTotal = prevProps.virtual ? prevProps.virtual.total : 0;\n        var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n        var prevOpened = prevProps.opened !== undefined ? prevProps.opened : prevState.opened;\n        var opening = !prevOpened && opened;\n        var closing = prevOpened && !opened;\n        var popupSettings = this.base.getPopupSettings();\n        if (!popupSettings.animate && closing) {\n            this.onPopupClosed();\n        }\n        if (virtual && virtual.total !== prevTotal) {\n            this.base.vs.calcScrollElementHeight();\n            this.base.vs.reset();\n        }\n        else {\n            var _a = this.getFocusedState(), focusedItem = _a.focusedItem, focusedIndex = _a.focusedIndex;\n            if (opening && virtual) {\n                this.base.scrollToVirtualItem(virtual, focusedIndex - skip);\n            }\n            else if (opening && !virtual) {\n                this.base.scrollToItem(focusedIndex);\n            }\n            else if (opened && prevOpened && focusedItem && this.scrollToFocused) {\n                this.base.scrollToItem(focusedIndex - skip);\n            }\n        }\n        this.scrollToFocused = false;\n        this.setValidity();\n    };\n    /**\n     * @hidden\n     */\n    MultiSelectWithoutContext.prototype.componentDidMount = function () {\n        this.base.didMount();\n        this.setValidity();\n    };\n    /**\n     * @hidden\n     */\n    MultiSelectWithoutContext.prototype.onNavigate = function (state, keyCode) {\n        var _a = this.props, allowCustom = _a.allowCustom, _b = _a.data, data = _b === void 0 ? [] : _b;\n        var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n        var text = this.props.filter !== undefined ? this.props.filter : this.state.text;\n        var _c = this.getFocusedState(), focusedType = _c.focusedType, focusedIndex = _c.focusedIndex;\n        var customItem = allowCustom && text;\n        var customItemFocused = isCustom(focusedType);\n        var base = this.base;\n        var vs = base.vs;\n        if (opened && keyCode === Keys.up && customItemFocused) {\n            if (this.state.focusedIndex !== undefined) {\n                state.data.focusedIndex = undefined;\n            }\n        }\n        else {\n            var newFocused = base.navigation.navigate({\n                keyCode: keyCode,\n                current: focusedIndex,\n                max: (vs.enabled ? vs.total : data.length) - 1,\n                min: customItem ? -1 : 0\n            });\n            if (newFocused !== undefined) {\n                this.itemFocus(newFocused, state);\n                this.scrollToFocused = true;\n            }\n        }\n        this.applyState(state);\n    };\n    /**\n     * @hidden\n     */\n    MultiSelectWithoutContext.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, style = _a.style, className = _a.className, label = _a.label, dir = _a.dir, disabled = _a.disabled, tags = _a.tags, textField = _a.textField, dataItemKey = _a.dataItemKey, virtual = _a.virtual;\n        var _b = this.state, focused = _b.focused, text = _b.text, focusedTag = _b.focusedTag;\n        var vs = this.base.vs;\n        var id = this.props.id || this._inputId;\n        vs.enabled = virtual !== undefined;\n        if (virtual !== undefined) {\n            vs.skip = virtual.skip;\n            vs.total = virtual.total;\n            vs.pageSize = virtual.pageSize;\n        }\n        var tagsToRender = [];\n        if (tags === undefined) {\n            this.value.forEach(function (item) {\n                tagsToRender.push({ text: getItemValue(item, textField), data: [item] });\n            });\n        }\n        else {\n            tagsToRender.push.apply(tagsToRender, tags);\n        }\n        this.setItems(tagsToRender, this._tags);\n        var isValid = !this.validityStyles || this.validity.valid;\n        var component = (React.createElement(\"span\", { ref: function (dropdown) { return _this._element = dropdown; }, className: classNames('k-widget k-multiselect', className, {\n                'k-state-focused': focused && !disabled,\n                'k-state-invalid': !isValid,\n                'k-state-disabled': disabled\n            }), style: !label\n                ? style\n                : __assign({}, style, { width: undefined }), dir: dir, onFocus: this.handleFocus, onBlur: this.handleBlur },\n            React.createElement(\"div\", { onClick: this.handleWrapperClick, ref: function (wrapper) { return _this.base.wrapper = wrapper; }, className: \"k-multiselect-wrap k-floatwrap\", onMouseDown: preventDefaultNonInputs },\n                tagsToRender.length > 0 && React.createElement(TagList, { tagRender: this.props.tagRender, onTagDelete: this.onTagDelete, data: tagsToRender, guid: this.base.guid, focused: focusedTag ? tagsToRender.find(function (t) { return matchTags(t, focusedTag, dataItemKey); }) : undefined }),\n                this.renderSearchbar(id)),\n            this.renderListContainer()));\n        return label ? (React.createElement(FloatingLabel, { label: label, editorId: id, editorValue: text || getItemValue(this.value[0], textField), editorValid: isValid, editorDisabled: disabled, style: { width: style ? style.width : undefined }, children: component })) : component;\n    };\n    MultiSelectWithoutContext.prototype.renderSearchbar = function (id) {\n        var _a = this.state, activedescendant = _a.activedescendant, focusedTag = _a.focusedTag;\n        var _b = this.props, disabled = _b.disabled, placeholder = _b.placeholder, ariaDescribedBy = _b.ariaDescribedBy;\n        var text = (this.props.filter !== undefined ? this.props.filter : this.state.text) || '';\n        var opened = this.props.opened !== undefined ? this.props.opened : this.state.opened;\n        var focusedIndex = this.getFocusedState().focusedIndex;\n        var clearButton = !!text || this.value.length > 0;\n        var placeholderToShow = this.value.length === 0 && !text ? placeholder : undefined;\n        var ariaActivedescendant = activedescendant === ActiveDescendant.TagsList && focusedTag !== undefined ?\n            \"tag-\" + this.base.guid + \"-\" + focusedTag.text.replace(/\\s+/g, '-') :\n            \"option-\" + this.base.guid + \"-\" + focusedIndex;\n        return (React.createElement(SearchBar, { id: id, size: Math.max((placeholderToShow || '').length, text.length, 1), tabIndex: this.props.tabIndex, accessKey: this.props.accessKey, placeholder: placeholderToShow, value: text, onChange: this.onChangeHandler, onKeyDown: this.onInputKeyDown, ref: this.searchbarRef, disabled: disabled, expanded: opened, owns: this.base.listBoxId, activedescendant: ariaActivedescendant, ariaDescribedBy: \"tagslist-\" + this.base.guid + (ariaDescribedBy ? (' ' + ariaDescribedBy) : ''), clearButton: clearButton, clearButtonClick: this.clearButtonClick, loading: this.props.loading, ariaLabelledBy: this.props.ariaLabelledBy }));\n    };\n    MultiSelectWithoutContext.prototype.onTagsNavigate = function (event, state) {\n        var keyCode = event.keyCode;\n        var focusedTag = this.state.focusedTag;\n        var tags = this._tags;\n        var itemsKey = this.props.dataItemKey;\n        var focusedIndex = focusedTag ?\n            tags.findIndex(function (t) { return matchTags(t, focusedTag, itemsKey); }) : -1;\n        var newFocusedTag = undefined;\n        var hasFocused = focusedIndex !== -1;\n        if (keyCode === Keys.left) {\n            if (hasFocused) {\n                focusedIndex = Math.max(0, focusedIndex - 1);\n            }\n            else {\n                focusedIndex = tags.length - 1;\n            }\n            newFocusedTag = tags[focusedIndex];\n        }\n        else if (keyCode === Keys.right) {\n            if (focusedIndex === tags.length - 1) {\n                newFocusedTag = undefined;\n            }\n            else if (hasFocused) {\n                focusedIndex = Math.min(tags.length - 1, focusedIndex + 1);\n                newFocusedTag = tags[focusedIndex];\n            }\n        }\n        else if (keyCode === Keys.home) {\n            newFocusedTag = tags[0];\n        }\n        else if (keyCode === Keys.end) {\n            newFocusedTag = tags[tags.length - 1];\n        }\n        else if (keyCode === Keys.delete) {\n            if (hasFocused) {\n                var items = this.value;\n                removeDataItems(items, tags[focusedIndex].data, itemsKey);\n                this.triggerOnChange(items, state);\n            }\n        }\n        else if (keyCode === Keys.backspace) {\n            var items = this.value;\n            if (hasFocused) {\n                removeDataItems(items, tags[focusedIndex].data, itemsKey);\n                this.triggerOnChange(items, state);\n            }\n            else if (!hasFocused && tags.length) {\n                var removed = tags.pop();\n                removeDataItems(items, removed.data, itemsKey);\n                this.triggerOnChange(items, state);\n            }\n        }\n        if (newFocusedTag !== focusedTag) {\n            state.data.focusedTag = newFocusedTag;\n            state.data.activedescendant = ActiveDescendant.TagsList;\n        }\n        this.applyState(state);\n    };\n    MultiSelectWithoutContext.prototype.triggerOnChange = function (items, state) {\n        if (this.props.value === undefined) {\n            state.data.value = items.slice();\n        }\n        this._valueItemsDuringOnChange = [];\n        this.setItems(items, this._valueItemsDuringOnChange);\n        state.events.push({ type: 'onChange' });\n    };\n    MultiSelectWithoutContext.prototype.selectFocusedItem = function (event) {\n        var _a = this.props, _b = _a.data, data = _b === void 0 ? [] : _b, virtual = _a.virtual;\n        var focusedIndex = this.getFocusedState().focusedIndex;\n        var skip = virtual ? virtual.skip : 0;\n        if (data[focusedIndex - skip] !== undefined) {\n            this.handleItemClick(focusedIndex, event);\n        }\n    };\n    MultiSelectWithoutContext.prototype.setItems = function (srcItems, destItems) {\n        destItems.length = 0;\n        destItems.push.apply(destItems, srcItems);\n    };\n    MultiSelectWithoutContext.prototype.getFocusedState = function () {\n        var focusedIndex = this.state.focusedIndex;\n        var text = this.props.filter !== undefined ? this.props.filter : this.state.text;\n        var _a = this.props, allowCustom = _a.allowCustom, _b = _a.data, data = _b === void 0 ? [] : _b, dataItemKey = _a.dataItemKey, virtual = _a.virtual, textField = _a.textField, _c = _a.focusedItemIndex, focusedItemIndex = _c === void 0 ? itemIndexStartsWith : _c;\n        var skip = (virtual && virtual.skip) || 0;\n        var focusedInd;\n        if (focusedIndex !== undefined) {\n            return {\n                focusedIndex: focusedIndex,\n                focusedItem: data[focusedIndex - skip],\n                focusedType: FocusedItemType.ListItem\n            };\n        }\n        var selected = this.value;\n        if (allowCustom && text) {\n            return { focusedItem: null, focusedIndex: -1, focusedType: FocusedItemType.CustomItem };\n        }\n        else if (text) {\n            focusedInd = focusedItemIndex(data, text, textField);\n            return {\n                focusedItem: data[focusedInd],\n                focusedIndex: focusedInd + skip,\n                focusedType: FocusedItemType.ListItem\n            };\n        }\n        else if (selected.length) {\n            var last_1 = selected[selected.length - 1];\n            focusedInd = data.findIndex(function (i) { return areSame(i, last_1, dataItemKey); });\n            if (data[focusedInd] !== undefined) {\n                return {\n                    focusedIndex: focusedInd + skip,\n                    focusedItem: data[focusedInd],\n                    focusedType: FocusedItemType.ListItem\n                };\n            }\n            return { focusedType: FocusedItemType.None, focusedIndex: -1 };\n        }\n        return skip === 0 ?\n            { focusedItem: data[0], focusedIndex: 0, focusedType: FocusedItemType.ListItem } :\n            { focusedType: FocusedItemType.None, focusedIndex: -1 };\n    };\n    MultiSelectWithoutContext.prototype.focusElement = function (element) {\n        var _this = this;\n        this._skipFocusEvent = true;\n        element.focus();\n        window.setTimeout(function () { return _this._skipFocusEvent = false; }, 0);\n    };\n    MultiSelectWithoutContext.prototype.applyState = function (state) {\n        this.base.applyState(state);\n        this._valueItemsDuringOnChange = null;\n    };\n    MultiSelectWithoutContext.displayName = 'MultiSelect';\n    /**\n     * @hidden\n     */\n    MultiSelectWithoutContext.propTypes = __assign({}, DropDownBase.propTypes, { autoClose: PropTypes.bool, value: PropTypes.arrayOf(PropTypes.any), defaultValue: PropTypes.arrayOf(PropTypes.any), dataItemKey: PropTypes.string, placeholder: PropTypes.string, tags: PropTypes.arrayOf(PropTypes.shape({\n            text: PropTypes.string,\n            data: PropTypes.arrayOf(PropTypes.any)\n        })), tagRender: PropTypes.func, id: PropTypes.string, ariaLabelledBy: PropTypes.string, ariaDescribedBy: PropTypes.string });\n    /**\n     * @hidden\n     */\n    MultiSelectWithoutContext.defaultProps = __assign({}, DropDownBase.defaultProps, { autoClose: true, required: false });\n    return MultiSelectWithoutContext;\n}(React.Component));\nexport { MultiSelectWithoutContext };\n/**\n * Represents the PropsContext of the `MultiSelect` component.\n * Used for global configuration of all `MultiSelect` instances.\n *\n * For more information, refer to the [Dropdowns Props Context]({% slug props-context_dropdowns %}) article.\n */\nexport var MultiSelectPropsContext = createPropsContext();\n/* eslint-disable @typescript-eslint/no-redeclare -- intentionally naming the component the same as the type */\n/**\n * Represents the [KendoReact MultiSelect component]({% slug overview_multiselect %}).\n *\n * Accepts properties of type [MultiSelectProps]({% slug api_dropdowns_multiselectprops %}).\n * Obtaining the `ref` returns an object of type [MultiSelectHandle]({% slug api_dropdowns_multiselecthandle %}).\n *\n * @example\n * ```jsx\n * class App extends React.Component {\n *    multiselect = null;\n *    render() {\n *       return (\n *          <div>\n *              <MultiSelect\n *                  data={[ \"Albania\", \"Andorra\", \"Austria\", \"Belarus\" ]}\n *                  ref={component => this.multiselect = component}\n *              />\n *              <button onClick={() => alert(this.multiselect.value)}>alert value</button>\n *          </div>\n *       );\n *    }\n * }\n * ReactDOM.render(<App />, document.querySelector('my-app'));\n * ```\n */\nexport var MultiSelect = withPropsContext(MultiSelectPropsContext, MultiSelectWithoutContext);\nMultiSelect.displayName = 'KendoReactMultiSelect';\n"]},"metadata":{},"sourceType":"module"}