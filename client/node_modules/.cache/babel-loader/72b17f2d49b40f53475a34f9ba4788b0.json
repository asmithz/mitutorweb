{"ast":null,"code":"import { isPresent, isNullOrEmptyString } from '../utils';\nimport { parseRule } from '@progress/kendo-recurrence';\nimport { toLocalDate } from '@progress/kendo-date-math';\n/** @hidden */\n\nexport var capitalize = function (value) {\n  return value.charAt(0).toUpperCase() + value.slice(1);\n};\n/** @hidden */\n\nexport var OFFSET_POSITIONS = ['first', 'second', 'third', 'fourth', 'last'];\n/** @hidden */\n\nexport var FREQUENCIES = ['never', 'daily', 'weekly', 'monthly', 'yearly'];\n/** @hidden */\n\nexport var dayRule = [{\n  day: 0,\n  offset: 0\n}, {\n  day: 1,\n  offset: 0\n}, {\n  day: 2,\n  offset: 0\n}, {\n  day: 3,\n  offset: 0\n}, {\n  day: 4,\n  offset: 0\n}, {\n  day: 5,\n  offset: 0\n}, {\n  day: 6,\n  offset: 0\n}];\n/** @hidden */\n\nexport var weekdayRule = [{\n  day: 1,\n  offset: 0\n}, {\n  day: 2,\n  offset: 0\n}, {\n  day: 3,\n  offset: 0\n}, {\n  day: 4,\n  offset: 0\n}, {\n  day: 5,\n  offset: 0\n}];\n/** @hidden */\n\nexport var weekendRule = [{\n  day: 0,\n  offset: 0\n}, {\n  day: 6,\n  offset: 0\n}];\n/** @hidden */\n\nexport var weekDayRuleFromString = function (weekDay) {\n  switch (weekDay) {\n    case 'day':\n      return dayRule;\n\n    case 'weekday':\n      return weekdayRule;\n\n    case 'weekend':\n      return weekendRule;\n\n    default:\n      break;\n  }\n\n  return;\n};\n/** @hidden */\n\nexport var getRule = function (recurrenceRule) {\n  return parseRule({\n    recurrenceRule: recurrenceRule\n  }) || {};\n};\n/** @hidden */\n\nexport var getFrequencies = function (localizeMessage) {\n  return FREQUENCIES.map(function (freq) {\n    return {\n      value: freq,\n      text: localizeMessage('Frequencies' + capitalize(freq))\n    };\n  });\n};\n/** @hidden */\n\nexport var getFrequency = function (rrule) {\n  if (isPresent(rrule) && !isNullOrEmptyString(rrule.freq)) {\n    return rrule.freq;\n  }\n\n  return 'never';\n};\n/** @hidden */\n\nexport var getUntil = function (rrule) {\n  if (isPresent(rrule.until)) {\n    return toLocalDate(rrule.until);\n  }\n\n  return null;\n};\n/** @hidden */\n\nexport var getMonths = function (intl) {\n  return intl.dateFormatNames({\n    type: 'months',\n    nameType: 'wide'\n  }).map(function (month, idx) {\n    return {\n      text: month,\n      value: idx + 1\n    };\n  });\n};\n/** @hidden */\n\nexport var getWeekDays = function (intl) {\n  var firstDay = intl.firstDay();\n  var abbrNames = intl.dateFormatNames({\n    type: 'days',\n    nameType: 'abbreviated'\n  }).map(function (day, idx) {\n    return {\n      text: day,\n      value: idx\n    };\n  });\n  /* Sorting according to first week day */\n\n  return abbrNames.slice(firstDay).concat(abbrNames.slice(0, firstDay));\n};\n/** @hidden */\n\nexport var getWeekDay = function (weekDays, rrule, start) {\n  return weekDays.find(function (item) {\n    var value;\n\n    if (isPresent(rrule.byWeekDay)) {\n      var weekDaysCount = rrule.byWeekDay.length;\n\n      switch (weekDaysCount) {\n        case 7:\n          value = 'day';\n          break;\n\n        case 5:\n          value = 'weekday';\n          break;\n\n        case 2:\n          value = 'weekend';\n          break;\n\n        case 1:\n          value = rrule.byWeekDay[0].day;\n          break;\n\n        default:\n          value = start.getDay();\n          break;\n      }\n    }\n\n    return value === item.value;\n  }) || weekDays[0];\n};\n/** @hidden */\n\nexport var getExtendedWeekDays = function (intl, localizeMessage) {\n  var firstDay = intl.firstDay();\n  var wideNames = intl.dateFormatNames({\n    type: 'days',\n    nameType: 'wide'\n  }).map(function (day, idx) {\n    return {\n      text: day,\n      value: idx\n    };\n  });\n  var sortedWideNames = wideNames.slice(firstDay).concat(wideNames.slice(0, firstDay));\n  var specialRules = [{\n    text: localizeMessage('WeekdaysDay'),\n    value: 'day'\n  }, {\n    text: localizeMessage('WeekdaysWeekday'),\n    value: 'weekday'\n  }, {\n    text: localizeMessage('WeekdaysWeekendday'),\n    value: 'weekend'\n  }];\n  return specialRules.concat(sortedWideNames);\n};\n/** @hidden */\n\nexport var getOffset = function (offsets, rrule) {\n  return offsets.find(function (offset) {\n    return offset.value === (rrule.bySetPosition ? rrule.bySetPosition[0] : rrule.byWeekDay && rrule.byWeekDay[0] ? rrule.byWeekDay[0].offset : 1);\n  }) || offsets[0];\n};\n/** @hidden */\n\nexport var getOffsets = function (localizeMessage) {\n  var values = [1, 2, 3, 4, -1];\n  return OFFSET_POSITIONS.map(function (offset, idx) {\n    return {\n      text: localizeMessage('OffsetPositions' + capitalize(offset)),\n      value: values[idx]\n    };\n  });\n};\n/** @hidden */\n\nexport var getEndRule = function (rrule) {\n  if (isPresent(rrule.count)) {\n    return 'count';\n  } else if (isPresent(rrule.until)) {\n    return 'until';\n  } else {\n    return 'never';\n  }\n};\n/** @hidden */\n\nexport var getRepeatOnRule = function (rrule) {\n  if (isPresent(rrule.byWeekDay)) {\n    return 'weekday';\n  } else if (isPresent(rrule.byMonthDay)) {\n    return 'monthday';\n  }\n};\n/** @hidden */\n\nexport var getMonth = function (months, rrule) {\n  return months.find(function (month) {\n    return (rrule.byMonth ? rrule.byMonth[0] : null) === month.value;\n  }) || months[0];\n};\n/** @hidden */\n\nexport var getMonthDay = function (rrule, start) {\n  if (isPresent(rrule.byMonthDay) && rrule.byMonthDay.length > 0) {\n    return rrule.byMonthDay[0];\n  } else {\n    return start.getDate();\n  }\n};\n/** @hidden */\n\nexport var getUntilEnd = function (start, until) {\n  var currentStart = start;\n  var currentUntil = until;\n\n  if (isPresent(currentUntil)) {\n    return currentUntil;\n  } else {\n    return new Date(currentStart.getFullYear(), currentStart.getMonth(), currentStart.getDate(), 23, 59, 59);\n  }\n};\n/** @hidden */\n\nexport var getUntilMin = function (start, until) {\n  var currentStart = start;\n  var currentUntil = until;\n\n  if (isPresent(currentUntil) && currentUntil < currentStart) {\n    return currentUntil;\n  } else {\n    return currentStart;\n  }\n};","map":{"version":3,"sources":["/home/asmith/taller/proyecto1/proyecto-taller/client/node_modules/@progress/kendo-react-scheduler/dist/es/recurrence/common.js"],"names":["isPresent","isNullOrEmptyString","parseRule","toLocalDate","capitalize","value","charAt","toUpperCase","slice","OFFSET_POSITIONS","FREQUENCIES","dayRule","day","offset","weekdayRule","weekendRule","weekDayRuleFromString","weekDay","getRule","recurrenceRule","getFrequencies","localizeMessage","map","freq","text","getFrequency","rrule","getUntil","until","getMonths","intl","dateFormatNames","type","nameType","month","idx","getWeekDays","firstDay","abbrNames","concat","getWeekDay","weekDays","start","find","item","byWeekDay","weekDaysCount","length","getDay","getExtendedWeekDays","wideNames","sortedWideNames","specialRules","getOffset","offsets","bySetPosition","getOffsets","values","getEndRule","count","getRepeatOnRule","byMonthDay","getMonth","months","byMonth","getMonthDay","getDate","getUntilEnd","currentStart","currentUntil","Date","getFullYear","getUntilMin"],"mappings":"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","sourcesContent":["import { isPresent, isNullOrEmptyString } from '../utils';\nimport { parseRule } from '@progress/kendo-recurrence';\nimport { toLocalDate } from '@progress/kendo-date-math';\n/** @hidden */\nexport var capitalize = function (value) { return value.charAt(0).toUpperCase() + value.slice(1); };\n/** @hidden */\nexport var OFFSET_POSITIONS = ['first', 'second', 'third', 'fourth', 'last'];\n/** @hidden */\nexport var FREQUENCIES = ['never', 'daily', 'weekly', 'monthly', 'yearly'];\n/** @hidden */\nexport var dayRule = [\n    { day: 0, offset: 0 },\n    { day: 1, offset: 0 },\n    { day: 2, offset: 0 },\n    { day: 3, offset: 0 },\n    { day: 4, offset: 0 },\n    { day: 5, offset: 0 },\n    { day: 6, offset: 0 }\n];\n/** @hidden */\nexport var weekdayRule = [\n    { day: 1, offset: 0 },\n    { day: 2, offset: 0 },\n    { day: 3, offset: 0 },\n    { day: 4, offset: 0 },\n    { day: 5, offset: 0 }\n];\n/** @hidden */\nexport var weekendRule = [\n    { day: 0, offset: 0 },\n    { day: 6, offset: 0 }\n];\n/** @hidden */\nexport var weekDayRuleFromString = function (weekDay) {\n    switch (weekDay) {\n        case 'day':\n            return dayRule;\n        case 'weekday':\n            return weekdayRule;\n        case 'weekend':\n            return weekendRule;\n        default:\n            break;\n    }\n    return;\n};\n/** @hidden */\nexport var getRule = function (recurrenceRule) {\n    return parseRule({ recurrenceRule: recurrenceRule }) || {};\n};\n/** @hidden */\nexport var getFrequencies = function (localizeMessage) {\n    return FREQUENCIES.map(function (freq) { return ({\n        value: freq,\n        text: localizeMessage('Frequencies' + capitalize(freq))\n    }); });\n};\n/** @hidden */\nexport var getFrequency = function (rrule) {\n    if (isPresent(rrule) && !isNullOrEmptyString(rrule.freq)) {\n        return rrule.freq;\n    }\n    return 'never';\n};\n/** @hidden */\nexport var getUntil = function (rrule) {\n    if (isPresent(rrule.until)) {\n        return toLocalDate(rrule.until);\n    }\n    return null;\n};\n/** @hidden */\nexport var getMonths = function (intl) {\n    return intl.dateFormatNames({\n        type: 'months',\n        nameType: 'wide'\n    }).map(function (month, idx) { return ({\n        text: month,\n        value: idx + 1\n    }); });\n};\n/** @hidden */\nexport var getWeekDays = function (intl) {\n    var firstDay = intl.firstDay();\n    var abbrNames = intl.dateFormatNames({\n        type: 'days',\n        nameType: 'abbreviated'\n    }).map(function (day, idx) { return ({\n        text: day,\n        value: idx\n    }); });\n    /* Sorting according to first week day */\n    return (abbrNames.slice(firstDay)).concat(abbrNames.slice(0, firstDay));\n};\n/** @hidden */\nexport var getWeekDay = function (weekDays, rrule, start) {\n    return weekDays.find(function (item) {\n        var value;\n        if (isPresent(rrule.byWeekDay)) {\n            var weekDaysCount = rrule.byWeekDay.length;\n            switch (weekDaysCount) {\n                case 7:\n                    value = 'day';\n                    break;\n                case 5:\n                    value = 'weekday';\n                    break;\n                case 2:\n                    value = 'weekend';\n                    break;\n                case 1:\n                    value = rrule.byWeekDay[0].day;\n                    break;\n                default:\n                    value = start.getDay();\n                    break;\n            }\n        }\n        return value === item.value;\n    }) || weekDays[0];\n};\n/** @hidden */\nexport var getExtendedWeekDays = function (intl, localizeMessage) {\n    var firstDay = intl.firstDay();\n    var wideNames = intl.dateFormatNames({\n        type: 'days',\n        nameType: 'wide'\n    }).map(function (day, idx) { return ({\n        text: day,\n        value: idx\n    }); });\n    var sortedWideNames = (wideNames.slice(firstDay)).concat(wideNames.slice(0, firstDay));\n    var specialRules = [\n        { text: localizeMessage('WeekdaysDay'), value: 'day' },\n        { text: localizeMessage('WeekdaysWeekday'), value: 'weekday' },\n        { text: localizeMessage('WeekdaysWeekendday'), value: 'weekend' }\n    ];\n    return specialRules.concat(sortedWideNames);\n};\n/** @hidden */\nexport var getOffset = function (offsets, rrule) {\n    return offsets.find(function (offset) { return offset.value === (rrule.bySetPosition\n        ? rrule.bySetPosition[0]\n        : rrule.byWeekDay && rrule.byWeekDay[0]\n            ? rrule.byWeekDay[0].offset\n            : 1); }) || offsets[0];\n};\n/** @hidden */\nexport var getOffsets = function (localizeMessage) {\n    var values = [1, 2, 3, 4, -1];\n    return OFFSET_POSITIONS.map(function (offset, idx) { return ({\n        text: localizeMessage('OffsetPositions' + capitalize(offset)),\n        value: values[idx]\n    }); });\n};\n/** @hidden */\nexport var getEndRule = function (rrule) {\n    if (isPresent(rrule.count)) {\n        return 'count';\n    }\n    else if (isPresent(rrule.until)) {\n        return 'until';\n    }\n    else {\n        return 'never';\n    }\n};\n/** @hidden */\nexport var getRepeatOnRule = function (rrule) {\n    if (isPresent(rrule.byWeekDay)) {\n        return 'weekday';\n    }\n    else if (isPresent(rrule.byMonthDay)) {\n        return 'monthday';\n    }\n};\n/** @hidden */\nexport var getMonth = function (months, rrule) {\n    return months.find(function (month) { return (rrule.byMonth ? rrule.byMonth[0] : null) === month.value; }) || months[0];\n};\n/** @hidden */\nexport var getMonthDay = function (rrule, start) {\n    if (isPresent(rrule.byMonthDay) && rrule.byMonthDay.length > 0) {\n        return rrule.byMonthDay[0];\n    }\n    else {\n        return start.getDate();\n    }\n};\n/** @hidden */\nexport var getUntilEnd = function (start, until) {\n    var currentStart = start;\n    var currentUntil = until;\n    if (isPresent(currentUntil)) {\n        return currentUntil;\n    }\n    else {\n        return new Date(currentStart.getFullYear(), currentStart.getMonth(), currentStart.getDate(), 23, 59, 59);\n    }\n};\n/** @hidden */\nexport var getUntilMin = function (start, until) {\n    var currentStart = start;\n    var currentUntil = until;\n    if (isPresent(currentUntil) && currentUntil < currentStart) {\n        return currentUntil;\n    }\n    else {\n        return currentStart;\n    }\n};\n"]},"metadata":{},"sourceType":"module"}