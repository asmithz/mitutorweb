{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { WindowTitleBar } from './WindowTitlebar';\nimport { dispatchEvent, Keys, classNames, guid, ZIndexContext, canUseDOM } from '@progress/kendo-react-common';\nimport { Draggable } from '@progress/kendo-react-common';\nimport { ResizeHandlers } from './WindowResizeHandlers';\nimport { MiddleLayerOptimization } from './MiddleLayerOptimization';\nimport { windowStage } from './StageEnum';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\nimport { WindowActionsBar } from './WindowActionsBar';\nimport { DATA_DIALOGS_ID, DEFAULT_DIALOGS_ZINDEX, ZINDEX_DIALOGS_STEP } from './constants';\nimport { getMaxZIndex } from './utils';\nvar DEFAULT_WIDTH = 300;\nvar DEFAULT_HEIGHT = 300;\nvar DEFAULT_MIN_WIDTH = 120;\nvar DEFAULT_MIN_HEIGHT = 100;\nvar DEFAULT_STEP = 5;\n\nvar Window =\n/** @class */\nfunction (_super) {\n  __extends(Window, _super);\n\n  function Window(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.offSetCoordinates = {\n      x: 0,\n      y: 0\n    };\n    _this._id = guid();\n    /**\n     * @hidden\n     */\n\n    _this.onKeyDown = function (event) {\n      if (event.target !== event.currentTarget) {\n        return;\n      }\n\n      var minWidth = _this.props.minWidth || DEFAULT_MIN_WIDTH;\n      var minHeight = _this.props.minHeight || DEFAULT_MIN_HEIGHT;\n\n      if (event.ctrlKey && _this.props.resizable) {\n        switch (event.keyCode) {\n          case Keys.up:\n            event.preventDefault();\n\n            if (minHeight <= _this.height - DEFAULT_STEP) {\n              _this.setState({\n                height: _this.height - DEFAULT_STEP\n              });\n            }\n\n            break;\n\n          case Keys.down:\n            event.preventDefault();\n\n            _this.setState({\n              height: _this.height + DEFAULT_STEP\n            });\n\n            break;\n\n          case Keys.left:\n            if (minWidth <= _this.width - DEFAULT_STEP) {\n              _this.setState({\n                width: _this.width - DEFAULT_STEP\n              });\n            }\n\n            break;\n\n          case Keys.right:\n            _this.setState({\n              width: _this.width + DEFAULT_STEP\n            });\n\n            break;\n\n          default:\n            return;\n        }\n\n        _this.dispatchMoveEvent(_this.props.onResize, event, false, undefined);\n\n        return;\n      }\n\n      if (event.altKey) {\n        switch (event.keyCode) {\n          case Keys.up:\n            if (_this.windowStage === windowStage.MINIMIZED) {\n              _this.handleRestore(event);\n\n              dispatchEvent(_this.props.onStageChange, event, _this, {\n                state: windowStage.DEFAULT\n              });\n            } else if (_this.windowStage === windowStage.DEFAULT) {\n              _this.handleFullscreen(event);\n\n              dispatchEvent(_this.props.onStageChange, event, _this, {\n                state: windowStage.FULLSCREEN\n              });\n            }\n\n            break;\n\n          case Keys.down:\n            if (_this.windowStage === windowStage.FULLSCREEN) {\n              _this.handleRestore(event);\n\n              dispatchEvent(_this.props.onStageChange, event, _this, {\n                state: windowStage.DEFAULT\n              });\n            } else if (_this.windowStage === windowStage.DEFAULT) {\n              _this.handleMinimize(event);\n\n              dispatchEvent(_this.props.onStageChange, event, _this, {\n                state: windowStage.MINIMIZED\n              });\n            }\n\n            break;\n\n          default:\n        }\n\n        return;\n      }\n\n      if (!event.ctrlKey) {\n        switch (event.keyCode) {\n          case Keys.esc:\n            if (_this.props.onClose) {\n              _this.handleCloseWindow(event);\n            }\n\n            return;\n\n          case Keys.up:\n            _this.setState({\n              top: _this.state.top - DEFAULT_STEP\n            });\n\n            break;\n\n          case Keys.down:\n            _this.setState({\n              top: _this.state.top + DEFAULT_STEP\n            });\n\n            break;\n\n          case Keys.left:\n            _this.setState({\n              left: _this.state.left - DEFAULT_STEP\n            });\n\n            break;\n\n          case Keys.right:\n            _this.setState({\n              left: _this.state.left + DEFAULT_STEP\n            });\n\n            break;\n\n          default:\n            return;\n        }\n      }\n\n      _this.dispatchMoveEvent(_this.props.onMove, event, false, undefined);\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onPress = function (data) {\n      var e = data.event;\n      _this.windowCoordinatesState.differenceLeft = e.pageX - _this.left;\n      _this.windowCoordinatesState.differenceTop = e.pageY - _this.top;\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onDrag = function (data) {\n      var e = data.event;\n      e.originalEvent.preventDefault();\n\n      if (_this.windowStage !== windowStage.FULLSCREEN && _this.props.draggable) {\n        _this.setState({\n          top: Math.max(e.pageY - _this.windowCoordinatesState.differenceTop, 0),\n          left: e.pageX - _this.windowCoordinatesState.differenceLeft,\n          isDragging: true\n        });\n\n        if (_this.props.onMove) {\n          // eslint-disable-next-line max-len\n          _this.dispatchMoveEvent(_this.props.onMove, e, true, false);\n        }\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onRelease = function (data) {\n      var e = data.event;\n\n      if (_this.windowStage !== windowStage.FULLSCREEN && _this.props.draggable) {\n        if (_this.props.onMove) {\n          _this.dispatchMoveEvent(_this.props.onMove, e, true, true);\n        }\n      }\n\n      _this.setState({\n        isDragging: false\n      });\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onFocus = function () {\n      if (_this._blurTimeout) {\n        clearTimeout(_this._blurTimeout);\n        _this._blurTimeout = undefined;\n      } else {\n        _this.setState({\n          focused: true,\n          zIndex: getMaxZIndex(_this.getCurrentZIndex(), _this.getDocument(), _this._id)\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onBlur = function () {\n      clearTimeout(_this._blurTimeout);\n\n      var currentWindow = _this.getWindow();\n\n      if (currentWindow) {\n        _this._blurTimeout = currentWindow.setTimeout(function () {\n          _this.setState({\n            focused: false\n          });\n\n          _this._blurTimeout = undefined;\n        });\n      }\n    }; // Get initial coordinates of the Window\n\n\n    _this.getInitialTop = function () {\n      if (_this.props.top !== undefined) {\n        return _this.props.top;\n      }\n\n      if (_this.props.initialTop !== undefined) {\n        return _this.props.initialTop;\n      }\n\n      var height = DEFAULT_HEIGHT;\n\n      if (_this.props.height !== undefined) {\n        height = _this.props.height;\n      } else if (_this.props.initialHeight !== undefined) {\n        height = _this.props.initialHeight;\n      }\n\n      if (_this.props.appendTo) {\n        return _this.props.appendTo.offsetHeight / 2 - height / 2;\n      }\n\n      var currentWindow = _this.getWindow();\n\n      return currentWindow ? currentWindow.innerHeight / 2 - height / 2 : 0;\n    };\n\n    _this.getInitialLeft = function () {\n      if (_this.props.left !== undefined) {\n        return _this.props.left;\n      }\n\n      if (_this.props.initialLeft !== undefined) {\n        return _this.props.initialLeft;\n      }\n\n      var width = DEFAULT_WIDTH;\n\n      if (_this.props.width !== undefined) {\n        width = _this.props.width;\n      } else if (_this.props.initialWidth !== undefined) {\n        width = _this.props.initialWidth;\n      }\n\n      if (_this.props.appendTo) {\n        return _this.props.appendTo.offsetWidth / 2 - width / 2;\n      }\n\n      var currentWindow = _this.getWindow();\n\n      return currentWindow ? currentWindow.innerWidth / 2 - width / 2 : 0;\n    };\n\n    _this.getInitialWidth = function () {\n      var width = DEFAULT_WIDTH;\n\n      if (_this.props.width !== undefined) {\n        width = _this.props.width;\n      } else if (_this.props.initialWidth !== undefined) {\n        width = _this.props.initialWidth;\n      }\n\n      return width;\n    };\n\n    _this.getInitialHeight = function () {\n      var height = DEFAULT_HEIGHT;\n\n      if (_this.props.height !== undefined) {\n        height = _this.props.height;\n      } else if (_this.props.initialHeight !== undefined) {\n        height = _this.props.initialHeight;\n      }\n\n      return height;\n    }; // Handle actions\n\n\n    _this.handleMinimize = function (event) {\n      event.preventDefault();\n      _this.windowCoordinatesState.leftBeforeAction = _this.left;\n      _this.windowCoordinatesState.topBeforeAction = _this.top;\n      _this.windowCoordinatesState.widthBeforeAction = _this.width;\n      _this.windowCoordinatesState.heightBeforeAction = _this.height;\n\n      _this.setState({\n        stage: windowStage.MINIMIZED,\n        height: 0\n      });\n\n      dispatchEvent(_this.props.onStageChange, event, _this, {\n        state: windowStage.MINIMIZED\n      });\n    };\n\n    _this.handleFullscreen = function (event) {\n      event.preventDefault();\n      _this.windowCoordinatesState.leftBeforeAction = _this.left;\n      _this.windowCoordinatesState.topBeforeAction = _this.top;\n      _this.windowCoordinatesState.widthBeforeAction = _this.width;\n      _this.windowCoordinatesState.heightBeforeAction = _this.height;\n\n      var currentWindow = _this.getWindow();\n\n      var innerWidth = currentWindow ? currentWindow.innerWidth : 0;\n      var innerHeight = currentWindow ? currentWindow.innerHeight : 0;\n\n      _this.setState({\n        left: 0,\n        top: 0,\n        width: _this.props.appendTo ? _this.props.appendTo.offsetWidth : innerWidth,\n        height: _this.props.appendTo ? _this.props.appendTo.offsetHeight : innerHeight,\n        stage: windowStage.FULLSCREEN\n      });\n\n      dispatchEvent(_this.props.onStageChange, event, _this, {\n        state: windowStage.FULLSCREEN\n      });\n    };\n\n    _this.handleRestore = function (event) {\n      event.preventDefault();\n\n      if (_this.windowStage === windowStage.FULLSCREEN) {\n        _this.setState({\n          stage: windowStage.DEFAULT,\n          left: _this.windowCoordinatesState.leftBeforeAction,\n          top: _this.windowCoordinatesState.topBeforeAction,\n          width: _this.windowCoordinatesState.widthBeforeAction,\n          height: _this.windowCoordinatesState.heightBeforeAction\n        });\n      } else if (_this.windowStage === windowStage.MINIMIZED) {\n        _this.setState({\n          stage: windowStage.DEFAULT,\n          height: _this.windowCoordinatesState.heightBeforeAction\n        });\n      }\n\n      dispatchEvent(_this.props.onStageChange, event, _this, {\n        state: windowStage.DEFAULT\n      });\n    };\n\n    _this.handleCloseWindow = function (event) {\n      event.preventDefault();\n      dispatchEvent(_this.props.onClose, event, _this, {\n        state: undefined\n      });\n    };\n\n    _this.handleDoubleClick = function (e) {\n      if (_this.windowStage === windowStage.FULLSCREEN || _this.windowStage === windowStage.MINIMIZED) {\n        _this.handleRestore(e);\n      } else {\n        _this.handleFullscreen(e);\n      }\n    }; // Handle resizing\n\n\n    _this.handleResize = function (event, props) {\n      var x = _this.props.appendTo ? event.pageX - _this.offSetCoordinates.x : event.pageX;\n      var y = _this.props.appendTo ? event.pageY - _this.offSetCoordinates.y : event.pageY;\n      var currentWidth = _this.width;\n      var currentHeight = _this.height;\n      var minWidth = _this.props.minWidth || DEFAULT_MIN_WIDTH;\n      var minHeight = _this.props.minHeight || DEFAULT_MIN_HEIGHT;\n      var heightDifference = _this.top - y;\n      var widthDifference = _this.left - x;\n      var newWidth = x - _this.left;\n      var newHeight = y - _this.top;\n      var newState = Object.assign({}, _this.state, {\n        isDragging: !props.end\n      });\n\n      if (props.direction.indexOf('n') >= 0 && minHeight - (currentHeight + heightDifference) < 0) {\n        if (_this.top > 0) {\n          newState.height = currentHeight + heightDifference;\n        }\n\n        newState.top = y;\n      }\n\n      if (props.direction.indexOf('s') >= 0 && minHeight - newHeight < 0) {\n        newState.height = newHeight;\n      }\n\n      if (props.direction.indexOf('w') >= 0 && minWidth - (currentWidth + widthDifference) < 0) {\n        if (_this.left > 0) {\n          newState.width = currentWidth + widthDifference;\n        }\n\n        newState.left = x;\n      }\n\n      if (props.direction.indexOf('e') >= 0 && minWidth - newWidth < 0) {\n        newState.width = newWidth;\n      }\n\n      _this.setState(newState);\n\n      _this.dispatchMoveEvent(_this.props.onResize, event, true, props.end);\n    }; // Dispatcher for the resize and move events\n\n\n    _this.dispatchMoveEvent = function (callback, event, drag, end) {\n      if (!callback) {\n        return;\n      }\n\n      callback.call(undefined, {\n        nativeEvent: event.nativeEvent ? event.nativeEvent : event.originalEvent,\n        drag: drag,\n        end: end,\n        target: _this,\n        left: _this.state.left,\n        top: _this.state.top,\n        width: _this.state.width,\n        hight: _this.state.height,\n        height: _this.state.height\n      });\n    };\n\n    _this.handleBrowserWindowResize = function () {\n      if (_this.windowStage === windowStage.FULLSCREEN) {\n        var currentWindow = _this.getWindow();\n\n        var innerWidth_1 = currentWindow ? currentWindow.innerWidth : 0;\n        var innerHeight_1 = currentWindow ? currentWindow.innerHeight : 0;\n\n        _this.setState({\n          width: _this.props.appendTo ? _this.props.appendTo.offsetWidth : innerWidth_1,\n          height: _this.props.appendTo ? _this.props.appendTo.offsetHeight : innerHeight_1\n        });\n      }\n    };\n\n    _this.getCurrentZIndex = function () {\n      if (!_this.state) {\n        return _this.context ? _this.context : DEFAULT_DIALOGS_ZINDEX;\n      }\n\n      return _this.state.zIndex > (_this.context ? _this.context + ZINDEX_DIALOGS_STEP : 0) ? _this.state.zIndex : _this.context + ZINDEX_DIALOGS_STEP;\n    };\n\n    _this.getDocument = function () {\n      return _this.props.appendTo ? _this.props.appendTo.ownerDocument : document;\n    };\n\n    _this.getWindow = function () {\n      var currentDocument = _this.getDocument();\n\n      return currentDocument && currentDocument.defaultView;\n    };\n\n    validatePackage(packageMetadata);\n    _this.state = {\n      stage: _this.props.stage || windowStage.DEFAULT,\n      isDragging: false,\n      top: _this.getInitialTop(),\n      left: _this.getInitialLeft(),\n      width: _this.getInitialWidth(),\n      height: _this.getInitialHeight(),\n      focused: true,\n      zIndex: getMaxZIndex(_this.getCurrentZIndex(), _this.getDocument(), _this._id)\n    };\n    _this.windowCoordinatesState = {\n      leftBeforeAction: _this.getInitialLeft(),\n      topBeforeAction: _this.getInitialTop(),\n      widthBeforeAction: _this.getInitialWidth(),\n      heightBeforeAction: _this.getInitialHeight()\n    };\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n\n\n  Window.prototype.componentDidMount = function () {\n    var currentWindow = this.getWindow();\n\n    if (currentWindow) {\n      currentWindow.addEventListener('resize', this.handleBrowserWindowResize);\n    }\n\n    var currentDocument = this.getDocument();\n\n    if (this.props.appendTo && currentDocument) {\n      var containerCoordinates = this.props.appendTo.getBoundingClientRect();\n      var bodyRect = currentDocument.body.getBoundingClientRect();\n      this.offSetCoordinates.x = containerCoordinates.left - bodyRect.left;\n      this.offSetCoordinates.y = containerCoordinates.top - bodyRect.top;\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  Window.prototype.componentWillUnmount = function () {\n    var currentWindow = this.getWindow();\n\n    if (currentWindow) {\n      currentWindow.removeEventListener('resize', this.handleBrowserWindowResize);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  Window.prototype.componentDidUpdate = function () {\n    var currentDocument = this.getDocument();\n\n    if (this.props.appendTo && currentDocument) {\n      var containerCoordinates = this.props.appendTo.getBoundingClientRect();\n      var bodyRect = currentDocument.body.getBoundingClientRect();\n      this.offSetCoordinates.x = containerCoordinates.left - bodyRect.left;\n      this.offSetCoordinates.y = containerCoordinates.top - bodyRect.top;\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  Window.prototype.render = function () {\n    var _this = this;\n\n    var _a;\n\n    var elementsArray = React.Children.toArray(this.props.children);\n    var content = this.getContent(elementsArray);\n    var actions = this.getActionBar(elementsArray);\n    var currentZIndex = this.getCurrentZIndex();\n    var classNamesWindow = classNames('k-widget', 'k-window', this.props.className, {\n      'k-window-minimized': this.state.stage === 'MINIMIZED'\n    }, {\n      'k-window-focused': this.state.focused\n    });\n    var windowElement = React.createElement(ZIndexContext.Provider, {\n      value: currentZIndex\n    }, React.createElement(React.Fragment, null, this.props.modal && React.createElement(\"div\", {\n      className: \"k-overlay\",\n      style: __assign({\n        zIndex: currentZIndex\n      }, this.props.overlayStyle)\n    }), React.createElement(\"div\", __assign({}, (_a = {}, _a[DATA_DIALOGS_ID] = this._id, _a), {\n      tabIndex: 0,\n      onFocus: this.onFocus,\n      onBlur: this.onBlur,\n      onKeyDown: this.onKeyDown,\n      ref: function (el) {\n        _this.windowElement = el;\n        _this.element = el;\n      },\n      className: classNamesWindow,\n      style: __assign({\n        top: this.top,\n        left: this.left,\n        width: this.width,\n        height: this.height || '',\n        zIndex: currentZIndex\n      }, this.props.style)\n    }), React.createElement(MiddleLayerOptimization, {\n      shouldUpdateOnDrag: this.props.shouldUpdateOnDrag || false,\n      isDragging: this.state.isDragging\n    }, React.createElement(Draggable, {\n      onPress: this.onPress,\n      onDrag: this.onDrag,\n      onRelease: this.onRelease,\n      ref: function (component) {\n        return _this.draggable = component;\n      }\n    }, React.createElement(WindowTitleBar, {\n      stage: this.windowStage,\n      onDoubleClick: this.props.doubleClickStageChange ? this.handleDoubleClick : undefined,\n      onMinimizeButtonClick: this.handleMinimize,\n      onFullScreenButtonClick: this.handleFullscreen,\n      onRestoreButtonClick: this.handleRestore,\n      onCloseButtonClick: this.handleCloseWindow,\n      closeButton: this.props.closeButton,\n      minimizeButton: this.props.minimizeButton,\n      maximizeButton: this.props.maximizeButton,\n      restoreButton: this.props.restoreButton\n    }, this.props.title)), this.windowStage !== windowStage.MINIMIZED ? React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"k-window-content\"\n    }, content), actions) : null, this.windowStage === windowStage.DEFAULT && this.props.resizable ? React.createElement(ResizeHandlers, {\n      onResize: this.handleResize\n    }) : null))));\n\n    if (canUseDOM) {\n      return ReactDOM.createPortal(windowElement, this.props.appendTo || document.body);\n    }\n\n    return null;\n  };\n\n  Object.defineProperty(Window.prototype, \"top\", {\n    // Getters\n    get: function () {\n      if (this.windowStage !== windowStage.FULLSCREEN) {\n        return Math.max(this.props.top || this.state.top, 0);\n      }\n\n      return 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Window.prototype, \"left\", {\n    get: function () {\n      if (this.windowStage !== windowStage.FULLSCREEN) {\n        return Math.max(this.props.left || this.state.left, 0);\n      }\n\n      return 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Window.prototype, \"width\", {\n    get: function () {\n      var width = this.props.width || this.state.width;\n\n      if (this.windowStage === windowStage.FULLSCREEN) {\n        if (this.props.appendTo) {\n          width = this.props.appendTo.offsetWidth;\n          return width;\n        }\n\n        var currentWindow = this.getWindow();\n        width = currentWindow ? currentWindow.innerWidth : 0;\n      }\n\n      return width;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Window.prototype, \"height\", {\n    get: function () {\n      var height = this.props.height || this.state.height;\n\n      if (this.windowStage === windowStage.FULLSCREEN) {\n        if (this.props.appendTo) {\n          height = this.props.appendTo.offsetHeight;\n          return height;\n        }\n\n        var currentWindow = this.getWindow();\n        height = currentWindow ? currentWindow.innerHeight : 0;\n      } else if (this.windowStage === windowStage.MINIMIZED) {\n        height = 0;\n      }\n\n      return height;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Window.prototype, \"windowStage\", {\n    get: function () {\n      return this.props.stage || this.state.stage;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Window.prototype.getActionBar = function (children) {\n    return children.filter(function (child) {\n      return child && child.type === WindowActionsBar;\n    });\n  };\n\n  Window.prototype.getContent = function (children) {\n    return children.filter(function (child) {\n      return child && child.type !== WindowActionsBar;\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  Window.propTypes = {\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    left: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    top: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    initialwidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    initialHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    initialLeft: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    initialTop: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    minWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    minHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    resizable: PropTypes.bool,\n    draggable: PropTypes.bool,\n    title: PropTypes.any,\n    shouldUpdateOnDrag: PropTypes.bool,\n    stage: PropTypes.oneOf(['DEFAULT', 'MINIMIZED', 'FULLSCREEN']),\n    className: PropTypes.string,\n    style: PropTypes.object,\n    overlayStyle: PropTypes.object\n  };\n  /**\n   * @hidden\n   */\n\n  Window.defaultProps = {\n    minWidth: DEFAULT_MIN_WIDTH,\n    minHeight: DEFAULT_MIN_HEIGHT,\n    resizable: true,\n    draggable: true,\n    modal: false,\n    doubleClickStageChange: true\n  };\n  /**\n   * @hidden\n   */\n\n  Window.contextType = ZIndexContext;\n  return Window;\n}(React.Component);\n\nexport { Window };","map":{"version":3,"sources":["/home/asmith/taller/proyecto1/proyecto-taller/client/node_modules/@progress/kendo-react-dialogs/dist/es/Window.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","React","ReactDOM","PropTypes","WindowTitleBar","dispatchEvent","Keys","classNames","guid","ZIndexContext","canUseDOM","Draggable","ResizeHandlers","MiddleLayerOptimization","windowStage","validatePackage","packageMetadata","WindowActionsBar","DATA_DIALOGS_ID","DEFAULT_DIALOGS_ZINDEX","ZINDEX_DIALOGS_STEP","getMaxZIndex","DEFAULT_WIDTH","DEFAULT_HEIGHT","DEFAULT_MIN_WIDTH","DEFAULT_MIN_HEIGHT","DEFAULT_STEP","Window","_super","props","_this","offSetCoordinates","x","y","_id","onKeyDown","event","target","currentTarget","minWidth","minHeight","ctrlKey","resizable","keyCode","up","preventDefault","height","setState","down","left","width","right","dispatchMoveEvent","onResize","undefined","altKey","MINIMIZED","handleRestore","onStageChange","state","DEFAULT","handleFullscreen","FULLSCREEN","handleMinimize","esc","onClose","handleCloseWindow","top","onMove","onPress","data","e","windowCoordinatesState","differenceLeft","pageX","differenceTop","pageY","onDrag","originalEvent","draggable","Math","max","isDragging","onRelease","onFocus","_blurTimeout","clearTimeout","focused","zIndex","getCurrentZIndex","getDocument","onBlur","currentWindow","getWindow","setTimeout","getInitialTop","initialTop","initialHeight","appendTo","offsetHeight","innerHeight","getInitialLeft","initialLeft","initialWidth","offsetWidth","innerWidth","getInitialWidth","getInitialHeight","leftBeforeAction","topBeforeAction","widthBeforeAction","heightBeforeAction","stage","handleDoubleClick","handleResize","currentWidth","currentHeight","heightDifference","widthDifference","newWidth","newHeight","newState","end","direction","indexOf","callback","drag","nativeEvent","hight","handleBrowserWindowResize","innerWidth_1","innerHeight_1","context","ownerDocument","document","currentDocument","defaultView","componentDidMount","addEventListener","containerCoordinates","getBoundingClientRect","bodyRect","body","componentWillUnmount","removeEventListener","componentDidUpdate","render","_a","elementsArray","Children","toArray","children","content","getContent","actions","getActionBar","currentZIndex","classNamesWindow","className","windowElement","createElement","Provider","value","Fragment","modal","style","overlayStyle","tabIndex","ref","el","element","shouldUpdateOnDrag","component","onDoubleClick","doubleClickStageChange","onMinimizeButtonClick","onFullScreenButtonClick","onRestoreButtonClick","onCloseButtonClick","closeButton","minimizeButton","maximizeButton","restoreButton","title","createPortal","defineProperty","get","enumerable","configurable","filter","child","type","propTypes","oneOfType","number","string","initialwidth","bool","any","oneOf","object","defaultProps","contextType","Component"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { WindowTitleBar } from './WindowTitlebar';\nimport { dispatchEvent, Keys, classNames, guid, ZIndexContext, canUseDOM } from '@progress/kendo-react-common';\nimport { Draggable } from '@progress/kendo-react-common';\nimport { ResizeHandlers } from './WindowResizeHandlers';\nimport { MiddleLayerOptimization } from './MiddleLayerOptimization';\nimport { windowStage } from './StageEnum';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\nimport { WindowActionsBar } from './WindowActionsBar';\nimport { DATA_DIALOGS_ID, DEFAULT_DIALOGS_ZINDEX, ZINDEX_DIALOGS_STEP } from './constants';\nimport { getMaxZIndex } from './utils';\nvar DEFAULT_WIDTH = 300;\nvar DEFAULT_HEIGHT = 300;\nvar DEFAULT_MIN_WIDTH = 120;\nvar DEFAULT_MIN_HEIGHT = 100;\nvar DEFAULT_STEP = 5;\nvar Window = /** @class */ (function (_super) {\n    __extends(Window, _super);\n    function Window(props) {\n        var _this = _super.call(this, props) || this;\n        _this.offSetCoordinates = { x: 0, y: 0 };\n        _this._id = guid();\n        /**\n         * @hidden\n         */\n        _this.onKeyDown = function (event) {\n            if (event.target !== event.currentTarget) {\n                return;\n            }\n            var minWidth = _this.props.minWidth || DEFAULT_MIN_WIDTH;\n            var minHeight = _this.props.minHeight || DEFAULT_MIN_HEIGHT;\n            if (event.ctrlKey && _this.props.resizable) {\n                switch (event.keyCode) {\n                    case Keys.up:\n                        event.preventDefault();\n                        if (minHeight <= (_this.height - DEFAULT_STEP)) {\n                            _this.setState({ height: _this.height - DEFAULT_STEP });\n                        }\n                        break;\n                    case Keys.down:\n                        event.preventDefault();\n                        _this.setState({ height: _this.height + DEFAULT_STEP });\n                        break;\n                    case Keys.left:\n                        if (minWidth <= (_this.width - DEFAULT_STEP)) {\n                            _this.setState({ width: _this.width - DEFAULT_STEP });\n                        }\n                        break;\n                    case Keys.right:\n                        _this.setState({ width: _this.width + DEFAULT_STEP });\n                        break;\n                    default: return;\n                }\n                _this.dispatchMoveEvent(_this.props.onResize, event, false, undefined);\n                return;\n            }\n            if (event.altKey) {\n                switch (event.keyCode) {\n                    case Keys.up:\n                        if (_this.windowStage === windowStage.MINIMIZED) {\n                            _this.handleRestore(event);\n                            dispatchEvent(_this.props.onStageChange, event, _this, { state: windowStage.DEFAULT });\n                        }\n                        else if (_this.windowStage === windowStage.DEFAULT) {\n                            _this.handleFullscreen(event);\n                            dispatchEvent(_this.props.onStageChange, event, _this, { state: windowStage.FULLSCREEN });\n                        }\n                        break;\n                    case Keys.down:\n                        if (_this.windowStage === windowStage.FULLSCREEN) {\n                            _this.handleRestore(event);\n                            dispatchEvent(_this.props.onStageChange, event, _this, { state: windowStage.DEFAULT });\n                        }\n                        else if (_this.windowStage === windowStage.DEFAULT) {\n                            _this.handleMinimize(event);\n                            dispatchEvent(_this.props.onStageChange, event, _this, { state: windowStage.MINIMIZED });\n                        }\n                        break;\n                    default:\n                }\n                return;\n            }\n            if (!event.ctrlKey) {\n                switch (event.keyCode) {\n                    case Keys.esc:\n                        if (_this.props.onClose) {\n                            _this.handleCloseWindow(event);\n                        }\n                        return;\n                    case Keys.up:\n                        _this.setState({ top: _this.state.top - DEFAULT_STEP });\n                        break;\n                    case Keys.down:\n                        _this.setState({ top: _this.state.top + DEFAULT_STEP });\n                        break;\n                    case Keys.left:\n                        _this.setState({ left: _this.state.left - DEFAULT_STEP });\n                        break;\n                    case Keys.right:\n                        _this.setState({ left: _this.state.left + DEFAULT_STEP });\n                        break;\n                    default: return;\n                }\n            }\n            _this.dispatchMoveEvent(_this.props.onMove, event, false, undefined);\n        };\n        /**\n         * @hidden\n         */\n        _this.onPress = function (data) {\n            var e = data.event;\n            _this.windowCoordinatesState.differenceLeft = e.pageX - _this.left;\n            _this.windowCoordinatesState.differenceTop = e.pageY - _this.top;\n        };\n        /**\n         * @hidden\n         */\n        _this.onDrag = function (data) {\n            var e = data.event;\n            e.originalEvent.preventDefault();\n            if (_this.windowStage !== windowStage.FULLSCREEN && _this.props.draggable) {\n                _this.setState({\n                    top: Math.max(e.pageY - _this.windowCoordinatesState.differenceTop, 0),\n                    left: e.pageX - _this.windowCoordinatesState.differenceLeft,\n                    isDragging: true\n                });\n                if (_this.props.onMove) {\n                    // eslint-disable-next-line max-len\n                    _this.dispatchMoveEvent(_this.props.onMove, e, true, false);\n                }\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.onRelease = function (data) {\n            var e = data.event;\n            if (_this.windowStage !== windowStage.FULLSCREEN && _this.props.draggable) {\n                if (_this.props.onMove) {\n                    _this.dispatchMoveEvent(_this.props.onMove, e, true, true);\n                }\n            }\n            _this.setState({\n                isDragging: false\n            });\n        };\n        /**\n         * @hidden\n         */\n        _this.onFocus = function () {\n            if (_this._blurTimeout) {\n                clearTimeout(_this._blurTimeout);\n                _this._blurTimeout = undefined;\n            }\n            else {\n                _this.setState({\n                    focused: true,\n                    zIndex: getMaxZIndex(_this.getCurrentZIndex(), _this.getDocument(), _this._id)\n                });\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.onBlur = function () {\n            clearTimeout(_this._blurTimeout);\n            var currentWindow = _this.getWindow();\n            if (currentWindow) {\n                _this._blurTimeout = currentWindow.setTimeout(function () {\n                    _this.setState({ focused: false });\n                    _this._blurTimeout = undefined;\n                });\n            }\n        };\n        // Get initial coordinates of the Window\n        _this.getInitialTop = function () {\n            if (_this.props.top !== undefined) {\n                return _this.props.top;\n            }\n            if (_this.props.initialTop !== undefined) {\n                return _this.props.initialTop;\n            }\n            var height = DEFAULT_HEIGHT;\n            if (_this.props.height !== undefined) {\n                height = _this.props.height;\n            }\n            else if (_this.props.initialHeight !== undefined) {\n                height = _this.props.initialHeight;\n            }\n            if (_this.props.appendTo) {\n                return (_this.props.appendTo.offsetHeight / 2) - (height / 2);\n            }\n            var currentWindow = _this.getWindow();\n            return currentWindow ? (currentWindow.innerHeight / 2) - (height / 2) : 0;\n        };\n        _this.getInitialLeft = function () {\n            if (_this.props.left !== undefined) {\n                return _this.props.left;\n            }\n            if (_this.props.initialLeft !== undefined) {\n                return _this.props.initialLeft;\n            }\n            var width = DEFAULT_WIDTH;\n            if (_this.props.width !== undefined) {\n                width = _this.props.width;\n            }\n            else if (_this.props.initialWidth !== undefined) {\n                width = _this.props.initialWidth;\n            }\n            if (_this.props.appendTo) {\n                return (_this.props.appendTo.offsetWidth / 2) - (width / 2);\n            }\n            var currentWindow = _this.getWindow();\n            return currentWindow ? (currentWindow.innerWidth / 2) - (width / 2) : 0;\n        };\n        _this.getInitialWidth = function () {\n            var width = DEFAULT_WIDTH;\n            if (_this.props.width !== undefined) {\n                width = _this.props.width;\n            }\n            else if (_this.props.initialWidth !== undefined) {\n                width = _this.props.initialWidth;\n            }\n            return width;\n        };\n        _this.getInitialHeight = function () {\n            var height = DEFAULT_HEIGHT;\n            if (_this.props.height !== undefined) {\n                height = _this.props.height;\n            }\n            else if (_this.props.initialHeight !== undefined) {\n                height = _this.props.initialHeight;\n            }\n            return height;\n        };\n        // Handle actions\n        _this.handleMinimize = function (event) {\n            event.preventDefault();\n            _this.windowCoordinatesState.leftBeforeAction = _this.left;\n            _this.windowCoordinatesState.topBeforeAction = _this.top;\n            _this.windowCoordinatesState.widthBeforeAction = _this.width;\n            _this.windowCoordinatesState.heightBeforeAction = _this.height;\n            _this.setState({\n                stage: windowStage.MINIMIZED,\n                height: 0\n            });\n            dispatchEvent(_this.props.onStageChange, event, _this, { state: windowStage.MINIMIZED });\n        };\n        _this.handleFullscreen = function (event) {\n            event.preventDefault();\n            _this.windowCoordinatesState.leftBeforeAction = _this.left;\n            _this.windowCoordinatesState.topBeforeAction = _this.top;\n            _this.windowCoordinatesState.widthBeforeAction = _this.width;\n            _this.windowCoordinatesState.heightBeforeAction = _this.height;\n            var currentWindow = _this.getWindow();\n            var innerWidth = currentWindow ? currentWindow.innerWidth : 0;\n            var innerHeight = currentWindow ? currentWindow.innerHeight : 0;\n            _this.setState({\n                left: 0,\n                top: 0,\n                width: _this.props.appendTo ? _this.props.appendTo.offsetWidth : innerWidth,\n                height: _this.props.appendTo ? _this.props.appendTo.offsetHeight : innerHeight,\n                stage: windowStage.FULLSCREEN\n            });\n            dispatchEvent(_this.props.onStageChange, event, _this, { state: windowStage.FULLSCREEN });\n        };\n        _this.handleRestore = function (event) {\n            event.preventDefault();\n            if (_this.windowStage === windowStage.FULLSCREEN) {\n                _this.setState({\n                    stage: windowStage.DEFAULT,\n                    left: _this.windowCoordinatesState.leftBeforeAction,\n                    top: _this.windowCoordinatesState.topBeforeAction,\n                    width: _this.windowCoordinatesState.widthBeforeAction,\n                    height: _this.windowCoordinatesState.heightBeforeAction\n                });\n            }\n            else if (_this.windowStage === windowStage.MINIMIZED) {\n                _this.setState({\n                    stage: windowStage.DEFAULT,\n                    height: _this.windowCoordinatesState.heightBeforeAction\n                });\n            }\n            dispatchEvent(_this.props.onStageChange, event, _this, { state: windowStage.DEFAULT });\n        };\n        _this.handleCloseWindow = function (event) {\n            event.preventDefault();\n            dispatchEvent(_this.props.onClose, event, _this, { state: undefined });\n        };\n        _this.handleDoubleClick = function (e) {\n            if (_this.windowStage === windowStage.FULLSCREEN || _this.windowStage === windowStage.MINIMIZED) {\n                _this.handleRestore(e);\n            }\n            else {\n                _this.handleFullscreen(e);\n            }\n        };\n        // Handle resizing\n        _this.handleResize = function (event, props) {\n            var x = _this.props.appendTo ? event.pageX - _this.offSetCoordinates.x : event.pageX;\n            var y = _this.props.appendTo ? event.pageY - _this.offSetCoordinates.y : event.pageY;\n            var currentWidth = _this.width;\n            var currentHeight = _this.height;\n            var minWidth = _this.props.minWidth || DEFAULT_MIN_WIDTH;\n            var minHeight = _this.props.minHeight || DEFAULT_MIN_HEIGHT;\n            var heightDifference = _this.top - y;\n            var widthDifference = _this.left - x;\n            var newWidth = x - _this.left;\n            var newHeight = y - _this.top;\n            var newState = Object.assign({}, _this.state, { isDragging: !props.end });\n            if (props.direction.indexOf('n') >= 0 && minHeight - (currentHeight + heightDifference) < 0) {\n                if (_this.top > 0) {\n                    newState.height = currentHeight + heightDifference;\n                }\n                newState.top = y;\n            }\n            if (props.direction.indexOf('s') >= 0 && (minHeight - newHeight < 0)) {\n                newState.height = newHeight;\n            }\n            if (props.direction.indexOf('w') >= 0 && minWidth - (currentWidth + widthDifference) < 0) {\n                if (_this.left > 0) {\n                    newState.width = currentWidth + widthDifference;\n                }\n                newState.left = x;\n            }\n            if (props.direction.indexOf('e') >= 0 && (minWidth - newWidth < 0)) {\n                newState.width = newWidth;\n            }\n            _this.setState(newState);\n            _this.dispatchMoveEvent(_this.props.onResize, event, true, props.end);\n        };\n        // Dispatcher for the resize and move events\n        _this.dispatchMoveEvent = function (callback, event, drag, end) {\n            if (!callback) {\n                return;\n            }\n            callback.call(undefined, {\n                nativeEvent: event.nativeEvent ? event.nativeEvent : event.originalEvent,\n                drag: drag,\n                end: end,\n                target: _this,\n                left: _this.state.left,\n                top: _this.state.top,\n                width: _this.state.width,\n                hight: _this.state.height,\n                height: _this.state.height\n            });\n        };\n        _this.handleBrowserWindowResize = function () {\n            if (_this.windowStage === windowStage.FULLSCREEN) {\n                var currentWindow = _this.getWindow();\n                var innerWidth_1 = currentWindow ? currentWindow.innerWidth : 0;\n                var innerHeight_1 = currentWindow ? currentWindow.innerHeight : 0;\n                _this.setState({\n                    width: _this.props.appendTo ? _this.props.appendTo.offsetWidth : innerWidth_1,\n                    height: _this.props.appendTo ? _this.props.appendTo.offsetHeight : innerHeight_1\n                });\n            }\n        };\n        _this.getCurrentZIndex = function () {\n            if (!_this.state) {\n                return _this.context ? _this.context : DEFAULT_DIALOGS_ZINDEX;\n            }\n            return _this.state.zIndex > (_this.context ? _this.context + ZINDEX_DIALOGS_STEP : 0) ? _this.state.zIndex : _this.context + ZINDEX_DIALOGS_STEP;\n        };\n        _this.getDocument = function () {\n            return _this.props.appendTo ? _this.props.appendTo.ownerDocument : document;\n        };\n        _this.getWindow = function () {\n            var currentDocument = _this.getDocument();\n            return currentDocument && currentDocument.defaultView;\n        };\n        validatePackage(packageMetadata);\n        _this.state = {\n            stage: _this.props.stage || windowStage.DEFAULT,\n            isDragging: false,\n            top: _this.getInitialTop(),\n            left: _this.getInitialLeft(),\n            width: _this.getInitialWidth(),\n            height: _this.getInitialHeight(),\n            focused: true,\n            zIndex: getMaxZIndex(_this.getCurrentZIndex(), _this.getDocument(), _this._id)\n        };\n        _this.windowCoordinatesState = {\n            leftBeforeAction: _this.getInitialLeft(),\n            topBeforeAction: _this.getInitialTop(),\n            widthBeforeAction: _this.getInitialWidth(),\n            heightBeforeAction: _this.getInitialHeight()\n        };\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    Window.prototype.componentDidMount = function () {\n        var currentWindow = this.getWindow();\n        if (currentWindow) {\n            currentWindow.addEventListener('resize', this.handleBrowserWindowResize);\n        }\n        var currentDocument = this.getDocument();\n        if (this.props.appendTo && currentDocument) {\n            var containerCoordinates = this.props.appendTo.getBoundingClientRect();\n            var bodyRect = currentDocument.body.getBoundingClientRect();\n            this.offSetCoordinates.x = containerCoordinates.left - bodyRect.left;\n            this.offSetCoordinates.y = containerCoordinates.top - bodyRect.top;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Window.prototype.componentWillUnmount = function () {\n        var currentWindow = this.getWindow();\n        if (currentWindow) {\n            currentWindow.removeEventListener('resize', this.handleBrowserWindowResize);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Window.prototype.componentDidUpdate = function () {\n        var currentDocument = this.getDocument();\n        if (this.props.appendTo && currentDocument) {\n            var containerCoordinates = this.props.appendTo.getBoundingClientRect();\n            var bodyRect = currentDocument.body.getBoundingClientRect();\n            this.offSetCoordinates.x = containerCoordinates.left - bodyRect.left;\n            this.offSetCoordinates.y = containerCoordinates.top - bodyRect.top;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Window.prototype.render = function () {\n        var _this = this;\n        var _a;\n        var elementsArray = React.Children.toArray(this.props.children);\n        var content = this.getContent(elementsArray);\n        var actions = this.getActionBar(elementsArray);\n        var currentZIndex = this.getCurrentZIndex();\n        var classNamesWindow = classNames('k-widget', 'k-window', this.props.className, { 'k-window-minimized': this.state.stage === 'MINIMIZED' }, { 'k-window-focused': this.state.focused });\n        var windowElement = (React.createElement(ZIndexContext.Provider, { value: currentZIndex },\n            React.createElement(React.Fragment, null,\n                this.props.modal && (React.createElement(\"div\", { className: \"k-overlay\", style: __assign({ zIndex: currentZIndex }, this.props.overlayStyle) })),\n                React.createElement(\"div\", __assign({}, (_a = {}, _a[DATA_DIALOGS_ID] = this._id, _a), { tabIndex: 0, onFocus: this.onFocus, onBlur: this.onBlur, onKeyDown: this.onKeyDown, ref: function (el) {\n                        _this.windowElement = el;\n                        _this.element = el;\n                    }, className: classNamesWindow, style: __assign({ top: this.top, left: this.left, width: this.width, height: this.height || '', zIndex: currentZIndex }, this.props.style) }),\n                    React.createElement(MiddleLayerOptimization, { shouldUpdateOnDrag: this.props.shouldUpdateOnDrag || false, isDragging: this.state.isDragging },\n                        React.createElement(Draggable, { onPress: this.onPress, onDrag: this.onDrag, onRelease: this.onRelease, ref: function (component) { return _this.draggable = component; } },\n                            React.createElement(WindowTitleBar, { stage: this.windowStage, onDoubleClick: this.props.doubleClickStageChange ? this.handleDoubleClick : undefined, onMinimizeButtonClick: this.handleMinimize, onFullScreenButtonClick: this.handleFullscreen, onRestoreButtonClick: this.handleRestore, onCloseButtonClick: this.handleCloseWindow, closeButton: this.props.closeButton, minimizeButton: this.props.minimizeButton, maximizeButton: this.props.maximizeButton, restoreButton: this.props.restoreButton }, this.props.title)),\n                        this.windowStage !== windowStage.MINIMIZED\n                            ? (React.createElement(React.Fragment, null,\n                                React.createElement(\"div\", { className: \"k-window-content\" }, content),\n                                actions))\n                            : null,\n                        this.windowStage === windowStage.DEFAULT &&\n                            this.props.resizable\n                            ? React.createElement(ResizeHandlers, { onResize: this.handleResize })\n                            : null)))));\n        if (canUseDOM) {\n            return ReactDOM.createPortal(windowElement, this.props.appendTo || document.body);\n        }\n        return null;\n    };\n    Object.defineProperty(Window.prototype, \"top\", {\n        // Getters\n        get: function () {\n            if (this.windowStage !== windowStage.FULLSCREEN) {\n                return Math.max(this.props.top || this.state.top, 0);\n            }\n            return 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Window.prototype, \"left\", {\n        get: function () {\n            if (this.windowStage !== windowStage.FULLSCREEN) {\n                return Math.max(this.props.left || this.state.left, 0);\n            }\n            return 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Window.prototype, \"width\", {\n        get: function () {\n            var width = this.props.width || this.state.width;\n            if (this.windowStage === windowStage.FULLSCREEN) {\n                if (this.props.appendTo) {\n                    width = this.props.appendTo.offsetWidth;\n                    return width;\n                }\n                var currentWindow = this.getWindow();\n                width = currentWindow ? currentWindow.innerWidth : 0;\n            }\n            return width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Window.prototype, \"height\", {\n        get: function () {\n            var height = this.props.height || this.state.height;\n            if (this.windowStage === windowStage.FULLSCREEN) {\n                if (this.props.appendTo) {\n                    height = this.props.appendTo.offsetHeight;\n                    return height;\n                }\n                var currentWindow = this.getWindow();\n                height = currentWindow ? currentWindow.innerHeight : 0;\n            }\n            else if (this.windowStage === windowStage.MINIMIZED) {\n                height = 0;\n            }\n            return height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Window.prototype, \"windowStage\", {\n        get: function () {\n            return this.props.stage || this.state.stage;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Window.prototype.getActionBar = function (children) {\n        return children.filter(function (child) { return child && child.type === WindowActionsBar; });\n    };\n    Window.prototype.getContent = function (children) {\n        return children.filter(function (child) {\n            return child && child.type !== WindowActionsBar;\n        });\n    };\n    /**\n     * @hidden\n     */\n    Window.propTypes = {\n        width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        left: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        top: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        initialwidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        initialHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        initialLeft: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        initialTop: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        minWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        minHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        resizable: PropTypes.bool,\n        draggable: PropTypes.bool,\n        title: PropTypes.any,\n        shouldUpdateOnDrag: PropTypes.bool,\n        stage: PropTypes.oneOf(['DEFAULT', 'MINIMIZED', 'FULLSCREEN']),\n        className: PropTypes.string,\n        style: PropTypes.object,\n        overlayStyle: PropTypes.object\n    };\n    /**\n     * @hidden\n     */\n    Window.defaultProps = {\n        minWidth: DEFAULT_MIN_WIDTH,\n        minHeight: DEFAULT_MIN_HEIGHT,\n        resizable: true,\n        draggable: true,\n        modal: false,\n        doubleClickStageChange: true\n    };\n    /**\n     * @hidden\n     */\n    Window.contextType = ZIndexContext;\n    return Window;\n}(React.Component));\nexport { Window };\n"]},"metadata":{},"sourceType":"module"}