{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { Day, MS_PER_DAY, ZonedDate, getDate, addDays } from '@progress/kendo-date-math';\nimport { BaseView } from '../../components/BaseView';\nimport { HorizontalResourceIterator } from '../common/HorizontalResourceIterator';\nimport { DayViewGroupRowContent } from './DayViewGroupRowContent';\nimport { VerticalResourceIterator } from '../common/VerticalResourceIterator';\nimport { DayViewAllDayRowContent } from './DayViewAllDayRowContent';\nimport { DayViewRowContent } from './DayViewRowContent';\nimport { classNames } from '@progress/kendo-react-common';\nimport { mapItemsToSlots, mapSlotsToItems, isInTimeRange, toUTCDateTime, intersects, first, last } from '../../utils';\nimport { useInternationalization } from '@progress/kendo-react-intl';\nimport { MS_PER_MINUTE } from '../../constants';\nimport { toRanges, toItems, toSlots, toOccurrences } from '../../services/';\nimport { SchedulerEditSlot } from '../../slots/SchedulerEditSlot';\nimport { SchedulerEditItem } from '../../items/SchedulerEditItem';\nimport { useSchedulerPropsContext, useSchedulerDataContext, useSchedulerGroupsContext, useSchedulerOrientationContext, useSchedulerFieldsContext, useSchedulerDateRangeContext } from '../../context/SchedulerContext';\nimport { SchedulerResourceIteratorContext } from '../../context/SchedulerResourceIteratorContext';\nimport { CurrentTimeMarker } from '../../components/CurrentTimeMarket';\nimport { DateHeaderCell } from '../../components/DateHeaderCell';\nvar FIRST_INDEX = 0;\nvar GRID_OFFSET = 1;\nvar EMPTY_CELL = React.createElement(\"div\", {\n  className: \"k-scheduler-cell k-side-cell\"\n});\n/**\n * @hidden\n */\n\nexport var MultiDayView = function (props) {\n  var _a = useSchedulerPropsContext(),\n      group = _a.group,\n      timezone = _a.timezone,\n      propResources = _a.resources;\n\n  var intl = useInternationalization();\n  var EditItem = props.editItem || SchedulerEditItem;\n  var EditSlot = props.editSlot || SchedulerEditSlot;\n  var showWorkHours = props.showWorkHours;\n  var numberOfDays = props.numberOfDays || defaultProps.numberOfDays;\n  var slotDivisions = props.slotDivisions || defaultProps.slotDivisions;\n  var slotDuration = props.slotDuration || defaultProps.slotDuration;\n  var workWeekStart = props.workWeekStart || defaultProps.workWeekStart;\n  var workWeekEnd = props.workWeekEnd || defaultProps.workWeekEnd;\n  var workDayStart = intl.parseDate(props.workDayStart || props.isWorkDayStart || defaultProps.isWorkDayStart);\n  var workDayEnd = intl.parseDate(props.workDayEnd || props.isWorkDayEnd || defaultProps.isWorkDayEnd);\n  var startTime = intl.parseDate(props.startTime || defaultProps.startTime);\n  var endTime = intl.parseDate(props.endTime || defaultProps.endTime);\n  var data = useSchedulerDataContext()[0];\n  var groups = useSchedulerGroupsContext();\n  var orientation = useSchedulerOrientationContext();\n  var fields = useSchedulerFieldsContext();\n  var dateRange = useSchedulerDateRangeContext();\n  var viewStart = React.useMemo(function () {\n    return showWorkHours ? workDayStart : startTime;\n  }, [showWorkHours, workDayStart, startTime]);\n  var viewEnd = React.useMemo(function () {\n    return showWorkHours ? workDayEnd : endTime;\n  }, [showWorkHours, workDayEnd, endTime]);\n  var dayRanges = React.useMemo(function () {\n    return toRanges(dateRange, {\n      step: MS_PER_DAY * numberOfDays,\n      timezone: timezone\n    }).map(function (r) {\n      return __assign({}, r, {\n        isAllDay: true\n      });\n    });\n  }, [dateRange.start.getTime(), dateRange.end.getTime(), numberOfDays]);\n  var timeRanges = React.useMemo(function () {\n    return toRanges(dateRange, {\n      step: MS_PER_DAY,\n      timezone: timezone\n    }).map(function (r) {\n      return __assign({}, r, {\n        isAllDay: false\n      });\n    });\n  }, [dateRange.start.getTime(), dateRange.end.getTime(), timezone]);\n  var daySlots = React.useMemo(function () {\n    return toSlots(dateRange, {\n      step: MS_PER_DAY\n    }, {\n      groups: groups,\n      ranges: dayRanges\n    });\n  }, [dateRange.start.getTime(), dateRange.end.getTime(), timezone, dayRanges, groups]);\n  var timeSlots = React.useMemo(function () {\n    return toSlots(dateRange, {\n      step: slotDuration * MS_PER_MINUTE / slotDivisions\n    }, {\n      groups: groups,\n      ranges: timeRanges\n    }).filter(function (slot) {\n      return viewEnd.getTime() === viewStart.getTime() || isInTimeRange(slot.zonedStart, viewStart, viewEnd);\n    });\n  }, [dateRange.start.getTime(), dateRange.end.getTime(), slotDuration, slotDivisions, viewStart.getTime(), viewEnd.getTime(), groups, timeRanges]);\n  var occurrences = React.useMemo(function () {\n    return toOccurrences(data, {\n      dateRange: dateRange,\n      fields: fields,\n      timezone: timezone\n    });\n  }, [data, dateRange.start.getTime(), dateRange.end.getTime(), fields, timezone]);\n  var dayOccurrences = React.useMemo(function () {\n    return occurrences.filter(function (o) {\n      return o.isAllDay;\n    });\n  }, [occurrences]);\n  var timeOccurrences = React.useMemo(function () {\n    return occurrences.filter(function (o) {\n      return !o.isAllDay;\n    });\n  }, [occurrences]);\n  var dayItems = React.useMemo(function () {\n    return toItems(dayOccurrences, {\n      timezone: timezone\n    }, {\n      groups: groups,\n      ranges: dayRanges\n    });\n  }, [occurrences, timezone, groups, dayRanges]);\n  var timeItems = React.useMemo(function () {\n    return toItems(timeOccurrences, {\n      timezone: timezone\n    }, {\n      groups: groups,\n      ranges: timeRanges\n    }).filter(function (item) {\n      return viewStart.getTime() === viewEnd.getTime() || isInTimeRange(item.zonedStart, viewStart, viewEnd) || isInTimeRange(item.zonedEnd, viewStart, viewEnd) || isInTimeRange(new Date(item.zonedEnd.getTime() - (item.zonedEnd.getTime() - item.zonedStart.getTime()) / 2), viewStart, viewEnd);\n    });\n  }, [occurrences, timezone, groups, timeRanges, viewStart.getTime(), viewEnd.getTime()]);\n  React.useMemo(function () {\n    return mapItemsToSlots(dayItems, daySlots, false);\n  }, [dayItems, daySlots]);\n  React.useMemo(function () {\n    return mapSlotsToItems(dayItems, daySlots, false);\n  }, [dayItems, daySlots]);\n  React.useMemo(function () {\n    return mapItemsToSlots(timeItems, timeSlots, false);\n  }, [timeItems, timeSlots]);\n  React.useMemo(function () {\n    return mapSlotsToItems(timeItems, timeSlots, false);\n  }, [timeItems, timeSlots]);\n  var head = React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n    var groupIndex = _a.groupIndex;\n    return React.createElement(\"div\", {\n      className: \"k-scheduler-row\",\n      key: groupIndex\n    }, timeRanges.map(function (range, rangeIndex) {\n      return React.createElement(DateHeaderCell, {\n        as: props.dateHeaderCell,\n        key: rangeIndex,\n        date: ZonedDate.fromLocalDate(new Date(range.zonedEnd.getTime() - (range.zonedEnd.getTime() - range.zonedStart.getTime()) / 2), timezone),\n        start: range.start,\n        end: range.end,\n        format: {\n          skeleton: 'MEd'\n        }\n      });\n    }));\n  });\n  var allDaySlots = React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n    var groupIndex = _a.groupIndex;\n    return React.createElement(\"div\", {\n      key: groupIndex,\n      className: \"k-scheduler-row\"\n    }, dayRanges.map(function (_, rangeIndex) {\n      return daySlots.filter(function (s) {\n        return s.group.index === groupIndex && s.range.index === rangeIndex;\n      }).map(function (slot, slotIndex, filtered) {\n        return React.createElement(EditSlot, __assign({}, slot, {\n          onDataAction: props.onDataAction,\n          form: props.form,\n          slot: props.slot,\n          viewSlot: props.viewSlot,\n          key: slot.start.getTime() + \":\" + slot.group.index,\n          row: 0,\n          col: orientation === 'horizontal' ? filtered.length * (groupIndex || 0) + slotIndex : slotIndex,\n          isWorkDay: 0 <= slot.zonedStart.getDay() + (numberOfDays - workWeekStart) && (slot.zonedStart.getDay() + (numberOfDays - workWeekStart)) % numberOfDays <= workWeekEnd + (numberOfDays - workWeekStart),\n          expandable: true\n        }));\n      });\n    }));\n  });\n  var className = React.useMemo(function () {\n    return classNames('k-scheduler-day-view', props.className);\n  }, [props.className]);\n  return React.createElement(React.Fragment, null, React.createElement(BaseView, {\n    id: props.id,\n    props: props,\n    style: props.style,\n    className: className,\n    ranges: dayRanges.concat(timeRanges),\n    slots: daySlots.concat(timeSlots)\n  }, React.createElement(\"div\", {\n    className: \"k-scheduler-head\"\n  }, orientation === 'horizontal' ? React.createElement(React.Fragment, null, React.createElement(HorizontalResourceIterator, {\n    nested: true,\n    group: group,\n    resources: propResources,\n    rowContent: DayViewGroupRowContent,\n    childRowContent: DayViewGroupRowContent\n  }, head), React.createElement(HorizontalResourceIterator, {\n    group: group,\n    resources: propResources,\n    rowContent: DayViewAllDayRowContent,\n    childRowContent: DayViewAllDayRowContent\n  }, allDaySlots), dayItems.map(function (item) {\n    return React.createElement(EditItem, __assign({\n      key: item.isRecurring ? item.uid + \":\" + item.group.index + \":\" + item.range.index + \":\" + item.originalStart : item.uid + \":\" + item.group.index + \":\" + item.range.index\n    }, item, {\n      form: props.form,\n      onDataAction: props.onDataAction,\n      item: props.item,\n      viewItem: props.viewItem,\n      editable: props.editable,\n      vertical: false\n    }));\n  })) : React.createElement(VerticalResourceIterator, {\n    group: group,\n    resources: propResources,\n    cellContent: EMPTY_CELL\n  }, head)), React.createElement(\"div\", {\n    className: \"k-scheduler-body\"\n  }, orientation === 'horizontal' ? React.createElement(React.Fragment, null, timeSlots.filter(function (slot) {\n    return slot.group.index === FIRST_INDEX && slot.range.index === FIRST_INDEX;\n  }).map(function (root, rootIndex) {\n    return React.createElement(React.Fragment, {\n      key: root.index\n    }, React.createElement(HorizontalResourceIterator, {\n      nested: false,\n      group: group,\n      resources: propResources,\n      rowContent: DayViewRowContent,\n      rowContentProps: {\n        timeHeaderCell: props.timeHeaderCell,\n        isMaster: rootIndex % slotDivisions === 0,\n        isLast: (rootIndex + 1) % slotDivisions === 0,\n        slot: root\n      }\n    }, React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n      var groupIndex = _a.groupIndex;\n      return React.createElement(\"div\", {\n        className: classNames('k-scheduler-row', {\n          'k-middle-row': !((rootIndex + 1) % slotDivisions === 0)\n        })\n      }, timeRanges.map(function (_range, rangeIndex) {\n        return timeSlots.filter(function (s) {\n          return s.index === root.index && s.range.index === rangeIndex && s.group.index === groupIndex;\n        }).map(function (slot) {\n          return React.createElement(EditSlot, __assign({\n            key: slot.start.getTime() + \":\" + slot.group.index\n          }, slot, {\n            onDataAction: props.onDataAction,\n            slot: props.slot,\n            viewSlot: props.viewSlot,\n            form: props.form,\n            row: rootIndex + GRID_OFFSET,\n            col: timeRanges.length * (groupIndex || 0) + rangeIndex,\n            isWorkHour: isInTimeRange(slot.zonedStart, workDayStart, workDayEnd),\n            isWorkDay: 0 <= slot.zonedStart.getDay() + (numberOfDays - workWeekStart) && (slot.zonedStart.getDay() + (numberOfDays - workWeekStart)) % numberOfDays <= workWeekEnd + (numberOfDays - workWeekStart),\n            editable: props.editable\n          }));\n        });\n      }));\n    })));\n  }), props.currentTimeMarker && intersects(first(timeRanges).start, last(timeRanges).end, new Date(), new Date(), true) && React.createElement(CurrentTimeMarker, null)) : React.createElement(React.Fragment, null, React.createElement(VerticalResourceIterator, {\n    nested: true,\n    group: group,\n    resources: propResources\n  }, React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n    var groupIndex = _a.groupIndex;\n    return React.createElement(React.Fragment, {\n      key: groupIndex\n    }, React.createElement(\"div\", {\n      className: \"k-scheduler-row\"\n    }, React.createElement(DayViewAllDayRowContent, {\n      groupIndex: groupIndex\n    }, dayRanges.map(function (_, rangeIndex) {\n      var groupOffset = timeSlots.filter(function (s) {\n        return s.group.index === groupIndex && s.range.index === FIRST_INDEX;\n      }).length;\n      return daySlots.filter(function (s) {\n        return s.group.index === groupIndex && s.range.index === rangeIndex;\n      }).map(function (slot, slotIndex) {\n        return React.createElement(EditSlot, __assign({\n          slot: props.slot,\n          viewSlot: props.viewSlot,\n          form: props.form\n        }, slot, {\n          onDataAction: props.onDataAction,\n          key: slot.start.getTime() + \":\" + slot.group.index,\n          className: 'k-scheduler-alldays-slot',\n          row: groupOffset * (groupIndex || 0) + (groupIndex || 0) * GRID_OFFSET,\n          col: slotIndex,\n          expandable: true\n        }));\n      });\n    }))), timeSlots.filter(function (s) {\n      return s.group.index === groupIndex && s.range.index === FIRST_INDEX;\n    }).map(function (root, rootIndex, filtered) {\n      return React.createElement(\"div\", {\n        className: \"k-scheduler-row\",\n        key: root.index\n      }, React.createElement(DayViewRowContent, {\n        slot: root,\n        isMaster: rootIndex % slotDivisions === 0,\n        isLast: (rootIndex + 1) % slotDivisions === 0,\n        timeHeaderCell: props.timeHeaderCell\n      }, timeRanges.map(function (_, rangeIndex) {\n        return timeSlots.filter(function (s) {\n          return s.index === root.index && s.group.index === groupIndex && s.range.index === rangeIndex;\n        }).map(function (slot) {\n          return React.createElement(EditSlot, __assign({\n            slot: props.slot,\n            viewSlot: props.viewSlot,\n            form: props.form,\n            onDataAction: props.onDataAction\n          }, slot, {\n            key: slot.start.getTime() + \":\" + slot.group.index,\n            row: filtered.length * (groupIndex || 0) + rootIndex + (groupIndex || 0) * GRID_OFFSET + GRID_OFFSET,\n            col: rangeIndex,\n            editable: props.editable,\n            isWorkHour: isInTimeRange(slot.zonedStart, workDayStart, workDayEnd),\n            isWorkDay: 0 <= slot.zonedStart.getDay() + (numberOfDays - workWeekStart) && (slot.zonedStart.getDay() + (numberOfDays - workWeekStart)) % numberOfDays <= workWeekEnd + (numberOfDays - workWeekStart)\n          }));\n        });\n      })));\n    }), props.currentTimeMarker && intersects(first(timeRanges).start, last(timeRanges).end, new Date(), new Date(), true) && React.createElement(CurrentTimeMarker, {\n      groupIndex: groupIndex\n    }));\n  })), dayItems.map(function (item) {\n    return React.createElement(EditItem, __assign({\n      key: item.isRecurring ? item.uid + \":\" + item.group.index + \":\" + item.range.index + \":\" + item.originalStart : item.uid + \":\" + item.group.index + \":\" + item.range.index\n    }, item, {\n      onDataAction: props.onDataAction,\n      viewItem: props.viewItem,\n      item: props.item,\n      form: props.form,\n      editable: props.editable,\n      vertical: false\n    }));\n  })), timeItems.map(function (item) {\n    return React.createElement(EditItem, __assign({\n      key: item.isRecurring ? item.uid + \":\" + item.group.index + \":\" + item.range.index + \":\" + item.originalStart : item.uid + \":\" + item.group.index + \":\" + item.range.index\n    }, item, {\n      format: 't',\n      onDataAction: props.onDataAction,\n      viewItem: props.viewItem,\n      item: props.item,\n      form: props.form,\n      editable: props.editable,\n      vertical: true\n    }));\n  }))));\n};\n\nvar multiDayViewDateRange = function (_a) {\n  var date = _a.date,\n      _b = _a.numberOfDays,\n      numberOfDays = _b === void 0 ? 1 : _b,\n      timezone = _a.timezone;\n  var normalized = ZonedDate.fromLocalDate(date, timezone);\n  var firstDay = getDate(normalized);\n  var lastDay = addDays(firstDay, numberOfDays);\n  var zonedStart = ZonedDate.fromUTCDate(toUTCDateTime(firstDay), timezone);\n  var zonedEnd = ZonedDate.fromUTCDate(toUTCDateTime(lastDay), timezone);\n  var start = new Date(zonedStart.getTime());\n  var end = new Date(zonedEnd.getTime());\n  return {\n    start: start,\n    end: end,\n    zonedStart: zonedStart,\n    zonedEnd: zonedEnd\n  };\n};\n/** @hidden */\n\n\nexport var defaultProps = {\n  name: 'multi-day',\n  title: 'Multi Day',\n  currentTimeMarker: true,\n  dateRange: multiDayViewDateRange,\n  selectedDateFormat: '{0:D} - {1:D}',\n  selectedShortDateFormat: '{0:d} - {1:d}',\n  numberOfDays: 1,\n  startTime: '00:00',\n  endTime: '23:59',\n  isWorkDayStart: '08:00',\n  isWorkDayEnd: '17:00',\n  workWeekStart: Day.Monday,\n  workWeekEnd: Day.Friday,\n  step: 1,\n  slotDivisions: 2,\n  slotDuration: 60,\n  showCurrentTime: true,\n  defaultShowWorkHours: true\n};\nMultiDayView.propTypes = {\n  currentTimeMarker: PropTypes.bool,\n  name: PropTypes.string,\n  numberOfDays: PropTypes.number,\n  startTime: PropTypes.string,\n  endTime: PropTypes.string,\n  workDayStart: PropTypes.string,\n  workDayEnd: PropTypes.string,\n  workWeekStart: PropTypes.number,\n  workWeekEnd: PropTypes.any,\n  slotDivisions: PropTypes.number,\n  slotDuration: PropTypes.number,\n  showWorkHours: PropTypes.bool,\n  selectedDateFormat: PropTypes.string,\n  selectedShortDateFormat: PropTypes.string\n};\nMultiDayView.defaultProps = defaultProps;\nMultiDayView.displayName = 'KendoReactSchedulerMultiDayView';","map":{"version":3,"sources":["/home/asmith/taller/proyecto1/proyecto-taller/client/node_modules/@progress/kendo-react-scheduler/dist/es/views/day/MultiDayView.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","PropTypes","Day","MS_PER_DAY","ZonedDate","getDate","addDays","BaseView","HorizontalResourceIterator","DayViewGroupRowContent","VerticalResourceIterator","DayViewAllDayRowContent","DayViewRowContent","classNames","mapItemsToSlots","mapSlotsToItems","isInTimeRange","toUTCDateTime","intersects","first","last","useInternationalization","MS_PER_MINUTE","toRanges","toItems","toSlots","toOccurrences","SchedulerEditSlot","SchedulerEditItem","useSchedulerPropsContext","useSchedulerDataContext","useSchedulerGroupsContext","useSchedulerOrientationContext","useSchedulerFieldsContext","useSchedulerDateRangeContext","SchedulerResourceIteratorContext","CurrentTimeMarker","DateHeaderCell","FIRST_INDEX","GRID_OFFSET","EMPTY_CELL","createElement","className","MultiDayView","props","_a","group","timezone","propResources","resources","intl","EditItem","editItem","EditSlot","editSlot","showWorkHours","numberOfDays","defaultProps","slotDivisions","slotDuration","workWeekStart","workWeekEnd","workDayStart","parseDate","isWorkDayStart","workDayEnd","isWorkDayEnd","startTime","endTime","data","groups","orientation","fields","dateRange","viewStart","useMemo","viewEnd","dayRanges","step","map","r","isAllDay","start","getTime","end","timeRanges","daySlots","ranges","timeSlots","filter","slot","zonedStart","occurrences","dayOccurrences","o","timeOccurrences","dayItems","timeItems","item","zonedEnd","Date","head","Consumer","groupIndex","key","range","rangeIndex","as","dateHeaderCell","date","fromLocalDate","format","skeleton","allDaySlots","_","index","slotIndex","filtered","onDataAction","form","viewSlot","row","col","isWorkDay","getDay","expandable","Fragment","id","style","concat","slots","nested","rowContent","childRowContent","isRecurring","uid","originalStart","viewItem","editable","vertical","cellContent","root","rootIndex","rowContentProps","timeHeaderCell","isMaster","isLast","_range","isWorkHour","currentTimeMarker","groupOffset","multiDayViewDateRange","_b","normalized","firstDay","lastDay","fromUTCDate","name","title","selectedDateFormat","selectedShortDateFormat","Monday","Friday","showCurrentTime","defaultShowWorkHours","propTypes","bool","string","number","any","displayName"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { Day, MS_PER_DAY, ZonedDate, getDate, addDays } from '@progress/kendo-date-math';\nimport { BaseView } from '../../components/BaseView';\nimport { HorizontalResourceIterator } from '../common/HorizontalResourceIterator';\nimport { DayViewGroupRowContent } from './DayViewGroupRowContent';\nimport { VerticalResourceIterator } from '../common/VerticalResourceIterator';\nimport { DayViewAllDayRowContent } from './DayViewAllDayRowContent';\nimport { DayViewRowContent } from './DayViewRowContent';\nimport { classNames } from '@progress/kendo-react-common';\nimport { mapItemsToSlots, mapSlotsToItems, isInTimeRange, toUTCDateTime, intersects, first, last } from '../../utils';\nimport { useInternationalization } from '@progress/kendo-react-intl';\nimport { MS_PER_MINUTE } from '../../constants';\nimport { toRanges, toItems, toSlots, toOccurrences } from '../../services/';\nimport { SchedulerEditSlot } from '../../slots/SchedulerEditSlot';\nimport { SchedulerEditItem } from '../../items/SchedulerEditItem';\nimport { useSchedulerPropsContext, useSchedulerDataContext, useSchedulerGroupsContext, useSchedulerOrientationContext, useSchedulerFieldsContext, useSchedulerDateRangeContext } from '../../context/SchedulerContext';\nimport { SchedulerResourceIteratorContext } from '../../context/SchedulerResourceIteratorContext';\nimport { CurrentTimeMarker } from '../../components/CurrentTimeMarket';\nimport { DateHeaderCell } from '../../components/DateHeaderCell';\nvar FIRST_INDEX = 0;\nvar GRID_OFFSET = 1;\nvar EMPTY_CELL = React.createElement(\"div\", { className: \"k-scheduler-cell k-side-cell\" });\n/**\n * @hidden\n */\nexport var MultiDayView = function (props) {\n    var _a = useSchedulerPropsContext(), group = _a.group, timezone = _a.timezone, propResources = _a.resources;\n    var intl = useInternationalization();\n    var EditItem = props.editItem || SchedulerEditItem;\n    var EditSlot = props.editSlot || SchedulerEditSlot;\n    var showWorkHours = props.showWorkHours;\n    var numberOfDays = props.numberOfDays || defaultProps.numberOfDays;\n    var slotDivisions = props.slotDivisions || defaultProps.slotDivisions;\n    var slotDuration = props.slotDuration || defaultProps.slotDuration;\n    var workWeekStart = props.workWeekStart || defaultProps.workWeekStart;\n    var workWeekEnd = props.workWeekEnd || defaultProps.workWeekEnd;\n    var workDayStart = intl.parseDate(props.workDayStart || props.isWorkDayStart || defaultProps.isWorkDayStart);\n    var workDayEnd = intl.parseDate(props.workDayEnd || props.isWorkDayEnd || defaultProps.isWorkDayEnd);\n    var startTime = intl.parseDate(props.startTime || defaultProps.startTime);\n    var endTime = intl.parseDate(props.endTime || defaultProps.endTime);\n    var data = useSchedulerDataContext()[0];\n    var groups = useSchedulerGroupsContext();\n    var orientation = useSchedulerOrientationContext();\n    var fields = useSchedulerFieldsContext();\n    var dateRange = useSchedulerDateRangeContext();\n    var viewStart = React.useMemo(function () { return showWorkHours\n        ? workDayStart\n        : startTime; }, [\n        showWorkHours,\n        workDayStart,\n        startTime\n    ]);\n    var viewEnd = React.useMemo(function () { return showWorkHours\n        ? workDayEnd\n        : endTime; }, [\n        showWorkHours,\n        workDayEnd,\n        endTime\n    ]);\n    var dayRanges = React.useMemo(function () { return toRanges(dateRange, { step: MS_PER_DAY * numberOfDays, timezone: timezone })\n        .map(function (r) { return (__assign({}, r, { isAllDay: true })); }); }, [\n        dateRange.start.getTime(),\n        dateRange.end.getTime(),\n        numberOfDays\n    ]);\n    var timeRanges = React.useMemo(function () { return toRanges(dateRange, { step: MS_PER_DAY, timezone: timezone })\n        .map(function (r) { return (__assign({}, r, { isAllDay: false })); }); }, [\n        dateRange.start.getTime(),\n        dateRange.end.getTime(),\n        timezone\n    ]);\n    var daySlots = React.useMemo(function () { return toSlots(dateRange, { step: MS_PER_DAY }, { groups: groups, ranges: dayRanges }); }, [\n        dateRange.start.getTime(),\n        dateRange.end.getTime(),\n        timezone,\n        dayRanges,\n        groups\n    ]);\n    var timeSlots = React.useMemo(function () { return toSlots(dateRange, { step: (slotDuration * MS_PER_MINUTE) / slotDivisions }, { groups: groups, ranges: timeRanges })\n        .filter(function (slot) { return viewEnd.getTime() === viewStart.getTime()\n        || isInTimeRange(slot.zonedStart, viewStart, viewEnd); }); }, [\n        dateRange.start.getTime(),\n        dateRange.end.getTime(),\n        slotDuration,\n        slotDivisions,\n        viewStart.getTime(),\n        viewEnd.getTime(),\n        groups,\n        timeRanges\n    ]);\n    var occurrences = React.useMemo(function () { return toOccurrences(data, { dateRange: dateRange, fields: fields, timezone: timezone }); }, [data, dateRange.start.getTime(), dateRange.end.getTime(), fields, timezone]);\n    var dayOccurrences = React.useMemo(function () { return occurrences.filter(function (o) { return o.isAllDay; }); }, [occurrences]);\n    var timeOccurrences = React.useMemo(function () { return occurrences.filter(function (o) { return !o.isAllDay; }); }, [occurrences]);\n    var dayItems = React.useMemo(function () { return toItems(dayOccurrences, { timezone: timezone }, { groups: groups, ranges: dayRanges }); }, [occurrences, timezone, groups, dayRanges]);\n    var timeItems = React.useMemo(function () { return toItems(timeOccurrences, { timezone: timezone }, { groups: groups, ranges: timeRanges })\n        .filter(function (item) { return viewStart.getTime() === viewEnd.getTime()\n        || isInTimeRange(item.zonedStart, viewStart, viewEnd)\n        || isInTimeRange(item.zonedEnd, viewStart, viewEnd)\n        || isInTimeRange(new Date(item.zonedEnd.getTime() - ((item.zonedEnd.getTime() - item.zonedStart.getTime()) / 2)), viewStart, viewEnd); }); }, [occurrences, timezone, groups, timeRanges, viewStart.getTime(), viewEnd.getTime()]);\n    React.useMemo(function () { return mapItemsToSlots(dayItems, daySlots, false); }, [dayItems, daySlots]);\n    React.useMemo(function () { return mapSlotsToItems(dayItems, daySlots, false); }, [dayItems, daySlots]);\n    React.useMemo(function () { return mapItemsToSlots(timeItems, timeSlots, false); }, [timeItems, timeSlots]);\n    React.useMemo(function () { return mapSlotsToItems(timeItems, timeSlots, false); }, [timeItems, timeSlots]);\n    var head = (React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n        var groupIndex = _a.groupIndex;\n        return (React.createElement(\"div\", { className: \"k-scheduler-row\", key: groupIndex }, timeRanges.map(function (range, rangeIndex) { return (React.createElement(DateHeaderCell, { as: props.dateHeaderCell, key: rangeIndex, date: ZonedDate.fromLocalDate(new Date(range.zonedEnd.getTime() - ((range.zonedEnd.getTime() - range.zonedStart.getTime()) / 2)), timezone), start: range.start, end: range.end, format: { skeleton: 'MEd' } })); })));\n    }));\n    var allDaySlots = (React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n        var groupIndex = _a.groupIndex;\n        return (React.createElement(\"div\", { key: groupIndex, className: \"k-scheduler-row\" }, dayRanges.map(function (_, rangeIndex) { return (daySlots\n            .filter(function (s) { return s.group.index === groupIndex && s.range.index === rangeIndex; })\n            .map(function (slot, slotIndex, filtered) { return (React.createElement(EditSlot, __assign({}, slot, { onDataAction: props.onDataAction, form: props.form, slot: props.slot, viewSlot: props.viewSlot, key: slot.start.getTime() + \":\" + slot.group.index, row: 0, col: orientation === 'horizontal' ? ((filtered.length * (groupIndex || 0)) + slotIndex) : slotIndex, isWorkDay: 0 <= ((slot.zonedStart.getDay() + (numberOfDays - workWeekStart)))\n                && ((slot.zonedStart.getDay() + (numberOfDays - workWeekStart))\n                    % numberOfDays)\n                    <= ((workWeekEnd + (numberOfDays - workWeekStart))), expandable: true }))); })); })));\n    }));\n    var className = React.useMemo(function () { return classNames('k-scheduler-day-view', props.className); }, [props.className]);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(BaseView, { id: props.id, props: props, style: props.style, className: className, ranges: dayRanges.concat(timeRanges), slots: daySlots.concat(timeSlots) },\n            React.createElement(\"div\", { className: \"k-scheduler-head\" }, orientation === 'horizontal'\n                ? React.createElement(React.Fragment, null,\n                    React.createElement(HorizontalResourceIterator, { nested: true, group: group, resources: propResources, rowContent: DayViewGroupRowContent, childRowContent: DayViewGroupRowContent }, head),\n                    React.createElement(HorizontalResourceIterator, { group: group, resources: propResources, rowContent: DayViewAllDayRowContent, childRowContent: DayViewAllDayRowContent }, allDaySlots),\n                    dayItems.map(function (item) { return (React.createElement(EditItem, __assign({ key: item.isRecurring\n                            ? item.uid + \":\" + item.group.index + \":\" + item.range.index + \":\" + item.originalStart\n                            : item.uid + \":\" + item.group.index + \":\" + item.range.index }, item, { form: props.form, onDataAction: props.onDataAction, item: props.item, viewItem: props.viewItem, editable: props.editable, vertical: false }))); }))\n                : React.createElement(VerticalResourceIterator, { group: group, resources: propResources, cellContent: EMPTY_CELL }, head)),\n            React.createElement(\"div\", { className: \"k-scheduler-body\" },\n                orientation === 'horizontal'\n                    ? (React.createElement(React.Fragment, null,\n                        timeSlots\n                            .filter(function (slot) { return slot.group.index === FIRST_INDEX && slot.range.index === FIRST_INDEX; })\n                            .map(function (root, rootIndex) {\n                            return (React.createElement(React.Fragment, { key: root.index },\n                                React.createElement(HorizontalResourceIterator, { nested: false, group: group, resources: propResources, rowContent: DayViewRowContent, rowContentProps: {\n                                        timeHeaderCell: props.timeHeaderCell,\n                                        isMaster: (rootIndex % slotDivisions === 0),\n                                        isLast: ((rootIndex + 1) % slotDivisions === 0),\n                                        slot: root\n                                    } },\n                                    React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n                                        var groupIndex = _a.groupIndex;\n                                        return (React.createElement(\"div\", { className: classNames('k-scheduler-row', {\n                                                'k-middle-row': !((rootIndex + 1) % slotDivisions === 0)\n                                            }) }, timeRanges.map(function (_range, rangeIndex) { return (timeSlots\n                                            .filter(function (s) { return s.index === root.index\n                                            && s.range.index === rangeIndex\n                                            && s.group.index === groupIndex; })\n                                            .map(function (slot) { return (React.createElement(EditSlot, __assign({ key: slot.start.getTime() + \":\" + slot.group.index }, slot, { onDataAction: props.onDataAction, slot: props.slot, viewSlot: props.viewSlot, form: props.form, row: rootIndex + GRID_OFFSET, col: (timeRanges.length * (groupIndex || 0)) + rangeIndex, isWorkHour: isInTimeRange(slot.zonedStart, workDayStart, workDayEnd), isWorkDay: 0 <= ((slot.zonedStart.getDay()\n                                                + (numberOfDays - workWeekStart)))\n                                                && ((slot.zonedStart.getDay()\n                                                    + (numberOfDays - workWeekStart))\n                                                    % numberOfDays)\n                                                    <= ((workWeekEnd + (numberOfDays - workWeekStart))), editable: props.editable }))); })); })));\n                                    }))));\n                        }),\n                        (props.currentTimeMarker\n                            && intersects(first(timeRanges).start, last(timeRanges).end, new Date(), new Date(), true))\n                            && (React.createElement(CurrentTimeMarker, null))))\n                    : React.createElement(React.Fragment, null,\n                        React.createElement(VerticalResourceIterator, { nested: true, group: group, resources: propResources },\n                            React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n                                var groupIndex = _a.groupIndex;\n                                return (React.createElement(React.Fragment, { key: groupIndex },\n                                    React.createElement(\"div\", { className: \"k-scheduler-row\" },\n                                        React.createElement(DayViewAllDayRowContent, { groupIndex: groupIndex }, dayRanges.map(function (_, rangeIndex) {\n                                            var groupOffset = timeSlots\n                                                .filter(function (s) { return s.group.index === groupIndex && s.range.index === FIRST_INDEX; })\n                                                .length;\n                                            return (daySlots\n                                                .filter(function (s) { return s.group.index === groupIndex && s.range.index === rangeIndex; })\n                                                .map(function (slot, slotIndex) { return (React.createElement(EditSlot, __assign({ slot: props.slot, viewSlot: props.viewSlot, form: props.form }, slot, { onDataAction: props.onDataAction, key: slot.start.getTime() + \":\" + slot.group.index, className: 'k-scheduler-alldays-slot', row: ((groupOffset * (groupIndex || 0)))\n                                                    + ((groupIndex || 0) * GRID_OFFSET), col: slotIndex, expandable: true }))); }));\n                                        }))),\n                                    timeSlots\n                                        .filter(function (s) { return s.group.index === groupIndex && s.range.index === FIRST_INDEX; })\n                                        .map(function (root, rootIndex, filtered) { return (React.createElement(\"div\", { className: \"k-scheduler-row\", key: root.index },\n                                        React.createElement(DayViewRowContent, { slot: root, isMaster: rootIndex % slotDivisions === 0, isLast: (rootIndex + 1) % slotDivisions === 0, timeHeaderCell: props.timeHeaderCell }, timeRanges.map(function (_, rangeIndex) { return (timeSlots\n                                            .filter(function (s) { return s.index === root.index\n                                            && s.group.index === groupIndex\n                                            && s.range.index === rangeIndex; })\n                                            .map(function (slot) { return (React.createElement(EditSlot, __assign({ slot: props.slot, viewSlot: props.viewSlot, form: props.form, onDataAction: props.onDataAction }, slot, { key: slot.start.getTime() + \":\" + slot.group.index, row: ((filtered.length * (groupIndex || 0)) + rootIndex)\n                                                + ((groupIndex || 0) * GRID_OFFSET) + GRID_OFFSET, col: rangeIndex, editable: props.editable, isWorkHour: isInTimeRange(slot.zonedStart, workDayStart, workDayEnd), isWorkDay: 0 <= ((slot.zonedStart.getDay()\n                                                + (numberOfDays - workWeekStart)))\n                                                && ((slot.zonedStart.getDay()\n                                                    + (numberOfDays - workWeekStart))\n                                                    % numberOfDays)\n                                                    <= ((workWeekEnd + (numberOfDays - workWeekStart))) }))); })); })))); }),\n                                    ((props.currentTimeMarker\n                                        && intersects(first(timeRanges).start, last(timeRanges).end, new Date(), new Date(), true)))\n                                        && (React.createElement(CurrentTimeMarker, { groupIndex: groupIndex }))));\n                            })),\n                        dayItems.map(function (item) { return (React.createElement(EditItem, __assign({ key: item.isRecurring\n                                ? item.uid + \":\" + item.group.index + \":\" + item.range.index + \":\" + item.originalStart\n                                : item.uid + \":\" + item.group.index + \":\" + item.range.index }, item, { onDataAction: props.onDataAction, viewItem: props.viewItem, item: props.item, form: props.form, editable: props.editable, vertical: false }))); })),\n                timeItems.map(function (item) { return (React.createElement(EditItem, __assign({ key: item.isRecurring\n                        ? item.uid + \":\" + item.group.index + \":\" + item.range.index + \":\" + item.originalStart\n                        : item.uid + \":\" + item.group.index + \":\" + item.range.index }, item, { format: 't', onDataAction: props.onDataAction, viewItem: props.viewItem, item: props.item, form: props.form, editable: props.editable, vertical: true }))); })))));\n};\nvar multiDayViewDateRange = function (_a) {\n    var date = _a.date, _b = _a.numberOfDays, numberOfDays = _b === void 0 ? 1 : _b, timezone = _a.timezone;\n    var normalized = ZonedDate.fromLocalDate(date, timezone);\n    var firstDay = getDate(normalized);\n    var lastDay = addDays(firstDay, numberOfDays);\n    var zonedStart = ZonedDate.fromUTCDate(toUTCDateTime(firstDay), timezone);\n    var zonedEnd = ZonedDate.fromUTCDate(toUTCDateTime(lastDay), timezone);\n    var start = new Date(zonedStart.getTime());\n    var end = new Date(zonedEnd.getTime());\n    return {\n        start: start,\n        end: end,\n        zonedStart: zonedStart,\n        zonedEnd: zonedEnd\n    };\n};\n/** @hidden */\nexport var defaultProps = {\n    name: 'multi-day',\n    title: 'Multi Day',\n    currentTimeMarker: true,\n    dateRange: multiDayViewDateRange,\n    selectedDateFormat: '{0:D} - {1:D}',\n    selectedShortDateFormat: '{0:d} - {1:d}',\n    numberOfDays: 1,\n    startTime: '00:00',\n    endTime: '23:59',\n    isWorkDayStart: '08:00',\n    isWorkDayEnd: '17:00',\n    workWeekStart: Day.Monday,\n    workWeekEnd: Day.Friday,\n    step: 1,\n    slotDivisions: 2,\n    slotDuration: 60,\n    showCurrentTime: true,\n    defaultShowWorkHours: true\n};\nMultiDayView.propTypes = {\n    currentTimeMarker: PropTypes.bool,\n    name: PropTypes.string,\n    numberOfDays: PropTypes.number,\n    startTime: PropTypes.string,\n    endTime: PropTypes.string,\n    workDayStart: PropTypes.string,\n    workDayEnd: PropTypes.string,\n    workWeekStart: PropTypes.number,\n    workWeekEnd: PropTypes.any,\n    slotDivisions: PropTypes.number,\n    slotDuration: PropTypes.number,\n    showWorkHours: PropTypes.bool,\n    selectedDateFormat: PropTypes.string,\n    selectedShortDateFormat: PropTypes.string\n};\nMultiDayView.defaultProps = defaultProps;\nMultiDayView.displayName = 'KendoReactSchedulerMultiDayView';\n"]},"metadata":{},"sourceType":"module"}